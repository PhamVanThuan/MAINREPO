<?xml version="1.0" encoding="utf-8"?>
<ProcessName Name="Origination" ProductVersion="0.3" MapVersion="0.0.0.0" Retrieved="false" Legacy="True" ViewableOnUserInterfaceVersion="2">
  <WorkFlows>
    <WorkFlow WorkFlowName="Readvance Payments" LocationX="20" LocationY="70" GenericKeyTypeKey="2">
      <CustomVariables>
        <CustomVariable Name="ApplicationKey" Length="0" Type="integer" />
        <CustomVariable Name="PreviousState" Length="255" Type="string" />
        <CustomVariable Name="GenericKey" Length="0" Type="integer" />
        <CustomVariable Name="EntryPath" Length="0" Type="integer" />
      </CustomVariables>
      <ExternalActivities>
        <ExternalActivity Name="Move to Further Lending" Description="" />
        <ExternalActivity Name="Return From Credit" Description="" />
        <ExternalActivity Name="ReturnFromValuation" Description="" />
        <ExternalActivity Name="Move To Hold Application" Description="" />
        <ExternalActivity Name="Move To Reactivate Application" Description="" />
        <ExternalActivity Name="EXTArchiveFollowup" Description="" />
        <ExternalActivity Name="Rapid Post Credit Approve" Description="" />
      </ExternalActivities>
      <CustomForms>
        <CustomForm Name="App_FurtherLendingCalculator" Description="Rework Application" />
        <CustomForm Name="FL_Correspondence_SendSchedule" Description="Correspondence Send Schedule" />
        <CustomForm Name="FL_CreditDecision" Description="Chat TO Lara - Memo" />
        <CustomForm Name="FL_Documents" Description="" />
        <CustomForm Name="FL_MotivateReason" Description="" />
        <CustomForm Name="FL_NTU" Description="Further Lending NTU" />
        <CustomForm Name="FL_RVCapture" Description="Captures RV info" />
        <CustomForm Name="Orig_ApplicationSummaryRedirect" Description="Application Summary" />
        <CustomForm Name="Orig_AppNTUDisplay" Description="Application NTU" />
        <CustomForm Name="ReleaseAndVariationsStartNew" Description="Release And Variations Start New" />
        <CustomForm Name="SuperLoOptOut" Description="Opt out of Super Lo" />
        <CustomForm Name="SuperLoReadonly" Description="SuperLo Summary" />
        <CustomForm Name="WF_CorrespondenceHistory" Description="Correspondence History" />
        <CustomForm Name="WF_CreateFollowUp" Description="Create Followup " />
        <CustomForm Name="WF_Decline" Description="Further Lending Decline" />
        <CustomForm Name="WF_Memo" Description="Memo" />
        <CustomForm Name="WF_Reassign" Description="Reassign User" />
        <CustomForm Name="WF_StageTransitionHist" Description="Business Event History" />
        <CustomForm Name="WF_UpdateFollowup" Description="Edit Followup" />
        <CustomForm Name="WorkflowSubmit" Description="" />
        <CustomForm Name="WorkflowYesNo" Description="" />
      </CustomForms>
      <InvisibleAnchorNode LocationX="241.0761" LocationY="129.0433" />
      <Clapperboard LocationX="85.7316" LocationY="141.6389" LimitAccessTo="" Subject="Further Lending Channel" KeyVariable="ApplicationKey" />
      <States>
        <State LocationX="783.0634" LocationY="115.9526" X2ID="6a258664-a060-4457-85c7-7f2a74c4952b" Type="SAHL.X2Designer.Items.UserState" StateName="Rapid Decision">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Rapid Decision state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Rapid_Decision(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;// string User = string.Empty;&#xD;&#xA;// WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;FL Supervisor D&quot;, Readvance_Payments_Data.ApplicationKey, 155, instance.ID, &quot;Rapid Decision&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Rapid Decision state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Rapid_Decision(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.PreviousState = &quot;Rapid Decision&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="360.4668" LocationY="340.9532" X2ID="db048d87-b327-4d9a-9376-aa58b4e94768" Type="SAHL.X2Designer.Items.UserState" StateName="Contact Client">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Contact Client state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Contact_Client(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;// look for prev FL Proc Drole in prev map&#xD;&#xA;&#x9;string s = string.Empty;&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.GetUsersWhoWorkedOnThisCaseInOtherMapsWhereUserIsStillActiveAndInSameOrgStruct((IDomainMessageCollection)messages, (long)instance.SourceInstanceID, &quot;FL Processor D&quot;, 157, out s);&#xD;&#xA;&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(s))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, s, 157, 857, &quot;Contact Client&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;Contact Client&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Contact Client state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Contact_Client(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.PreviousState = &quot;Contact Client&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="898.8192" LocationY="664.9528" X2ID="4afe35f9-8007-46b1-ab3e-a978466c2a77" Type="SAHL.X2Designer.Items.UserState" StateName="Send Schedule">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Send Schedule state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Send_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Send Schedule state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Send_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.PreviousState = &quot;Send Schedule&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="892.0522" LocationY="550.9529" X2ID="95fbe467-eed9-4900-9e5f-920df9de6982" Type="SAHL.X2Designer.Items.UserState" StateName="Awaiting Schedule">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Awaiting Schedule state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Awaiting_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Awaiting Schedule state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Awaiting_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.PreviousState = &quot;Awaiting Schedule&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="898.8541" LocationY="362.9526" X2ID="cd6c3a9b-730b-451d-b023-7aa965f449ff" Type="SAHL.X2Designer.Items.UserState" StateName="Setup Payment">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Setup_Payment(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Setup Payment state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Setup_Payment(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.PreviousState = &quot;Setup Payment&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1010.646" LocationY="267.9526" X2ID="e581d6c0-d87c-4803-893a-b125d52fd3b8" Type="SAHL.X2Designer.Items.UserState" StateName="Disburse Funds">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disburse Funds state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Disburse_Funds(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disburse Funds state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Disburse_Funds(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.PreviousState = &quot;Disburse Funds&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1236.581" LocationY="100.9524" X2ID="ccdba41c-0167-4e8f-b239-74425df7fd39" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Folder Archive" ReturnActivity="FL Return Common" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Folder Archive state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Folder_Archive(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;common.SetOfferEndDate((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA; &#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Accepted, (int)SAHL.Common.Globals.OfferInformationTypes.AcceptedOffer);&#xD;&#xA; &#x9;FL.RemoveDetailTypes((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;return true; &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Folder Archive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Folder_Archive(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Folder Archive state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Folder_Archive(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="368.6076" LocationY="558.9999" X2ID="a97fe2f3-e3c5-4dcd-b0e2-d7f58b82ad74" Type="SAHL.X2Designer.Items.SystemState" StateName="Next Step" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Next Step state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Next_Step(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Next Step state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Next_Step(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1243.462" LocationY="267.3616" X2ID="e76edcbb-5a74-4088-a9fd-a168dac70d48" Type="SAHL.X2Designer.Items.UserState" StateName="Disbursed">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursed state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Disbursed(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursed state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Disbursed(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.PreviousState = &quot;Disbursed&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="244.2584" LocationY="667.3611" X2ID="acf6a944-f6f5-4bc3-84ac-af7eb7d849a5" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Further Loan" ReturnActivity="Return ReAdv Payment FL" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Further Loan state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Further_Loan(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Further Loan state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Further_Loan(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Further Loan state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Further_Loan(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="106.8718" LocationY="680.3604" X2ID="f741dd46-c20d-43e3-b30a-3182ce0081ae" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Reassign">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Reassign state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Reassign(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Reassign state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Reassign(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Rapid Decision" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Send Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Setup Payment" />
            <AppliesToCollection AppliesToCollectionItem="Disburse Funds" />
            <AppliesToCollection AppliesToCollectionItem="NTU" />
            <AppliesToCollection AppliesToCollectionItem="Decline" />
            <AppliesToCollection AppliesToCollectionItem="Followup Hold" />
            <AppliesToCollection AppliesToCollectionItem="Ready To Followup" />
            <AppliesToCollection AppliesToCollectionItem="Require SuperLo Opt-Out" />
          </AppliesTo>
        </State>
        <State LocationX="786.178" LocationY="792.361" X2ID="82c30396-8fcb-464a-8edc-d20f85bf432e" Type="SAHL.X2Designer.Items.CommonState" StateName="Common NTU">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common NTU state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common NTU state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Rapid Decision" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Send Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Setup Payment" />
            <AppliesToCollection AppliesToCollectionItem="Disburse Funds" />
            <AppliesToCollection AppliesToCollectionItem="Require SuperLo Opt-Out" />
          </AppliesTo>
        </State>
        <State LocationX="765.6751" LocationY="955.3588" X2ID="01bff2d4-bc96-49ab-9ce8-392a995843e9" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Rapid Decision" />
          </AppliesTo>
        </State>
        <State LocationX="955.576" LocationY="793.361" X2ID="d5170845-8b0f-4eb7-8d04-857ec15a4873" Type="SAHL.X2Designer.Items.UserState" StateName="NTU">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the NTU state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon  common = &#x9;DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; &#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.NTU, -1);&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the NTU state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //Readvance_Payments_Data.PreviousState = &quot;NTU&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_AppNTUDisplay" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="954.576" LocationY="955.3588" X2ID="176c7c4d-4883-4252-a466-f5199cff2550" Type="SAHL.X2Designer.Items.UserState" StateName="Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{ &#xD;&#xA; ICommon  common = &#x9;DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Declined, -1);&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //Readvance_Payments_Data.PreviousState = &quot;Decline&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="819.9797" LocationY="866.36" X2ID="c7f14683-9a3d-4a9b-b83a-b9f1c6909549" Type="SAHL.X2Designer.Items.SystemState" StateName="Return to sender" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Return to sender state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Return_to_sender(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon  common = &#x9;DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Open, -1);&#xD;&#xA;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Return to sender state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Return_to_sender(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Return to sender state is autoforwarded.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetForwardStateName_Return_to_sender(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Readvance_Payments_Data.PreviousState;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1134.497" LocationY="955.3588" X2ID="144ecee9-003b-4975-bbba-b6824b7a9397" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Decline" ReturnActivity="FL Return Common" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;&#xD;&#xA; &#x9;furtherLending.RemoveDetailTypes((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA; &#x9;furtherLending.ArchiveFLRelatedCases((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;&#xD;&#xA; &#x9;ICommon  common = &#x9;DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#x9;&#xD;&#xA; &#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Declined, -1);&#xD;&#xA;&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1140" LocationY="794.0861" X2ID="e00a61d3-68a0-4a22-a705-6d567405a6fa" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive NTU" ReturnActivity="FL Return Common" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive NTU state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA; &#x9;furtherLending.RemoveDetailTypes((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA; &#x9;furtherLending.ArchiveFLRelatedCases((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;&#xD;&#xA;&#x9;ICommon  common = &#x9;DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#x9;&#xD;&#xA; &#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.NTU, -1);&#xD;&#xA;&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive NTU state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive NTU state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="70.3698" LocationY="811.3611" X2ID="4f6be6d4-f060-4999-b969-ba11d2dea07a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Send Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Schedule" />
          </AppliesTo>
        </State>
        <State LocationX="295.4885" LocationY="808.9326" X2ID="73554563-d993-4669-8d79-318e878685fd" Type="SAHL.X2Designer.Items.UserState" StateName="Followup Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Followup_Hold(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Followup_Hold(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
          </CustomForms>
        </State>
        <State LocationX="505.6315" LocationY="809.934" X2ID="c6c2d3ea-16d9-4e14-b965-cd3dfb9cd7c5" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Followup Complete" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Complete state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Followup_Complete(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Complete state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Followup_Complete(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Complete state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Followup_Complete(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="285.027" LocationY="960.3419" X2ID="064aa808-8192-44dc-8e3c-7820a8bacd19" Type="SAHL.X2Designer.Items.UserState" StateName="Ready To Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Ready To Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Ready_To_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Ready To Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Ready_To_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="603.5652" LocationY="889.3611" X2ID="440d551e-2dad-41cd-8bc7-c4ea8216cb2d" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Archive Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Archive_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Archive_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Followup Hold" />
            <AppliesToCollection AppliesToCollectionItem="Ready To Followup" />
          </AppliesTo>
        </State>
        <State LocationX="1054.756" LocationY="115.3612" X2ID="d1ed1dbe-fa0b-4459-bd12-37d936cfa8a6" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive" ReturnActivity="Rapid Submit to Credit" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Archive(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true; &#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1150.135" LocationY="466.3615" X2ID="563139d7-d826-4e80-8571-cdef219e2c10" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Return to Processor">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Return to Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Return_to_Processor(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Return to Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Return_to_Processor(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Rapid Decision" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Send Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Setup Payment" />
            <AppliesToCollection AppliesToCollectionItem="Disburse Funds" />
            <AppliesToCollection AppliesToCollectionItem="Deed of Surety Instruction" />
            <AppliesToCollection AppliesToCollectionItem="Require SuperLo Opt-Out" />
          </AppliesTo>
        </State>
        <State LocationX="1461.629" LocationY="466.3615" X2ID="6ff3999e-0981-4415-9749-dd4212a44d3e" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Processor" ReturnActivity="Return Processor Readvance" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Processor(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;// get current user assigned to this case, get source id, assign user to source id in WA as this case is heading back to AppMan&#xD;&#xA;&#x9;//WorkflowAssignment.ReassignParentMapToCurrentUser(param.Tran, instance.ID, (Int64)instance.SourceInstanceID, Readvance_Payments_Data.ApplicationKey, &quot;Archive Processor&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;string ADUserName = WorkflowAssignment.GetLatestUserAcrossInstances((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, 157, &quot;FL Processor D&quot;, &quot;Archive Processor&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;if (ADUserName == null || ADUserName == string.Empty || ADUserName.Length == 0)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    //WorkflowAssignment.X2RoundRobinForGivenOSKeys(param.Tran, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, (Int64)instance.SourceInstanceID, &quot;Archive Processor&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#x9;    WorkflowAssignment.X2RoundRobinForPointerDescription((IDomainMessageCollection)messages, instance.SourceInstanceID.Value, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor, Readvance_Payments_Data.ApplicationKey, &quot;FL Processor D&quot;, &quot;Archive Processor&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.SourceInstanceID.Value, Readvance_Payments_Data.ApplicationKey, ADUserName, 157, 857, &quot;Archive Processor&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Processor(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Processor(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="189.4219" LocationY="884.0475" X2ID="a3a4f7d9-715f-4067-b2b7-a36affd86ff7" Type="SAHL.X2Designer.Items.SystemState" StateName="State29" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_State29(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_State29(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="64.1745" LocationY="960.0479" X2ID="6be8c725-d621-48ed-8872-32b4224c70fc" Type="SAHL.X2Designer.Items.SystemState" StateName="FollowupReturn" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_FollowupReturn(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_FollowupReturn(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="public string GetForwardStateName_FollowupReturn(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Readvance_Payments_Data.PreviousState;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="586.5626" LocationY="361.4089" X2ID="b63e4a9c-c1c2-404a-ac39-b65b8cbcd178" Type="SAHL.X2Designer.Items.UserState" StateName="Deed of Surety Instruction">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Deed_of_Surety_Instruction(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;RV Admin D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;RV Admin D&quot;, Readvance_Payments_Data.ApplicationKey, 595, instance.ID, &quot;Deed of Surety Instruction&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.RVAdmin);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Deed_of_Surety_Instruction(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="RV Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
          </CustomForms>
        </State>
        <State LocationX="1379.619" LocationY="579.4998" X2ID="f0b3dc9c-d0ff-41e3-bf29-1baaab7b19e9" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Lightstone AVM">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Lightstone_AVM(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Lightstone_AVM(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Rapid Decision" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Deed of Surety Instruction" />
          </AppliesTo>
        </State>
        <State LocationX="35.6433" LocationY="211.4999" X2ID="3e6011eb-359b-462a-a830-845558c6f593" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive FL SuperLo OptOut" ReturnActivity="Return from Opt-Out Super Lo" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Archive_FL_SuperLo_OptOut(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Archive_FL_SuperLo_OptOut(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="public bool OnReturn_Archive_FL_SuperLo_OptOut(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="36.073" LocationY="379.4999" X2ID="34591629-f174-4780-a2fc-f6551fa6316f" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Opt-Out SuperLo">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Require SuperLo Opt-Out" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Send Schedule" />
            <AppliesToCollection AppliesToCollectionItem="Setup Payment" />
          </AppliesTo>
        </State>
        <State LocationX="20" LocationY="497.5001" X2ID="73215cbc-6108-4d49-be54-bec9a24775c8" Type="SAHL.X2Designer.Items.UserState" StateName="Require SuperLo Opt-Out">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Require_SuperLo_Opt_Out(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Require_SuperLo_Opt_Out(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="SuperLoReadonly" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="297.0573" LocationY="497.4999" X2ID="b3f6f79a-8172-40eb-8685-875a6c543fd6" Type="SAHL.X2Designer.Items.SystemState" StateName="OptOut Return" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_OptOut_Return(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_OptOut_Return(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="public string GetForwardStateName_OptOut_Return(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Readvance_Payments_Data.PreviousState;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="395.6667" LocationY="138.5" X2ID="1360e599-a442-483e-9b44-f8fd3b07256a" Type="SAHL.X2Designer.Items.SystemState" StateName="Check Application" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Check_Application(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Check_Application(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
      </States>
      <Activities>
        <Activity LocationX="195.5045" LocationY="85.09114" Type="SAHL.X2Designer.Items.ExternalActivity" Id="1" Name="Readvance Payment" X2ID="be423848-9a9b-4300-b103-a20c4011f1e2" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="Move to Further Lending" FromNode="ClapperBoard" ToNode="Check Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Readvance_Payment(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Readvance_Payment(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.EntryPath = 1;&#xD;&#xA; &#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Readvance_Payment(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="367.2326" LocationY="458.9532" Type="SAHL.X2Designer.Items.UserActivity" Id="34" Name="Inform Client" X2ID="baa6211c-2914-4e54-9534-311cdf9d6fa5" Message="Inform Client" StageTransitionMessage="Inform Client [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Contact Client" ToNode="Next Step">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Inform_Client(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Inform_Client(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA; &#x9;return furtherLending.CheckInformClientRule((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Inform Client.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Inform_Client(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Inform Client&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Inform_Client(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2083" DefinitionGroupDescription="Further loan &amp; advance" DefinitionDescription="Inform Client" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="357.0996" LocationY="669.9528" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="36" Name="Further Advance" X2ID="54967c7d-21ba-4517-bebd-5213b66f26cc" Message="" StageTransitionMessage="" Description="" Priority="5" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Next Step" ToNode="Send Schedule">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Advance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA; &#x9;return furtherLending.IsFurtherAdvanceApplication((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Advance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;RV Manager D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;RV Admin D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;Send Schedule&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Further Advance.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Further_Advance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Advance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2062" DefinitionGroupDescription="Further Advance" DefinitionDescription="Further Advance" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="896.3192" LocationY="614.9528" Type="SAHL.X2Designer.Items.UserActivity" Id="37" Name="Send Schedule" X2ID="160b4543-c5a4-48bd-a695-e4949ada8753" Message="Send Schedule" StageTransitionMessage="Send Schedule [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="FL_Correspondence_SendSchedule" LinkedActivity="" UseLinkedActivity="False" FromNode="Send Schedule" ToNode="Awaiting Schedule">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Send_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Send_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Send Schedule.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Send_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Send Schedule&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Send_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2063" DefinitionGroupDescription="Further Advance" DefinitionDescription="Send Schedule" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="890.4752" LocationY="492.9532" Type="SAHL.X2Designer.Items.UserActivity" Id="38" Name="Receive Schedule" X2ID="1a61d23b-373c-4a17-b95d-8a2b059538e7" Message="" StageTransitionMessage="Receive Schedule [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Awaiting Schedule" ToNode="Setup Payment">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Receive_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Receive_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Receive Schedule.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Receive_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Receive Schedule&quot;); &#xD;&#xA; &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Receive_Schedule(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2064" DefinitionGroupDescription="Further Advance" DefinitionDescription="Receive Schedule" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1004.058" LocationY="367.9526" Type="SAHL.X2Designer.Items.UserActivity" Id="40" Name="Payment Prepared" X2ID="89ed1909-800d-4b09-a486-7917f42dbba0" Message="Payment Prepared" StageTransitionMessage="Payment Prepared [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Setup Payment" ToNode="Disburse Funds">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Payment_Prepared(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Payment_Prepared(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;// deactivate workflow asignment records&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;// round robin&#xD;&#xA;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeysByProcess((IDomainMessageCollection)messages, &quot;FL Supervisor D&quot;, Readvance_Payments_Data.ApplicationKey, null, instance.ID, &quot;Disburse Funds&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLSupervisorDisburseFunds);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Payment Prepared.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Payment_Prepared(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Payment Prepared&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Payment_Prepared(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2018" DefinitionGroupDescription="Disbursement" DefinitionDescription="Initiate Payment" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="830.2151" LocationY="221.9523" Type="SAHL.X2Designer.Items.UserActivity" Id="41" Name="Approve Rapid" X2ID="31ef04f1-c38a-4fde-958c-63d1b6698df2" Message="Approve Rapid" StageTransitionMessage="Approve Rapid [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Rapid Decision" ToNode="Setup Payment">
          <Access>
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Approve_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Approve_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Open, (int)SAHL.Common.Globals.OfferInformationTypes.AcceptedOffer);&#xD;&#xA;&#xD;&#xA;&#x9;// Deactivate the supervisor (deactivate all then wake up fl prod D&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;string s = &quot;&quot;;&#xD;&#xA;&#x9;WorkflowAssignment.GetUsersWhoWorkedOnThisCaseInOtherMapsWhereUserIsStillActiveAndInSameOrgStruct((IDomainMessageCollection)messages, instance.SourceInstanceID.Value, &quot;FL Processor D&quot;, 157, out s);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(s))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, s, 157, 857, &quot;Rapid Decision&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    string User = string.Empty;&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;Setup Payment&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;///////////////////////////////////////////////////////////&#xD;&#xA;&#x9;string ADUserName = WorkflowAssignment.GetLastUserToWorkOnCaseAcrossInstances((IDomainMessageCollection)messages, instance.ID, (Int64)instance.SourceInstanceID, 921, &quot;FL Supervisor D&quot;, &quot;Readvance Payments&quot;);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, ADUserName, 155, 921, &quot;Rapid Decision&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Approve Rapid.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Approve_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Approve Rapid&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Approve_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2108" DefinitionGroupDescription="Rapid" DefinitionDescription="Approve Rapid" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1103.256" LocationY="272.9526" Type="SAHL.X2Designer.Items.UserActivity" Id="42" Name="Disbursement Complete" X2ID="786444b6-3b16-475f-9e99-26301f0ea53a" Message="Disbursement Complete" StageTransitionMessage="Disbursement Complete [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disburse Funds" ToNode="Disbursed">
          <Access>
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Disbursement_Complete(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Disbursement_Complete(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;  IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;  ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;  var passed = furtherLending.CheckCanDisburseReadvanceRules((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;  if(passed)&#xD;&#xA;  {&#xD;&#xA;      common.AddDetailType((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, param.ADUserName, SAHL.Common.Constants.DetailTypes.NewLegalAgreementSigned);&#xD;&#xA;  }&#xD;&#xA;  return passed;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Disbursement Complete.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Disbursement_Complete(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Disbursement Complete&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Disbursement_Complete(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2023" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Disburse Funds" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="922.882" LocationY="119.9526" Type="SAHL.X2Designer.Items.UserActivity" Id="52" Name="Refer to Credit" X2ID="e50a159a-926d-4910-8bea-cf1fb088f740" Message="Refer to Credit" StageTransitionMessage="Refer to Credit [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Rapid Decision" ToNode="Archive">
          <Access>
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Refer_to_Credit(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Refer_to_Credit(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Refer to Credit.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Refer_to_Credit(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Refer to Credit&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Refer_to_Credit(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2110" DefinitionGroupDescription="Rapid" DefinitionDescription="Refer to Credit" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="263.9903" LocationY="563.9988" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="69" Name="Further Loan" X2ID="29d470b3-2465-4fed-9de8-150c135a41ea" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Next Step" ToNode="Archive Further Loan">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Loan(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA; &#x9;return furtherLending.IsFurtherLoanApplication((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Loan(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Further Loan.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Further_Loan(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Loan(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2014" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Further Loan" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1108.597" LocationY="221.3615" Type="SAHL.X2Designer.Items.UserActivity" Id="21" Name="Rollback Disbursement" X2ID="743b1310-f574-4cff-b426-128984014af5" Message="Rollback Disbursement" StageTransitionMessage="Rollback Disbursement [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disbursed" ToNode="Disburse Funds">
          <Access>
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rollback_Disbursement(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rollback_Disbursement(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;    IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;    var passed = furtherLending.CanRollbackReadvanceCorrectionTransaction((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA;    if(passed)&#xD;&#xA;&#x9;{&#xD;&#xA;        ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;        if (common.GetApplicationType((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey) == (int)SAHL.Common.Globals.OfferTypes.FurtherAdvance)&#xD;&#xA;        {&#xD;&#xA;            common.RemoveDetailFromAccount((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, SAHL.Common.Constants.DetailTypes.NewLegalAgreementSigned);&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;    return passed;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Rollback Disbursement.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Rollback_Disbursement(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Rollback Disbursement&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rollback_Disbursement(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2015" DefinitionGroupDescription="Disbursement" DefinitionDescription="Rollback Disbursement" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1247.962" LocationY="193.3615" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="12hrs" X2ID="a2b1f9b2-1819-40d5-8ddf-fa28e2ca26db" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Disbursed" ToNode="Folder Archive">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_12hrs(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_12hrs(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_12hrs(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for 12hrs.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_12hrs(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now.AddHours(12));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2024" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="12 hrs" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="183.6516" LocationY="194.3619" Type="SAHL.X2Designer.Items.ExternalActivity" Id="24" Name="Approve App - FA &amp; FL" X2ID="aacfb10c-36a5-4e85-b0ce-adede7adc7b0" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="" InvokedBy="" FromNode="ClapperBoard" ToNode="Check Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Approve_App___FA___FL(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Approve_App___FA___FL(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.EntryPath = 3;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Approve_App___FA___FL(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="121.1331" LocationY="583.3607" Type="SAHL.X2Designer.Items.UserActivity" Id="25" Name="Reassign User" X2ID="d288cf64-522a-4c16-b634-5606fa856854" Message="" StageTransitionMessage="param.Data.ToString() [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_Reassign" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Reassign" ToNode="Common Reassign">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reassign_User(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reassign_User(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Reassign_User(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;   if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reassign_User(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2270" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="ReAssign" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1039.903" LocationY="798.361" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="NTU Timeout" X2ID="bb10be6e-91bf-412b-85ac-dfa6c2ef992f" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="NTU" ToNode="Archive NTU">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_NTU_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_NTU_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  NTU Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_NTU_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for NTU Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_NTU_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1878" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="NTU Timeout" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1032.016" LocationY="960.3578" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Decline Timeout" X2ID="52f70e78-4b36-492f-b38f-c5c361b387d9" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Decline" ToNode="Archive Decline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Decline_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Decline Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Decline_Timeout(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1879" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Decline Timeout" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="945.6352" LocationY="844.36" Type="SAHL.X2Designer.Items.UserActivity" Id="37" Name="Reinstate NTU" X2ID="e91817f9-4260-4eb1-841d-3170eae5802e" Message="Reinstate NTU" StageTransitionMessage="Reinstate NTU [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="NTU" ToNode="Return to sender">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstate_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstate_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;if (Readvance_Payments_Data.PreviousState.ToUpper() == &quot;RAPID DECISION&quot;)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Supervisor D&quot;, Readvance_Payments_Data.ApplicationKey, 155, instance.ID, &quot;Reinstate NTU&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLSupervisor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;string ADUserName = WorkflowAssignment.GetLatestUserAcrossInstances((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, 157, &quot;FL Processor D&quot;, &quot;NTU&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;if (ADUserName != null)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, ADUserName, 157, 857, &quot;NTU&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    //WorkflowAssignment.X2RoundRobinForGivenOSKeys(param.Tran, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;NTU&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#x9;    WorkflowAssignment.X2RoundRobinForPointerDescription((IDomainMessageCollection)messages, instance.ID, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor, Readvance_Payments_Data.ApplicationKey, &quot;FL Processor D&quot;, &quot;NTU&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reinstate NTU.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reinstate_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reinstate NTU&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstate_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1877" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Reinstate NTU" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="936.7492" LocationY="891.3589" Type="SAHL.X2Designer.Items.UserActivity" Id="38" Name="Reinstate Decline" X2ID="4d02f0b3-c221-4c6e-9bff-385c6cf12f1d" Message="Reinstate Decline" StageTransitionMessage="Reinstate Decline [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Decline" ToNode="Return to sender">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstate_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstate_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Supervisor D&quot;, Readvance_Payments_Data.ApplicationKey, 155, instance.ID, &quot;Reinstate Decline&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLSupervisor);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reinstate Decline.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reinstate_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reinstate Decline&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstate_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1872" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Reinstate Decline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="868.5752" LocationY="960.3588" Type="SAHL.X2Designer.Items.UserActivity" Id="39" Name="Decline" X2ID="d9db7357-7f67-4a8f-a32b-d5da0e392bfe" Message="Decline" StageTransitionMessage="Decline [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_Decline" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Decline" ToNode="Decline">
          <Access>
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;string ADUserName = WorkflowAssignment.GetLatestUserAcrossInstances((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, 157, &quot;FL Processor D&quot;, &quot;Decline&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, ADUserName, 157, 857, &quot;Decline&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;//WorkflowAssignment.X2RoundRobinForGivenOSKeys(param.Tran, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;Decline&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#x9;WorkflowAssignment.X2RoundRobinForPointerDescription((IDomainMessageCollection)messages, instance.ID, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor, Readvance_Payments_Data.ApplicationKey, &quot;FL Processor D&quot;, &quot;Decline&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;///////////////////////////////////////////////////////////&#xD;&#xA;&#x9;ADUserName = WorkflowAssignment.GetLastUserToWorkOnCaseAcrossInstances((IDomainMessageCollection)messages, instance.ID, (long)instance.SourceInstanceID, 921, &quot;FL Supervisor D&quot;, &quot;Readvance Payments&quot;);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, ADUserName, 155, 921, &quot;Rapid Decision&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1784" DefinitionGroupDescription="Application Management" DefinitionDescription="Decline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="875.5752" LocationY="798.361" Type="SAHL.X2Designer.Items.UserActivity" Id="40" Name="NTU" X2ID="5f2cf127-1482-453f-a4d6-973ddb39f464" Message="NTU" StageTransitionMessage="NTU [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="FL_NTU" LinkedActivity="" UseLinkedActivity="False" FromNode="Common NTU" ToNode="NTU">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;string ADUserName = WorkflowAssignment.GetLatestUserAcrossInstances((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, 157, &quot;FL Processor D&quot;, &quot;NTU&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, ADUserName, 157, 857, &quot;NTU&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;//WorkflowAssignment.X2RoundRobinForGivenOSKeys(param.Tran, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;NTU&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#x9;WorkflowAssignment.X2RoundRobinForPointerDescription((IDomainMessageCollection)messages, instance.ID, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor, Readvance_Payments_Data.ApplicationKey, &quot;FL Processor D&quot;, &quot;NTU&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  NTU.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;NTU&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_NTU(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1338" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="NTU" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="394.0975" LocationY="813.9329" Type="SAHL.X2Designer.Items.UserActivity" Id="39" Name="Complete Followup" X2ID="daecd25b-df5c-4ba6-a6c8-0891db17b361" Message="Complete Followup" StageTransitionMessage="Complete Followup" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Followup Hold" ToNode="Followup Complete">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="New Business Processor D" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Complete_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Complete_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Complete_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="231.7562" LocationY="756.9329" Type="SAHL.X2Designer.Items.UserActivity" Id="40" Name="Update Followup" X2ID="8268f7c0-94e2-4005-9fd0-efff4bc4c501" Message="Update Followup" StageTransitionMessage="Update Followup" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_UpdateFollowup" LinkedActivity="" UseLinkedActivity="False" FromNode="Followup Hold" ToNode="Followup Hold">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="New Business Processor D" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Update_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Update_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Update_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="76.2798" LocationY="891.9329" Type="SAHL.X2Designer.Items.UserActivity" Id="41" Name="Create Followup" X2ID="7671335d-65fe-4aaa-8769-8b43d54a8e77" Message="Create Followup" StageTransitionMessage="Create Followup" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_CreateFollowUp" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Followup" ToNode="State29">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA; &#x9;string CaseName = common.GetCaseName((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA; &#x9;instance.Subject = CaseName;&#xD;&#xA; &#x9;instance.Name = Readvance_Payments_Data.ApplicationKey.ToString();&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="300.2562" LocationY="885.9329" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="OnFollowup" X2ID="0288544f-3ea4-4fb6-af45-24e9e5ce9675" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Followup Hold" ToNode="Ready To Followup">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnFollowup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnFollowup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for OnFollowup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_OnFollowup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon  common = &#x9;DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; &#x9;return common.GetFollowupTime((IDomainMessageCollection)messages, Readvance_Payments_Data.GenericKey);&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="410.2383" LocationY="894.3422" Type="SAHL.X2Designer.Items.UserActivity" Id="43" Name="Continue with Followup" X2ID="46952f20-b3aa-4196-9926-516addfec7b3" Message="Continue with Followup" StageTransitionMessage="Continue with Followup" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Ready To Followup" ToNode="Followup Complete">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Continue_with_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Continue_with_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Continue_with_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="347.7562" LocationY="862.3611" Type="SAHL.X2Designer.Items.UserActivity" Id="44" Name="Reinstate Followup" X2ID="1a8ddf0b-bf92-4493-b0c6-762435e982a9" Message="Reinstate Followup" StageTransitionMessage="Reinstate Followup" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_UpdateFollowup" LinkedActivity="" UseLinkedActivity="False" FromNode="Ready To Followup" ToNode="Followup Hold">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstate_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstate_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstate_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="485.2299" LocationY="965.3618" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Archive Complete Followup" X2ID="a878d98f-7a97-4d6d-b765-f45d26105fcb" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Ready To Followup" ToNode="Followup Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Archive_Complete_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Archive_Complete_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Archive Complete Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Archive_Complete_Followup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now.AddDays(10));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1035.866" LocationY="1009.361" Type="SAHL.X2Designer.Items.UserActivity" Id="38" Name="Decline Final" X2ID="ecb8f8df-4284-43b6-8ae7-5dd77d6a9414" Message="Decline Final" StageTransitionMessage="Decline Final [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Decline" ToNode="Archive Decline">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA; &#x9;return furtherLending.CheckNTUDeclineFinalRules((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline Final.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline Final&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1875" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Decline Final" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1047.754" LocationY="751.3611" Type="SAHL.X2Designer.Items.UserActivity" Id="39" Name="NTU Final" X2ID="15009757-1b17-4fd2-91d3-fc42f4b7b46c" Message="NTU Final" StageTransitionMessage="NTU Final [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="NTU" ToNode="Archive NTU">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_NTU_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_NTU_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA; &#x9;return furtherLending.CheckNTUDeclineFinalRules((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_NTU_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;NTU Final&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_NTU_Final(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3688" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="NTU Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="941.1828" LocationY="1064.361" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="40" Name="Decline by Credit" X2ID="717533a9-f794-446a-bbad-293bb42371b2" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Decline" ToNode="Decline by Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_by_Credit(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_by_Credit(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline_by_Credit(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="614.2189" LocationY="812.3611" Type="SAHL.X2Designer.Items.ExternalActivity" Id="40" Name="EXT_ArchiveFollowup" X2ID="29d50f3e-4fba-4af9-92aa-3559c78e3a4c" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="EXTArchiveFollowup" FromNode="Common Archive Followup" ToNode="Followup Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_ArchiveFollowup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_ArchiveFollowup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_ArchiveFollowup(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="172.362" LocationY="138.3612" Type="SAHL.X2Designer.Items.ExternalActivity" Id="39" Name="Readvance Post Credit Appro" X2ID="73aa1e4c-ba13-4d3d-8eec-e879ed9698da" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="Rapid Post Credit Approve" FromNode="ClapperBoard" ToNode="Check Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Readvance_Post_Credit_Appro(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Readvance_Post_Credit_Appro(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Readvance_Payments_Data.EntryPath = 2;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Readvance_Post_Credit_Appro(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1304.207" LocationY="471.3615" Type="SAHL.X2Designer.Items.UserActivity" Id="40" Name="Return to Manage Application" X2ID="5d2c44b0-7a22-4efb-a20a-90b12ee4db9f" Message="Return from Readvance Payments" StageTransitionMessage="Return from Readvance Payments [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Return to Processor" ToNode="Archive Processor">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="RV Admin D" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_to_Manage_Application(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_to_Manage_Application(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; ICommon  common =   DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#x9;&#xD;&#xA; common.ArchiveV3ITCForApplication((IDomainMessageCollection)messages,Readvance_Payments_Data.ApplicationKey); &#xD;&#xA; common.UpdateOfferStatus((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Open, -1);&#xD;&#xA; common.CreateNewRevision((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA; return true;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Return_to_Manage_Application(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Return from Readvance Payments&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_to_Manage_Application(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1308.948" LocationY="180.3614" Type="SAHL.X2Designer.Items.UserActivity" Id="40" Name="12 Hour Override" X2ID="16652b54-db1b-48c9-b155-fe7c87ab075a" Message="12 Hour Override" StageTransitionMessage="12 Hour Override" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disbursed" ToNode="Folder Archive">
          <Access>
            <AccessCollection AccessCollectionItem="ITStaff" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_12_Hour_Override(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_12_Hour_Override(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_12_Hour_Override(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="637.1511" LocationY="195.3614" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="40" Name="Sys Post Cred Appro" X2ID="d3e7f404-6ee9-47c3-9baa-8acc2707b4cd" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Application" ToNode="Setup Payment">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Sys_Post_Cred_Appro(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Readvance_Payments_Data.EntryPath == 2)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Sys_Post_Cred_Appro(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;int applicationKey = 0;&#xD;&#xA;&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;applicationKey = common.GetApplicationKeyFromSourceInstanceID((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#x9;Readvance_Payments_Data.ApplicationKey = applicationKey;&#xD;&#xA;&#xD;&#xA;&#x9;instance.Name = applicationKey.ToString();&#xD;&#xA;&#xD;&#xA;&#x9;instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, applicationKey);&#xD;&#xA;&#x9;// look for prev FL Proc Drole in prev map&#xD;&#xA;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;WorkflowAssignment.GetUsersWhoWorkedOnThisCaseInOtherMapsWhereUserIsStillActiveAndInSameOrgStruct((IDomainMessageCollection)messages, (long)instance.SourceInstanceID, &quot;FL Processor D&quot;, 157, out s);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(s))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, s, 157, 857, &quot;Setup Payment&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;Setup Payment&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;string ADUserName = WorkflowAssignment.GetLastUserToWorkOnCaseAcrossInstances((IDomainMessageCollection)messages, instance.ID, (Int64)instance.SourceInstanceID, 921, &quot;FL Supervisor D&quot;, &quot;Readvance Payments&quot;);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, ADUserName, 155, 921, &quot;Rapid Decision&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Sys_Post_Cred_Appro(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="523.3776" LocationY="92.36125" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="41" Name="Sys Post Readvance" X2ID="a96750a2-5012-4ef0-8186-974753d5d348" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Application" ToNode="Rapid Decision">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Sys_Post_Readvance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Readvance_Payments_Data.EntryPath == 1)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Sys_Post_Readvance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;    int applicationKey = 0;&#xD;&#xA;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    applicationKey = common.GetApplicationKeyFromSourceInstanceID((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;    Readvance_Payments_Data.ApplicationKey = applicationKey;&#xD;&#xA;    instance.Name = applicationKey.ToString();&#xD;&#xA;    instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, applicationKey);&#xD;&#xA;&#xD;&#xA;    string s = string.Empty;&#xD;&#xA;    string User = string.Empty;&#xD;&#xA;    workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Supervisor D&quot;, Readvance_Payments_Data.ApplicationKey, 155, instance.ID, &quot;Rapid Decision&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLSupervisor);&#xD;&#xA;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Sys_Post_Readvance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="346.0286" LocationY="241.3614" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="42" Name="Sys Appro FL and FA" X2ID="ae9c6985-d175-409b-a793-4e171b630774" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Application" ToNode="Contact Client">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Sys_Appro_FL_and_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Readvance_Payments_Data.EntryPath == 3)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Sys_Appro_FL_and_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;int applicationKey = 0;&#xD;&#xA;&#x9;ICommon  common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#x9;&#xD;&#xA;&#x9;applicationKey = common.GetApplicationKeyFromSourceInstanceID((IDomainMessageCollection)messages, instance.ID);&#x9;&#xD;&#xA;&#x9;Readvance_Payments_Data.ApplicationKey = applicationKey;&#xD;&#xA;&#x9;instance.Name = applicationKey.ToString(); &#xD;&#xA;&#x9;instance.Subject = common.GetCaseName((IDomainMessageCollection)messages,applicationKey);&#xD;&#xA;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Sys_Appro_FL_and_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Sys_Appro_FL_and_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2082" DefinitionGroupDescription="Further loan &amp; advance" DefinitionDescription="Approve App - FA &amp; FL" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="187.3489" LocationY="814.0475" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="42" Name="OnFollowUp" X2ID="094062d5-dad9-4b1c-985a-240d4e904b85" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="State29" ToNode="Followup Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnFollowUp(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;   string s = string.Empty;&#xD;&#xA; ICommon  common =   DomainServiceLoader.Instance.Get&lt;ICommon&gt;(); &#xD;&#xA; instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA; instance.Name = Readvance_Payments_Data.ApplicationKey.ToString();&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnFollowUp(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    workflowAssignment.CloneActiveSecurityFromInstanceForInstance((IDomainMessageCollection)messages, instance.ParentInstanceID.Value, instance.ID);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnFollowUp(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="172.0078" LocationY="964.7147" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="43" Name="OnFollowUpReturn" X2ID="e47357a5-f888-4452-9464-69b87881acbb" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="State29" ToNode="FollowupReturn">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnFollowUpReturn(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnFollowUpReturn(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnFollowUpReturn(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="750.1954" LocationY="563.4999" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="44" Name="Rapid Readvance" X2ID="ef0cb95d-85e2-4322-b195-e043754f85b1" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Next Step" ToNode="Setup Payment">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rapid_Readvance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#x9;&#xD;&#xA;&#x9; IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#x9;&#xD;&#xA;&#x9; return furtherLending.IsReadvanceAdvanceApplication((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA; &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rapid_Readvance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;RV Manager D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;RV Admin D&quot;);&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;string s = &quot;&quot;;&#xD;&#xA;&#x9;workflowAssignment.GetUsersWhoWorkedOnThisCaseInOtherMapsWhereUserIsStillActiveAndInSameOrgStruct((IDomainMessageCollection)messages, (Int64)instance.SourceInstanceID, &quot;FL Processor D&quot;, 157, out s);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(s))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    workflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, s, 157, 857, &quot;Setup Payment&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    string User = string.Empty;&#xD;&#xA;&#x9;    workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;Setup Payment&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;///////////////////////////////////////////////////////////&#xD;&#xA;&#x9;string ADUserName = workflowAssignment.GetLastUserToWorkOnCaseAcrossInstances((IDomainMessageCollection)messages, instance.ID, (Int64)instance.SourceInstanceID, 921, &quot;FL Supervisor D&quot;, &quot;Readvance Payments&quot;);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    workflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, ADUserName, 155, 921, &quot;Rapid Decision&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Rapid_Readvance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rapid_Readvance(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4154" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Rapid to Setup Payment" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="737.7736" LocationY="367.4089" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="45" Name="Surety check for Rapid" X2ID="b9b68a90-6ca0-4d13-a417-3aa390b361a0" Message="Surety check for Rapid" StageTransitionMessage="Surety check for Rapid" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Setup Payment" ToNode="Deed of Surety Instruction">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Surety_check_for_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{ &#xD;&#xA;&#x9;&#xD;&#xA; IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;(); &#x9;&#xD;&#xA; return furtherLending.CheckSuretyForReAdvanceRules((IDomainMessageCollection)messages,Readvance_Payments_Data.ApplicationKey, false);&#xD;&#xA;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Surety_check_for_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Surety_check_for_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Surety check for Rapid&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Surety_check_for_Rapid(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4152" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Surety Check for Rapid" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="476.7395" LocationY="457.4091" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="46" Name="Surety Check for FA" X2ID="51a3ad3f-877a-438b-93dd-96c351926f57" Message="Surety Check for FA" StageTransitionMessage="Surety Check for FA" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Next Step" ToNode="Deed of Surety Instruction">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Surety_Check_for_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#x9;&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;return furtherLending.CheckSuretyForReAdvanceRules((IDomainMessageCollection)messages,Readvance_Payments_Data.ApplicationKey, false);&#xD;&#xA;&#x9; &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Surety_Check_for_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Surety_Check_for_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Surety Check for FA&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Surety_Check_for_FA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4150" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Surety Check for FA" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="605.2761" LocationY="507.4089" Type="SAHL.X2Designer.Items.UserActivity" Id="47" Name="Suretyship Signed" X2ID="ac30ca20-7999-4d37-bdea-83e214752b31" Message="" StageTransitionMessage="" Description="Please confirm: Suretyship signed?" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Deed of Surety Instruction" ToNode="Next Step">
          <Access>
            <AccessCollection AccessCollectionItem="RV Admin D" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Suretyship_Signed(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Suretyship_Signed(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#x9;&#xD;&#xA;&#x9;furtherLending.SuretySignedConfirmed((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey);&#xD;&#xA;&#x9;return true;&#xD;&#xA;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Suretyship_Signed(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Suretyship_Signed(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4153" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Suretyship Signed" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1208.531" LocationY="587.4998" Type="SAHL.X2Designer.Items.UserActivity" Id="48" Name="Request Lightstone Valuation" X2ID="42fcb14c-bf6e-44a3-9e23-ad8a9b32905a" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Lightstone AVM" ToNode="Common Lightstone AVM">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Lightstone_Valuation(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Lightstone_Valuation(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;if (!common.CheckPropertyExists((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;if (!common.CheckLightStoneValuationRules((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;common.DoLightStoneValuationForWorkFlow((IDomainMessageCollection)messages, Readvance_Payments_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Request_Lightstone_Valuation(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Lightstone_Valuation(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4359" DefinitionGroupDescription="Valuation" DefinitionDescription="Request Lightstone Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="58.625" LocationY="290.4999" Type="SAHL.X2Designer.Items.UserActivity" Id="48" Name="Opt-Out SuperLo" X2ID="5ef0ab80-7226-420f-8b10-dc692ddbe007" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="SuperLoOptOut" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Opt-Out SuperLo" ToNode="Archive FL SuperLo OptOut">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //bool b = false;&#xD;&#xA; //IX2ReturnData ret = FL.SuperLoOptOutCheck(Readvance_Payments_Data.ApplicationKey, param.IgnoreWarning, out b);&#xD;&#xA; //if (!b)&#xD;&#xA; // return ret;&#xD;&#xA;  &#xD;&#xA; //return true;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#x9;&#xD;&#xA; &#x9;return furtherLending.OptOutSuperLo((IDomainMessageCollection)messages,Readvance_Payments_Data.ApplicationKey, param.ADUserName); &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4370" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Opt-Out SuperLo" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="149.875" LocationY="501.5001" Type="SAHL.X2Designer.Items.UserActivity" Id="49" Name="Cancel Opt-Out Request" X2ID="a625b522-a0c6-4ae6-adb5-d434bb4103f2" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Require SuperLo Opt-Out" ToNode="OptOut Return">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Cancel_Opt_Out_Request(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Cancel_Opt_Out_Request(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;return !furtherLending.CheckSuperLoOptOutRequiredRules((IDomainMessageCollection)messages,Readvance_Payments_Data.ApplicationKey, false);&#xD;&#xA;}" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Cancel_Opt_Out_Request(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Cancel_Opt_Out_Request(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4371" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Cancel Opt-Out Request" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="157.4401" LocationY="347.5" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="50" Name="Require Opt-Out SuperLo" X2ID="65c19471-f250-44a7-bfec-22bf3dc2917c" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Contact Client" ToNode="Require SuperLo Opt-Out">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Require_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#x9;&#xD;&#xA; // we need to call the rule in a version that doesn't add messages as this rule is reversed and returns true when messages are added&#xD;&#xA; // so the domain service command handlers will fail the activity on the basis that there are messages even if it returns true.&#xD;&#xA; return furtherLending.CheckSuperLoOptOutRequiredWithNoMessagesRules((IDomainMessageCollection)messages,Readvance_Payments_Data.ApplicationKey, false);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Require_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Supervisor D&quot;, Readvance_Payments_Data.ApplicationKey, 155, instance.ID, &quot;Require SuperLo Opt-Out&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLSupervisor);&#xD;&#xA;&#x9;workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Manager D&quot;, Readvance_Payments_Data.ApplicationKey, 174, instance.ID, &quot;Require SuperLo Opt-Out&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLManager);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Require_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Require_Opt_Out_SuperLo(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4369" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Require SuperLo Opt-Out" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="732.5521" LocationY="624.5001" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="51" Name="Further Advance Below LAA" X2ID="192076b6-0b85-48db-af91-ce0519ba5937" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Next Step" ToNode="Setup Payment">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Advance_Below_LAA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#x9;&#xD;&#xA;&#x9;return furtherLending.CheckIsFurtherAdvanceBelowLAARules((IDomainMessageCollection)messages,Readvance_Payments_Data.ApplicationKey, false); &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Advance_Below_LAA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;RV Manager D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;RV Admin D&quot;);&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, 157, instance.ID, &quot;Setup Payment&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Further_Advance_Below_LAA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Advance_Below_LAA(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4398" DefinitionGroupDescription="Readvance Payments" DefinitionDescription="Further Advance Below LAA" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="888.7891" LocationY="273.5" Type="SAHL.X2Designer.Items.UserActivity" Id="52" Name="Disbursement Incorrect" X2ID="2b0096ae-61a0-4848-8e77-4139e6be1496" Message="" StageTransitionMessage="" Description="Disbursement Incorrect" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disburse Funds" ToNode="Setup Payment">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Disbursement_Incorrect(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Disbursement_Incorrect(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Readvance_Payments_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;workflowAssignment.ReactiveUserOrRoundRobinForOSKeysByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Readvance_Payments_Data.ApplicationKey, null, instance.ID, &quot;Setup Payment&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;return true;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Disbursement_Incorrect(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Disbursement_Incorrect(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4583" DefinitionGroupDescription="Disbursement" DefinitionDescription="Disbursement Incorrect" />
          </BusinessStageTransitions>
        </Activity>
      </Activities>
      <Comments />
    </WorkFlow>
    <WorkFlow WorkFlowName="Credit" LocationX="20" LocationY="70.00001" GenericKeyTypeKey="2">
      <CustomVariables>
        <CustomVariable Name="ApplicationKey" Length="0" Type="integer" />
        <CustomVariable Name="IsResub" Length="0" Type="bool" />
        <CustomVariable Name="ActionSource" Length="255" Type="string" />
        <CustomVariable Name="PreviousState" Length="255" Type="string" />
        <CustomVariable Name="ReviewRequired" Length="0" Type="bool" />
        <CustomVariable Name="StopRecursing" Length="0" Type="bool" />
        <CustomVariable Name="EntryPath" Length="0" Type="integer" />
        <CustomVariable Name="ExceptionsDeclineWithOffer" Length="0" Type="bool" />
        <CustomVariable Name="PolicyOverride" Length="0" Type="bool" />
        <CustomVariable Name="Is2ndPass" Length="0" Type="bool" />
        <CustomVariable Name="GenericKey" Length="0" Type="integer" />
      </CustomVariables>
      <ExternalActivities>
        <ExternalActivity Name="EXTStuck" Description="" />
      </ExternalActivities>
      <CustomForms>
        <CustomForm Name="Credit_Checklist" Description="Credit_Checklist" />
        <CustomForm Name="Credit_CommonReason" Description="Credit_Common_Reason" />
        <CustomForm Name="DeclineReasonsHistory" Description="Decline Reason History" />
        <CustomForm Name="HOCFSSummary" Description="HOC Summary" />
        <CustomForm Name="Orig_ApplicationApproveRedirect" Description="Approve Application" />
        <CustomForm Name="Orig_ApplicationApproveWithPricingChangesRedirect" Description="Approve with pricing changes" />
        <CustomForm Name="Orig_ApplicationDeclineCounterRateRedirectExceptionAction" Description="Orig_ApplicationDeclineCounterRateRedirectExceptionAction" />
        <CustomForm Name="Orig_ApplicationDeclineWithOfferRedirect" Description="Decline with offer" />
        <CustomForm Name="Orig_ApplicationDeclineWithOfferRedirectExceptionAction" Description="Exceptions Decline with Offer" />
        <CustomForm Name="Orig_ApplicationSummaryForCreditRedirect" Description="Application Summary" />
        <CustomForm Name="Orig_ApplicationSummaryRedirect" Description="Application Summary" />
        <CustomForm Name="Orig_AppNTUDisplay" Description="Application Reasons" />
        <CustomForm Name="Orig_Correspondence" Description="Correspondance" />
        <CustomForm Name="WF_ApplicationSummaryForCredit" Description="Application Summary" />
        <CustomForm Name="WF_ApplicationWarnings" Description="Application Warnings" />
        <CustomForm Name="WF_AssignAllUsers" Description="Assign to All Users" />
        <CustomForm Name="WF_AssignPolicyOverride" Description="Assign Policy Override" />
        <CustomForm Name="WF_CorrespondenceHistory" Description="Correspondence History" />
        <CustomForm Name="WF_CreditDisqualify30YearTerm" Description="Disqualify 30 Year Term" />
        <CustomForm Name="WF_MemoAdd" Description="Memo" />
        <CustomForm Name="WF_MemoSummary" Description="Memo Summary" />
        <CustomForm Name="WF_ReAssign" Description="ReAssign" />
        <CustomForm Name="WF_ReAssignCreditAnalyst" Description="Reassign Analyst" />
        <CustomForm Name="WF_ReAssignCreditExceptionsManager" Description="Escalate to Exceptions Manager" />
        <CustomForm Name="WF_ReAssignCreditManager" Description="Escalate to Manager" />
        <CustomForm Name="WF_ReAssignSeniorCreditAnalyst" Description="Reassign Senior Analyst" />
        <CustomForm Name="WF_StageTransitionHist" Description="Business Stage Transitions" />
        <CustomForm Name="WF_SWD_PricingComparison" Description="Salary with Deduction Pricing Comparison" />
        <CustomForm Name="WorkflowEmploymentTypeConfirmation" Description="Application Employment Confirmation" />
        <CustomForm Name="WorkflowSubmit" Description="" />
        <CustomForm Name="WorkflowYesNo" Description="" />
      </CustomForms>
      <InvisibleAnchorNode LocationX="277" LocationY="276.2737" />
      <Clapperboard LocationX="20" LocationY="144.2726" LimitAccessTo="" Subject="" KeyVariable="ApplicationKey" />
      <States>
        <State LocationX="432.1146" LocationY="467.1823" X2ID="b14c706b-6bd4-4d31-9c73-e94495c00383" Type="SAHL.X2Designer.Items.UserState" StateName="Credit">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Credit_Data.PreviousState = &quot;&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Credit Underwriter D" />
            <WorkListCollection WorkListCollectionItem="Credit Exceptions D" />
            <WorkListCollection WorkListCollectionItem="Credit Manager D" />
            <WorkListCollection WorkListCollectionItem="Credit Supervisor D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryForCreditRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
            <CustomFormCollection FormName="Orig_AppNTUDisplay" />
            <CustomFormCollection FormName="HOCFSSummary" />
          </CustomForms>
        </State>
        <State LocationX="222.6512" LocationY="852.1782" X2ID="943f9dac-7f72-48f2-a273-3befef1d1680" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Apr&amp;Offer App" ReturnActivity="Return with Approve or Offer" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Apr&amp;Offer App state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;    public bool OnEnter_Archive_Apr_Offer_App(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Apr&amp;Offer App state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Apr_Offer_App(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Apr&amp;Offer App state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Apr_Offer_App(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="427.7867" LocationY="273.0911" X2ID="dbe69649-3862-4ae4-9b6c-4ffaff43632c" Type="SAHL.X2Designer.Items.SystemState" StateName="Assign Credit" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="    public bool OnEnter_Assign_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        // Set up some local variables and return case details &#xD;&#xA;        ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        try&#xD;&#xA;        {&#xD;&#xA;            int applicationKey = 0;&#xD;&#xA;            applicationKey = common.GetApplicationKeyFromSourceInstanceID((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#xD;&#xA;            Credit_Data.ApplicationKey = applicationKey;&#xD;&#xA;        }&#xD;&#xA;        catch (Exception)&#xD;&#xA;        {&#xD;&#xA;            Credit_Data.ApplicationKey = -1;&#xD;&#xA;        }&#xD;&#xA;        instance.Name = Credit_Data.ApplicationKey.ToString();&#xD;&#xA;&#xD;&#xA;        Credit_Data.StopRecursing = false;&#xD;&#xA;&#xD;&#xA;        Credit_Data.IsResub = common.HasInstancePerformedActivity((IDomainMessageCollection)messages, (Int64)instance.SourceInstanceID, SAHL.Common.Constants.WorkFlowActivityName.CreditResubmit);&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;        string s = common.GetCaseName((IDomainMessageCollection)messages, Credit_Data.ApplicationKey);&#xD;&#xA;        instance.Subject = s;&#xD;&#xA;&#xD;&#xA;        string assignedTo = string.Empty;&#xD;&#xA;&#xD;&#xA;        // check if this is a 2nd pass case&#xD;&#xA;        bool is2ndPass = credit.IsCreditSecondPass((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#xD;&#xA;        // do assignment based on 1st or 2nd pass&#xD;&#xA;        if (is2ndPass)&#xD;&#xA;        {&#xD;&#xA;            #region 2nd Pass&#xD;&#xA;            // set the valriable to be used in load balance query&#xD;&#xA;            Credit_Data.Is2ndPass = true;&#xD;&#xA;&#xD;&#xA;            // Need to put in the code to check if this case has the PolicyOverride flag set.&#xD;&#xA;            // if it is set then assign to the first person to have worked on this case in credit...otherwise carry on as per normal.&#xD;&#xA;            bool overrideFlagSet = workflowAssignment.IsPolicyOverride((IDomainMessageCollection)messages, instance.ID, (Int64)instance.SourceInstanceID, Credit_Data.ApplicationKey);&#xD;&#xA;            if (overrideFlagSet)&#xD;&#xA;            {&#xD;&#xA;                assignedTo = workflowAssignment.PolicyOverrideReassignToFirstUserOrRoundRobin((IDomainMessageCollection)messages, instance.ID, (Int64)instance.SourceInstanceID, Credit_Data.ApplicationKey, &quot;Assign Credit - PolicyOverride&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;                return true;&#xD;&#xA;            }&#xD;&#xA;&#xD;&#xA;            //attempt to assign the case to a user, given that the case was previously in Archive Disputes&#xD;&#xA;            assignedTo = workflowAssignment.AssignCaseThatWasPreviouslyInDisputeIndicated((IDomainMessageCollection)messages,Credit_Data.ApplicationKey, instance.ID);&#xD;&#xA;            if (!String.IsNullOrEmpty(assignedTo))&#xD;&#xA;                return true;&#xD;&#xA;&#xD;&#xA;            // &quot;Original&quot; user if still active &amp; within mandate&#xD;&#xA;            string firstAssignedUser = &quot;&quot;;&#xD;&#xA;            int firstAssignedUserORTKey = -1;&#xD;&#xA;            int firstAssignedUserOSKey = -1;&#xD;&#xA;            workflowAssignment.GetFirstAssignedCreditUser((IDomainMessageCollection)messages, (long)instance.SourceInstanceID, out firstAssignedUser, out firstAssignedUserORTKey, out firstAssignedUserOSKey);&#xD;&#xA;            if (!String.IsNullOrEmpty(firstAssignedUser))&#xD;&#xA;            {&#xD;&#xA;                bool userStillActive = workflowAssignment.IsUserActiveByADUserName((IDomainMessageCollection)messages,firstAssignedUser);&#xD;&#xA;                if (userStillActive)&#xD;&#xA;                {&#xD;&#xA;                    bool userExistsInMandate = common.CheckUserInMandate((IDomainMessageCollection)messages,Credit_Data.ApplicationKey, firstAssignedUser, &quot;Credit&quot;);&#xD;&#xA;                    if (userExistsInMandate)&#xD;&#xA;                    {&#xD;&#xA;                        workflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, firstAssignedUser, firstAssignedUserOSKey, firstAssignedUserORTKey, &quot;Assign Credit - Origional User&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;                        return true;&#xD;&#xA;                    }&#xD;&#xA;                }&#xD;&#xA;            }&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;            // Last most senior&#xD;&#xA;            assignedTo = workflowAssignment.ReassignToMostSenPersonWhoWorkedOnThisCaseInCredit((IDomainMessageCollection)messages, instance.ID, (long)instance.SourceInstanceID, Credit_Data.ApplicationKey, &quot;Assign Credit - Reassign Most Senior&quot;);&#xD;&#xA;&#xD;&#xA;            // Load Balance or Mandate&#xD;&#xA;            if (string.IsNullOrEmpty(assignedTo))&#xD;&#xA;            {&#xD;&#xA;                List&lt;String&gt; Users = new List&lt;String&gt;();&#xD;&#xA;                string PrevJUW = string.Empty;&#xD;&#xA;                string PrevSUW = string.Empty;&#xD;&#xA;                // look for Credit Underwriter D &#xD;&#xA;                PrevJUW = workflowAssignment.GetUserWhoWorkedOnThisLEsOtherCasesForDynamicRole((IDomainMessageCollection)messages, (int)SAHL.Common.Globals.OfferRoleTypes.CreditUnderwriterD, Credit_Data.ApplicationKey, instance.ID);&#xD;&#xA;                // look for Credit Supervisor D &#xD;&#xA;                PrevSUW = workflowAssignment.GetUserWhoWorkedOnThisLEsOtherCasesForDynamicRole((IDomainMessageCollection)messages, (int)SAHL.Common.Globals.OfferRoleTypes.CreditSupervisorD, Credit_Data.ApplicationKey, instance.ID);&#xD;&#xA;                if (!string.IsNullOrEmpty(PrevJUW))&#xD;&#xA;                    workflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, PrevJUW, (int)SAHL.Common.Globals.OrganisationStructure.CreditAdmin, (int)SAHL.Common.Globals.OfferRoleTypes.CreditUnderwriterD, &quot;Assign Credit - Junior&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;                else if (!string.IsNullOrEmpty(PrevSUW))&#xD;&#xA;                    workflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, PrevSUW, (int)SAHL.Common.Globals.OrganisationStructure.CreditSupervisor, (int)SAHL.Common.Globals.OfferRoleTypes.CreditSupervisorD, &quot;Assign Credit - Senior&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;                else&#xD;&#xA;                {&#xD;&#xA;                    // load balance mandate users&#xD;&#xA;                    List&lt;string&gt; loadBalanceStates = new List&lt;string&gt;();&#xD;&#xA;                    loadBalanceStates.Add(&quot;Credit&quot;);&#xD;&#xA;                    loadBalanceStates.Add(&quot;Valuation Approval Required&quot;);&#xD;&#xA;                    bool loadBalanceIncludeStates = true; // include the above states in load balance&#xD;&#xA;                    // only load balance 2nd pass cases&#xD;&#xA;                    bool loadBalance1stPass = false;&#xD;&#xA;                    bool loadBalance2ndPass = true;&#xD;&#xA;                    credit.PerformCreditMandateCheck((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, instance.ID, loadBalanceStates, loadBalanceIncludeStates, loadBalance1stPass, loadBalance2ndPass);&#xD;&#xA;                }&#xD;&#xA;            }&#xD;&#xA;&#xD;&#xA;            #endregion&#xD;&#xA;        }&#xD;&#xA;        else&#xD;&#xA;        {&#xD;&#xA;            #region 1st Pass&#xD;&#xA;            // set the valriable to be used in load balance query&#xD;&#xA;            Credit_Data.Is2ndPass = false;&#xD;&#xA;&#xD;&#xA;            string PrevJUW = string.Empty;&#xD;&#xA;            string PrevSUW = string.Empty;&#xD;&#xA;            // look for Credit Underwriter D &#xD;&#xA;            PrevJUW = workflowAssignment.GetUserWhoWorkedOnThisLEsOtherCasesForDynamicRole((IDomainMessageCollection)messages, (int)SAHL.Common.Globals.OfferRoleTypes.CreditUnderwriterD, Credit_Data.ApplicationKey, instance.ID);&#xD;&#xA;            // look for Credit Supervisor D &#xD;&#xA;            PrevSUW = workflowAssignment.GetUserWhoWorkedOnThisLEsOtherCasesForDynamicRole((IDomainMessageCollection)messages, (int)SAHL.Common.Globals.OfferRoleTypes.CreditSupervisorD, Credit_Data.ApplicationKey, instance.ID);&#xD;&#xA;            if (!string.IsNullOrEmpty(PrevJUW))&#xD;&#xA;                workflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, PrevJUW, (int)SAHL.Common.Globals.OrganisationStructure.CreditAdmin, (int)SAHL.Common.Globals.OfferRoleTypes.CreditUnderwriterD, &quot;Assign Credit - Junior&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;            else if (!string.IsNullOrEmpty(PrevSUW))&#xD;&#xA;                workflowAssignment.ReassignCaseToUserByProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, PrevSUW, (int)SAHL.Common.Globals.OrganisationStructure.CreditSupervisor, (int)SAHL.Common.Globals.OfferRoleTypes.CreditSupervisorD, &quot;Assign Credit - Senior&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;            else&#xD;&#xA;            {&#xD;&#xA;                // load balance mandate users&#xD;&#xA;                List&lt;string&gt; loadBalanceStates = new List&lt;string&gt;();&#xD;&#xA;                loadBalanceStates.Add(&quot;Credit&quot;);&#xD;&#xA;                loadBalanceStates.Add(&quot;Valuation Approval Required&quot;);&#xD;&#xA;                // include the above states in load balance&#xD;&#xA;                bool loadBalanceIncludeStates = true; // include the above states in load balance&#xD;&#xA;                // only load balance 1st pass cases&#xD;&#xA;                bool loadBalance1stPass = true;&#xD;&#xA;                bool loadBalance2ndPass = false;&#xD;&#xA;                credit.PerformCreditMandateCheck((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, instance.ID, loadBalanceStates, loadBalanceIncludeStates, loadBalance1stPass, loadBalance2ndPass);&#xD;&#xA;            }&#xD;&#xA;&#xD;&#xA;            #endregion&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Assign Credit state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Assign_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Credit_Data.ExceptionsDeclineWithOffer = false;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1241.539" LocationY="544.9995" X2ID="18101a18-090d-47d6-a4ba-a65571a90618" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Credit Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Credit Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Credit_Decline(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Credit Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Credit_Decline(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="1254.271" LocationY="668.9984" X2ID="53d2efe4-1cdd-4c71-9af7-f7ca2aae7020" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Request Info">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Request Info state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Request_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Request Info state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Request_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="1257.719" LocationY="441.9966" X2ID="dfb23e31-34b1-472a-965d-9caf26d150b3" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Dispute">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Dispute state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Dispute(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Dispute state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Dispute(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="909.7139" LocationY="188.5446" X2ID="4fdec325-65a7-4b04-b9d8-e173e6a23c9a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Decline Offer">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline Offer state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Decline_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline Offer state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Decline_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
          </AppliesTo>
        </State>
        <State LocationX="1083.114" LocationY="865.5432" X2ID="2553b082-7597-439c-8cc4-aacebe9c4302" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Declined by Credit" ReturnActivity="Credit Decline Application" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Declined by Credit state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;&#xD;&#xA;    public bool OnEnter_Archive_Declined_by_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;&#xD;&#xA;        if (Credit_Data.IsResub)&#xD;&#xA;            credit.SendResubMail((IDomainMessageCollection)messages,Credit_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Declined by Credit state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Declined_by_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Declined by Credit state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Declined_by_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="981.151" LocationY="865.5438" X2ID="0298943c-ac48-47ae-b380-1dabe7b1246f" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Further Info" ReturnActivity="Credit Further Info" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Further Info state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;    public bool OnEnter_Archive_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Further Info state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Further Info state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="885.8718" LocationY="865.5432" X2ID="1ffa5092-bf0a-4a16-8bce-e94ad0b9e16f" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Disputes" ReturnActivity="Credit Dispute" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Disputes state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;&#xD;&#xA;    public bool OnEnter_Archive_Disputes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Disputes state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Disputes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Disputes state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Disputes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="407.1617" LocationY="668.5443" X2ID="93b0bad0-29d6-4aa8-b010-7e53b6ded871" Type="SAHL.X2Designer.Items.SystemState" StateName="Credit Decision Check" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit Decision Check state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Credit_Decision_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit Decision Check state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Credit_Decision_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="929.4348" LocationY="468.545" X2ID="557ed5e2-d344-411b-8c94-aa8e1499e113" Type="SAHL.X2Designer.Items.UserState" StateName="Review Decision">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Review Decision state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Review_Decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Review Decision state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Review_Decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Credit_Data.PreviousState = &quot;Review Decision&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Credit Exceptions D" />
            <WorkListCollection WorkListCollectionItem="Credit Manager D" />
            <WorkListCollection WorkListCollectionItem="Credit Supervisor D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
            <CustomFormCollection FormName="DeclineReasonsHistory" />
            <CustomFormCollection FormName="Orig_AppNTUDisplay" />
          </CustomForms>
        </State>
        <State LocationX="934.8328" LocationY="668.5438" X2ID="c08950c4-496a-4bde-a7aa-cfcaf43b9cf5" Type="SAHL.X2Designer.Items.SystemState" StateName="Review Check" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Review Check state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Review_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Review Check state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Review_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;if (Credit_Data.ActionSource != &quot;Decline with Offer&quot; &amp;&amp; Credit_Data.ActionSource != &quot;Approve with Pricing Changes&quot;)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;&#x9;&#x9;credit.SendCreditDecisionMail((IDomainMessageCollection)messages, instance.ID,Credit_Data.ActionSource, Credit_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="727.5366" LocationY="1012.909" X2ID="e5f45d64-acbf-44ef-8673-49c00f8fbdce" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Return to Processor">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Return to Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Return_to_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Return to Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Return_to_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="1240.646" LocationY="948.9077" X2ID="50016baa-2630-4676-b595-d713f45d1e7b" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Processor" ReturnActivity="Return Processor Credit" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;    public bool OnEnter_Archive_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="764.0958" LocationY="866.4077" X2ID="570b7060-ecb6-42ba-a60e-5bf20fb57ac2" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Resubmission" ReturnActivity="Credit Return Resubmission" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Resubmission state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;    public bool OnEnter_Archive_Resubmission(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Resubmission state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Resubmission(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Resubmission state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Resubmission(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="432.3855" LocationY="852.4077" X2ID="04b5f457-f41c-4dd8-852b-918ca721b5ff" Type="SAHL.X2Designer.Items.SystemState" StateName="App Check" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the App Check state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_App_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the App Check state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_App_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="587.9557" LocationY="852.4077" X2ID="d7f0c37b-b792-4813-8108-58c30c7c62d4" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Approve Resub" ReturnActivity="Credit Return Resub Approve" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Approve Resub state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;    public bool OnEnter_Archive_Approve_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Approve Resub state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Approve_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Approve Resub state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Approve_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1154.552" LocationY="280.2493" X2ID="3e2eee59-ee10-463f-b7f4-b1f524265079" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Pricing Changes">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Pricing Changes state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Pricing Changes state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
          </AppliesTo>
        </State>
        <State LocationX="936.8928" LocationY="338.4977" X2ID="42fc679f-f585-4cc8-b76b-21979214b53d" Type="SAHL.X2Designer.Items.SystemState" StateName="Review" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Review state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Review(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Review state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Review(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1022.244" LocationY="1013.192" X2ID="160d57a7-0829-4735-a498-eb4169528bfa" Type="SAHL.X2Designer.Items.SystemState" StateName="ResubCheck" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ResubCheck state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_ResubCheck(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ResubCheck state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_ResubCheck(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1224.321" LocationY="1013.498" X2ID="60a04f89-bef5-48c6-b6ce-586d4537a386" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Resub Processor" ReturnActivity="Credit Return Resubmission" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Resub Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;    public bool OnEnter_Archive_Resub_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Resub Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Resub_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Resub Processor state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Resub_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1248.888" LocationY="106.4977" X2ID="4aad5777-c37f-45fb-a884-32af2f34cd45" Type="SAHL.X2Designer.Items.CommonState" StateName="Common OnStuck">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_OnStuck(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_OnStuck(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Assign Credit" />
            <AppliesToCollection AppliesToCollectionItem="Credit Decision Check" />
            <AppliesToCollection AppliesToCollectionItem="Review Check" />
            <AppliesToCollection AppliesToCollectionItem="App Check" />
            <AppliesToCollection AppliesToCollectionItem="Review" />
            <AppliesToCollection AppliesToCollectionItem="ResubCheck" />
          </AppliesTo>
        </State>
        <State LocationX="684.2058" LocationY="258.2488" X2ID="d81094a9-8c53-43ee-b48d-5a165c573225" Type="SAHL.X2Designer.Items.UserState" StateName="Policy Override">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Policy_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Policy_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Credit_Data.PolicyOverride = true;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Credit Underwriter D" />
            <WorkListCollection WorkListCollectionItem="Credit Exceptions D" />
            <WorkListCollection WorkListCollectionItem="Credit Manager D" />
            <WorkListCollection WorkListCollectionItem="Credit Supervisor D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_MemoSummary" />
            <CustomFormCollection FormName="WF_MemoAdd" />
          </CustomForms>
        </State>
        <State LocationX="1440.953" LocationY="369.2484" X2ID="62da241f-b60d-462c-bd25-e37380b9b259" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Lightstone AVM">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Lightstone_AVM(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Lightstone_AVM(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Review Decision" />
            <AppliesToCollection AppliesToCollectionItem="Policy Override" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="260.6302" LocationY="390.4341" X2ID="ba871ee4-62df-4fd7-8238-7108a7dd76f3" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Reassign Analyst">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Reassign_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Reassign_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="479.8802" LocationY="408.4341" X2ID="186a0bac-bcb1-413a-9601-3580ce007030" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Escalate to Mgr">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Escalate_to_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Escalate_to_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="254.138" LocationY="462.4341" X2ID="44363be1-374b-4b86-a45f-cf4b47ff0939" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Refer Snr Analyst">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Refer_Snr_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Refer_Snr_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="466.3489" LocationY="495.4341" X2ID="d1465727-b6d4-47dd-b543-57ef18e28ea8" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Escalate To Excpt Mgr">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Escalate_To_Excpt_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Escalate_To_Excpt_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="542.9948" LocationY="160.4344" X2ID="b909e736-d04c-41a8-a24d-7cc1408d2313" Type="SAHL.X2Designer.Items.UserState" StateName="Valuation Approval Required">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Valuation_Approval_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Valuation_Approval_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Credit Underwriter D" />
            <WorkListCollection WorkListCollectionItem="Credit Exceptions D" />
            <WorkListCollection WorkListCollectionItem="Credit Manager D" />
            <WorkListCollection WorkListCollectionItem="Credit Supervisor D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
            <CustomFormCollection FormName="Orig_AppNTUDisplay" />
            <CustomFormCollection FormName="HOCFSSummary" />
          </CustomForms>
        </State>
        <State LocationX="801.8542" LocationY="160.4344" X2ID="5d4f8e97-964a-4dcb-ade1-951b38217bb3" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Valuation Approval" ReturnActivity="Return Credit Pre-Approved" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="    public bool OnEnter_Archive_Valuation_Approval(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;        DYs.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Supervisor D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Manager D&quot;);&#xD;&#xA;        DYs.Add(&quot;Credit Exceptions D&quot;);&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Archive_Valuation_Approval(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="public bool OnReturn_Archive_Valuation_Approval(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1086.073" LocationY="209.2514" X2ID="4a7d9197-cdd6-4eae-b8d1-cad7aea44d5a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Application Employment Type Confirmation">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Application_Employment_Type_Confirmation(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Application_Employment_Type_Confirmation(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Review Decision" />
            <AppliesToCollection AppliesToCollectionItem="Policy Override" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="216.7031" LocationY="192.5002" X2ID="6d734dde-b468-42fe-bc67-68b00a26d3ab" Type="SAHL.X2Designer.Items.SystemState" StateName="Credit Create" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Credit_Create(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Credit_Create(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1403.828" LocationY="227.5003" X2ID="45a9b363-71ea-4636-a6ab-bef68cc0891f" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Disqualify 30 yr term">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Disqualify_30_yr_term(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Disqualify_30_yr_term(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Review Decision" />
          </AppliesTo>
        </State>
        <State LocationX="1374.258" LocationY="470.4996" X2ID="edd396cf-4f46-4be3-89fc-3256e38dd215" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Confirm Affordability">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Confirm_Affordability(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Confirm_Affordability(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Review Decision" />
            <AppliesToCollection AppliesToCollectionItem="Policy Override" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Approval Required" />
          </AppliesTo>
        </State>
        <State LocationX="1481.908" LocationY="659.5001" X2ID="8f9bab2c-03c5-47be-880a-9f02b52e3937" Type="SAHL.X2Designer.Items.CommonState" StateName="Common SWD Pricing Comparison">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
          </AppliesTo>
        </State>
        <State LocationX="1349.542" LocationY="717.5001" X2ID="ccfef032-136d-4099-bcb9-fb6e54aff205" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Disqualify for GEPF">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Disqualify_for_GEPF(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Disqualify_for_GEPF(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
          </AppliesTo>
        </State>
      </States>
      <Activities>
        <Activity LocationX="105.7709" LocationY="477.933" Type="SAHL.X2Designer.Items.UserActivity" Id="1" Name="Refer Senior Analyst" X2ID="9a3377ee-de6e-4eae-9945-a49e0a1c235b" Message="Refer to Senior Analyst" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="0" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssignSeniorCreditAnalyst" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Refer Snr Analyst" ToNode="Common Refer Snr Analyst">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Refer_Senior_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Refer_Senior_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Refer Senior Analyst.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Refer_Senior_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Refer_Senior_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2096" DefinitionGroupDescription="Needs Approval" DefinitionDescription="Refer Supervisor" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="595.6615" LocationY="322.9341" Type="SAHL.X2Designer.Items.UserActivity" Id="3" Name="Escalate to Mgr " X2ID="3b84c1e8-27e0-43b8-bbd8-dd35cd403f42" Message="Escalate to Manager" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="0" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssignCreditManager" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Escalate to Mgr" ToNode="Common Escalate to Mgr">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Escalate_to_Mgr_(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Escalate_to_Mgr_(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Escalate to Mgr .&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Escalate_to_Mgr_(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Escalate_to_Mgr_(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2100" DefinitionGroupDescription="Needs Approval" DefinitionDescription="Escalate to Mgr " />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="412.1489" LocationY="573.1823" Type="SAHL.X2Designer.Items.UserActivity" Id="4" Name="Approve Application" X2ID="80db4d88-6eca-4df9-a426-b2f7f9b548f0" Message="Approve Application" StageTransitionMessage="Approve Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ApplicationApproveRedirect" LinkedActivity="" UseLinkedActivity="False" FromNode="Credit" ToNode="Credit Decision Check">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Approve_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#x9;&#xD;&#xA;&#x9;ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;    bool employmentTypeConfirmed = credit.CheckEmploymentTypeConfirmedRule((IDomainMessageCollection)messages, instance.ID, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!employmentTypeConfirmed)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="    public bool OnCompleteActivity_Approve_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;    {&#xD;&#xA;&#x9;&#x9;Credit_Data.ActionSource = &quot;Approve Application&quot;;&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        return credit.CheckCreditApprovalRules((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Approve Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Approve_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Approve Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Approve_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2051" DefinitionGroupDescription="Approve Application" DefinitionDescription="Approve Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="116.4119" LocationY="355.933" Type="SAHL.X2Designer.Items.UserActivity" Id="6" Name="Reassign Analyst" X2ID="493f079b-3b84-4338-9c42-b29ed28dfeab" Message="Reassign Analyst" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="0" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssignCreditAnalyst" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Reassign Analyst" ToNode="Common Reassign Analyst">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reassign_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reassign_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reassign Analyst.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reassign_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reassign_Analyst(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2094" DefinitionGroupDescription="Needs Approval" DefinitionDescription="Reassign Underwriter" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="415.37" LocationY="364.0909" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="9" Name="Assign Underwriter" X2ID="b550c56b-2cf1-4fac-b97d-c09b388e318c" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Assign Credit" ToNode="Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Assign_Underwriter(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Assign_Underwriter(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Assign Underwriter.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Assign_Underwriter(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Assign_Underwriter(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2097" DefinitionGroupDescription="Needs Approval" DefinitionDescription="Assign Underwriter" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1104.549" LocationY="549.9995" Type="SAHL.X2Designer.Items.UserActivity" Id="9" Name="Decline Application" X2ID="2a5d802b-5695-4f60-a0c5-a2cf4a907fc7" Message="Decline Application" StageTransitionMessage="Decline Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Credit_CommonReason" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Credit Decline" ToNode="Review Check">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;    bool employmentTypeConfirmed = credit.CheckEmploymentTypeConfirmedRule((IDomainMessageCollection)messages, instance.ID, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!employmentTypeConfirmed)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Credit_Data.ActionSource = &quot;Decline Application&quot;;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline_Application(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2061" DefinitionGroupDescription="Decline Application" DefinitionDescription="Decline Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1099.216" LocationY="673.999" Type="SAHL.X2Designer.Items.UserActivity" Id="10" Name="Request Further Info" X2ID="a967fc3b-69ee-473b-9a83-fb8419abead0" Message="Request Further Info" StageTransitionMessage="Request Further Info [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_MemoAdd" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Request Info" ToNode="Review Check">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Credit_Data.ActionSource = &quot;Request Further Info&quot;;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Request Further Info.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Request_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Request Further Info&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1812" DefinitionGroupDescription="Credit" DefinitionDescription="Request Further Info" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1119.177" LocationY="446.9977" Type="SAHL.X2Designer.Items.UserActivity" Id="14" Name="Dispute Indicated" X2ID="49aee02e-9a76-4d8d-bdd1-3803ff8be64e" Message="Review required due to dispute indicated." StageTransitionMessage="Review required due to dispute indicated. [CodeChanged]" Description="" Priority="0" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_MemoAdd" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Dispute" ToNode="Review">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Dispute_Indicated(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Dispute_Indicated(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Credit_Data.ActionSource = &quot;Dispute Indicated&quot;;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Dispute Indicated.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Dispute_Indicated(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Review required due to dispute indicated.&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Dispute_Indicated(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2146" DefinitionGroupDescription="Return to Manage Application" DefinitionDescription="Dispute Indicated" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="64.4584" LocationY="195.6353" Type="SAHL.X2Designer.Items.ExternalActivity" Id="16" Name="Move from Origination" X2ID="0246f5c0-142a-4a53-86a7-5d610019d70f" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="" InvokedBy="" FromNode="ClapperBoard" ToNode="Credit Create">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Move_from_Origination(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Move_from_Origination(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Credit_Data.EntryPath = 2;&#xD;&#xA; return true;&#xD;&#xA;// try&#xD;&#xA;// {&#xD;&#xA;//  int Key = 0;&#xD;&#xA;//  BaseHelper.GetApplicatioIDFromSourceInstanceID(param.Tran, instance.ID, out Key);&#xD;&#xA;//  Credit_Data.ApplicationKey = Key;&#xD;&#xA;// }&#xD;&#xA;// catch(Exception)&#xD;&#xA;// {&#xD;&#xA;//  Credit_Data.ApplicationKey = -1;&#xD;&#xA;// }&#xD;&#xA;// instance.Name = Credit_Data.ApplicationKey.ToString();&#xD;&#xA;// Credit_Data.StopRecursing = false;&#xD;&#xA;// &#xD;&#xA;// IX2ReturnData ret = BaseHelper.RecalculateHouseHoldIncomeAndSave(param.Tran, Credit_Data.ApplicationKey);&#xD;&#xA;// return ret;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Move_from_Origination(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="920.3337" LocationY="265.2963" Type="SAHL.X2Designer.Items.UserActivity" Id="16" Name="Decline with Offer" X2ID="c93449b9-dbe2-4ffa-9dec-31ee29cb0eae" Message="Decline with Offer" StageTransitionMessage="Decline with Offer [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ApplicationDeclineWithOfferRedirect" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Decline Offer" ToNode="Review">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;    bool employmentTypeConfirmed = credit.CheckEmploymentTypeConfirmedRule((IDomainMessageCollection)messages, instance.ID, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!employmentTypeConfirmed)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="    public bool OnCompleteActivity_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;    {&#xD;&#xA;&#x9;&#x9;Credit_Data.ActionSource = &quot;Decline with Offer&quot;;&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        return credit.CheckCreditApprovalRules((IDomainMessageCollection)messages,Credit_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline with Offer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline with Offer&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2050" DefinitionGroupDescription="Approve Application" DefinitionDescription="Decline with Offer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="425.0627" LocationY="760.5438" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="21" Name="Check Passed" X2ID="03cd4207-1756-4fc0-9016-5cf142ab7ee7" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit Decision Check" ToNode="App Check">
          <CodeSections>
            <CodeSection Name="OnStart" Code="    public bool OnStartActivity_Check_Passed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;        credit.UpdateConditions((IDomainMessageCollection)messages, Credit_Data.ApplicationKey);&#xD;&#xA;        common.UpdateOfferStatus((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Open, (int)SAHL.Common.Globals.OfferInformationTypes.AcceptedOffer);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;credit.SendCreditDecisionMail((IDomainMessageCollection)messages, instance.ID,Credit_Data.ActionSource, Credit_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Check_Passed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Check Passed.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Check_Passed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Check_Passed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2053" DefinitionGroupDescription="Approve Application" DefinitionDescription="Check Passed" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="346.2631" LocationY="586.5443" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="22" Name="Check Failed" X2ID="0fe71f7e-2344-4804-ae29-d2e3269204f2" Message="Additional Signature Required" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit Decision Check" ToNode="Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="    public bool OnStartActivity_Check_Failed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        if (!Credit_Data.ExceptionsDeclineWithOffer)&#xD;&#xA;        {&#xD;&#xA;            return credit.DoesNotMeetCreditSignatureRequirements((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, instance.ID);&#xD;&#xA;        }&#xD;&#xA;        return false;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Check_Failed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Check Failed.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Check_Failed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Check_Failed(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2004" DefinitionGroupDescription="Credit" DefinitionDescription="Check Failed" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="922.1748" LocationY="554.5443" Type="SAHL.X2Designer.Items.UserActivity" Id="17" Name="Agree with decision" X2ID="f87a6d55-e2fc-4ba3-9135-e225f37b69e5" Message="Agree with decision" StageTransitionMessage="Agree with decision [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Review Decision" ToNode="Review Check">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Agree_with_decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Agree_with_decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Agree with decision.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Agree_with_decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Agree with decision&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Agree_with_decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1804" DefinitionGroupDescription="Credit" DefinitionDescription="Agree with decision" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1107.846" LocationY="779.2943" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="18" Name="Declined by Credit" X2ID="8fa2513a-853a-42b1-a3df-c20a17512e16" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review Check" ToNode="Archive Declined by Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Declined_by_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Credit_Data.ActionSource == &quot;Decline Application&quot;)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;  return true;&#xD;&#xA;&#x9;}&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Declined_by_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.RemoveApplicationAttribute((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.CreditDisqualified30YearTerm);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Declined by Credit.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Declined_by_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Declined_by_Credit(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2060" DefinitionGroupDescription="Decline Application" DefinitionDescription="Declined by Credit" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="999.8831" LocationY="777.5432" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="19" Name="Further Info" X2ID="96cfaa92-cf94-465c-afb4-33e55a24ad52" Message="" StageTransitionMessage="" Description="" Priority="5" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review Check" ToNode="Archive Further Info">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Credit_Data.ActionSource == &quot;Request Further Info&quot;)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Further Info.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Info(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2145" DefinitionGroupDescription="Return to Manage Application" DefinitionDescription="Further Info" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="903.3848" LocationY="780.5432" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="20" Name="Dispute" X2ID="b940c776-e727-405e-bdcf-ceba1f9409ba" Message="" StageTransitionMessage="" Description="" Priority="6" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review Check" ToNode="Archive Disputes">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Dispute(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Credit_Data.ActionSource == &quot;Dispute Indicated&quot;)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Dispute(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Dispute.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Dispute(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Dispute(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2144" DefinitionGroupDescription="Return to Manage Application" DefinitionDescription="Dispute" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="721.7339" LocationY="613.2949" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="21" Name="Decline + Offer" X2ID="d995c9bf-aed3-4bbe-be61-00f1d5a52764" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review Check" ToNode="Credit Decision Check">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline___Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Credit_Data.ActionSource == &quot;Decline with Offer&quot;)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline___Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline + Offer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline___Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline___Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2052" DefinitionGroupDescription="Approve Application" DefinitionDescription="Decline + Offer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="704.9709" LocationY="472.4543" Type="SAHL.X2Designer.Items.UserActivity" Id="22" Name="Override Decision" X2ID="18d6967f-eaa9-4c68-9f99-317944500658" Message="Override Decision" StageTransitionMessage="Override Decision [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Review Decision" ToNode="Credit">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Override_Decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Override_Decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Credit_Data.StopRecursing = false;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Override Decision.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Override_Decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Override Decision&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Override_Decision(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1806" DefinitionGroupDescription="Credit" DefinitionDescription="Override Decision" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1047.946" LocationY="504.4536" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="23" Name="Review not Required" X2ID="bef98fe2-aa4d-4a72-9ae0-2957abe4c1dd" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review" ToNode="Review Check">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Review_not_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return !Credit_Data.ReviewRequired;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Review_not_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Review not Required.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Review_not_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Review_not_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1803" DefinitionGroupDescription="Credit" DefinitionDescription="Review not Required" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="885.0889" LocationY="1017.909" Type="SAHL.X2Designer.Items.UserActivity" Id="24" Name="Return to Processor" X2ID="a7426558-fa5b-4cd1-ae0d-6c82e908ca33" Message="Return to Processor from Credit" StageTransitionMessage="Return to Processor from Credit [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Return to Processor" ToNode="ResubCheck">
          <Access>
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_to_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_to_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Return to Processor.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Return_to_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Return to Processor from Credit&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_to_Processor(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2147" DefinitionGroupDescription="Return to Manage Application" DefinitionDescription="Return to Processor" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="782.8276" LocationY="779.4077" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="27" Name="Resubmission" X2ID="f1257443-80c8-4384-80f8-f7e3bbef28c2" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review Check" ToNode="Archive Resubmission">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Resubmission(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Credit_Data.IsResub)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Resubmission(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Resubmission.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Resubmission(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Resubmission(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2143" DefinitionGroupDescription="Resubmission Credit" DefinitionDescription="Resubmission" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="361.2526" LocationY="857.4077" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="28" Name="Not Resub" X2ID="a5e3eb1e-9ba6-4afe-ad3f-1d6ac76b0015" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="App Check" ToNode="Archive Apr&amp;Offer App">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Not_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return !Credit_Data.IsResub;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Not_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Not Resub.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Not_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Not_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1808" DefinitionGroupDescription="Credit" DefinitionDescription="Not Resub" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="521.8857" LocationY="857.4077" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="29" Name="Resub" X2ID="b6a7208c-aae2-44e4-bb21-46c8a2a663bc" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="App Check" ToNode="Archive Approve Resub">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return Credit_Data.IsResub;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Resub.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Resub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1813" DefinitionGroupDescription="Credit" DefinitionDescription="Resub" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1055.891" LocationY="343.4977" Type="SAHL.X2Designer.Items.UserActivity" Id="35" Name="Approve with Pricing Changes" X2ID="540da1e7-703c-4eee-929c-13b5c260aaa9" Message="Approve with Pricing Changes" StageTransitionMessage="Approve with Pricing Changes [CodeChanged]" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ApplicationApproveWithPricingChangesRedirect" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Pricing Changes" ToNode="Review">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Approve_with_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;    bool employmentTypeConfirmed = credit.CheckEmploymentTypeConfirmedRule((IDomainMessageCollection)messages, instance.ID, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!employmentTypeConfirmed)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="    public bool OnCompleteActivity_Approve_with_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;    {&#xD;&#xA;&#x9;&#x9;Credit_Data.ActionSource = &quot;Approve with Pricing Changes&quot;;&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        return credit.CheckCreditApprovalRules((IDomainMessageCollection)messages,Credit_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Approve with Pricing Changes.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Approve_with_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Approve with Pricing Changes&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Approve_with_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2054" DefinitionGroupDescription="Approve Application" DefinitionDescription="Approve with Pricing Changes" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="719.1042" LocationY="672.4968" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="36" Name="Pricing Changes" X2ID="51679013-c2e1-42fa-86b4-055b09d10bb6" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review Check" ToNode="Credit Decision Check">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Credit_Data.ActionSource == &quot;Approve with Pricing Changes&quot;)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Pricing Changes.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Pricing_Changes(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1811" DefinitionGroupDescription="Credit" DefinitionDescription="Pricing Changes" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="595.6277" LocationY="570.2495" Type="SAHL.X2Designer.Items.UserActivity" Id="38" Name="Escalate To Exceptions Mgr" X2ID="212c2bfb-3912-4802-ad12-1ec3ee5dbeb4" Message="Escalate to Exceptions Manager" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="0" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssignCreditExceptionsManager" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Escalate To Excpt Mgr" ToNode="Common Escalate To Excpt Mgr">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Escalate_To_Exceptions_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Escalate_To_Exceptions_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Escalate To Exceptions Mgr.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Escalate_To_Exceptions_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Escalate_To_Exceptions_Mgr(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2099" DefinitionGroupDescription="Needs Approval" DefinitionDescription="Escalate To Exceptions Mgr" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="787.719" LocationY="330.907" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="40" Name="Sys Sig Check" X2ID="8c02d96f-45b6-46b1-8117-c04533ede52f" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review" ToNode="Review">
          <CodeSections>
            <CodeSection Name="OnStart" Code="    public bool OnStartActivity_Sys_Sig_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        if (!Credit_Data.StopRecursing)&#xD;&#xA;        {&#xD;&#xA;&#xD;&#xA;            ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;            IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;            Credit_Data.ReviewRequired = credit.IsReviewRequired((IDomainMessageCollection)messages, instance.ID, Credit_Data.ActionSource);&#xD;&#xA;            Console.WriteLine(&quot;SYS Sig Check: {0}&quot;, Credit_Data.ReviewRequired);&#xD;&#xA;            if (Credit_Data.ReviewRequired)&#xD;&#xA;            {&#xD;&#xA;                // deactivate cuuser roles&#xD;&#xA;                List&lt;string&gt; DynamicRoles = new List&lt;string&gt;();&#xD;&#xA;                DynamicRoles.Add(&quot;Credit Underwriter D&quot;);&#xD;&#xA;                workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Credit_Data.ApplicationKey, DynamicRoles, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;                // assign to supervisor&#xD;&#xA;                workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;Credit Supervisor D&quot;, Credit_Data.ApplicationKey, 1008, instance.ID, &quot;Review&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.CreditSupervisor);&#xD;&#xA;                //Credit.RoundRobinAssignForGivenOrgStructure(param.Tran, out AssignedUser, &quot;Credit Supervisor D&quot;, Credit_Data.ApplicationKey, 1008);&#xD;&#xA;            }&#xD;&#xA;            Credit_Data.StopRecursing = true;&#xD;&#xA;            return true;&#xD;&#xA;        }&#xD;&#xA;        return false;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Sys_Sig_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Sys_Sig_Check(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="923.2838" LocationY="415.4977" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="37" Name="Review Required" X2ID="aaf7302e-201a-4b70-a119-47f6ef203189" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Review" ToNode="Review Decision">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Review_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Review_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Review_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="359.3932" LocationY="363.4977" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="38" Name="IsResub" X2ID="7a2b7c2e-4b53-48e0-9e20-d9b83d4a6690" Message="Resubmission Case" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Assign Credit" ToNode="Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_IsResub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Credit_Data.IsResub)&#xD;&#xA;  return true;&#xD;&#xA; else&#xD;&#xA;  return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_IsResub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_IsResub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_IsResub(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3776" DefinitionGroupDescription="Needs Approval" DefinitionDescription="IsResub" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1134.321" LocationY="1017.498" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="39" Name="IsResubReturn" X2ID="3b9d19c1-03eb-4540-a75a-03460f8eb62e" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="ResubCheck" ToNode="Archive Resub Processor">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_IsResubReturn(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return Credit_Data.IsResub;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_IsResubReturn(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_IsResubReturn(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1135.021" LocationY="953.4968" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="40" Name="IsNotResubReturn" X2ID="b754a70d-d12b-4e85-8223-b89b02911f66" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="ResubCheck" ToNode="Archive Processor">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_IsNotResubReturn(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_IsNotResubReturn(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_IsNotResubReturn(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1372.393" LocationY="101.4978" Type="SAHL.X2Designer.Items.ExternalActivity" Id="40" Name="OnStuck" X2ID="15c648b2-63d9-4401-bfa7-ca29b02202b5" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTStuck" FromNode="Common OnStuck" ToNode="Common OnStuck">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnStuck(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnStuck(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnStuck(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="302.1953" LocationY="281.2493" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="41" Name="DoAppManCreate" X2ID="764695ad-3e67-4d26-bcb6-0e80cb082b79" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit Create" ToNode="Assign Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_DoAppManCreate(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (Credit_Data.EntryPath == 2)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_DoAppManCreate(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_DoAppManCreate(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_DoAppManCreate(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2095" DefinitionGroupDescription="Needs Approval" DefinitionDescription="Move from Origination" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="280.2578" LocationY="600.4968" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="46" Name="OnFallThrough" X2ID="ce23e8ae-8b4a-4605-bc44-36459da0bba5" Message="Rules Passed, Error updating Conditions or OfferStatus" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit Decision Check" ToNode="Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnFallThrough(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnFallThrough(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnFallThrough(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="176.3047" LocationY="617.4968" Type="SAHL.X2Designer.Items.UserActivity" Id="48" Name="Exceptions Decline with Offer" X2ID="b925ca9b-045a-4901-a043-39ff66597b21" Message="Exceptions Decline with Offer" StageTransitionMessage="Exceptions Decline with Offer [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ApplicationDeclineWithOfferRedirectExceptionAction" LinkedActivity="" UseLinkedActivity="False" FromNode="Credit" ToNode="Credit Decision Check">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Exceptions_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;    bool employmentTypeConfirmed = credit.CheckEmploymentTypeConfirmedRule((IDomainMessageCollection)messages, instance.ID, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!employmentTypeConfirmed)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="    public bool OnCompleteActivity_Exceptions_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;    {&#xD;&#xA;&#x9;&#x9;Credit_Data.ActionSource = &quot;Exceptions Decline with Offer&quot;;&#xD;&#xA;        Credit_Data.ExceptionsDeclineWithOffer = true;&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        return credit.CheckCreditApprovalRules((IDomainMessageCollection)messages,Credit_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Exceptions_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Exceptions Decline with Offer&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Exceptions_Decline_with_Offer(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4145" DefinitionGroupDescription="Approve Application" DefinitionDescription="Exceptions Decline with Offer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="479.4245" LocationY="263.2493" Type="SAHL.X2Designer.Items.UserActivity" Id="48" Name="Request Policy Override" X2ID="aa9244c7-f9ed-4311-93c3-12e5253e4eaf" Message="" StageTransitionMessage="" Description="Request Policy Override" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_AssignPolicyOverride" LinkedActivity="" UseLinkedActivity="False" FromNode="Credit" ToNode="Policy Override">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter D" />
            <AccessCollection AccessCollectionItem="Credit Manager D" />
            <AccessCollection AccessCollectionItem="Credit Supervisor D" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Policy_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Policy_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="    public string GetStageTransition_Request_Policy_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        string msg = string.Empty;&#xD;&#xA;        string User = workflowAssignment.ReturnPolicyOverrideUser((IDomainMessageCollection)messages,instance.ID);&#xD;&#xA;        if (!string.IsNullOrEmpty(User))&#xD;&#xA;        {&#xD;&#xA;            msg = string.Format(&quot;Policy Override Request sent to {0}&quot;, User);&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        return msg;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Policy_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4234" DefinitionGroupDescription="Credit" DefinitionDescription="Policy Override Request" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="668.224" LocationY="421.4977" Type="SAHL.X2Designer.Items.UserActivity" Id="49" Name="Feedback on Override" X2ID="713cab36-a353-4a94-b0ef-61b0d3daee02" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_AssignAllUsers" LinkedActivity="" UseLinkedActivity="False" FromNode="Policy Override" ToNode="Credit">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter D" />
            <AccessCollection AccessCollectionItem="Credit Exceptions D" />
            <AccessCollection AccessCollectionItem="Credit Manager D" />
            <AccessCollection AccessCollectionItem="Credit Supervisor D" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Feedback_on_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Feedback_on_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="    public string GetStageTransition_Feedback_on_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        string msg = string.Empty;&#xD;&#xA;        string User = workflowAssignment.ReturnFeedbackOnverrideUser((IDomainMessageCollection)messages,instance.ID);&#xD;&#xA;        if (!string.IsNullOrEmpty(User))&#xD;&#xA;        {&#xD;&#xA;            msg = string.Format(&quot;Feedback on Policy Override made by {0}&quot;, User);&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        return msg;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Feedback_on_Override(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    string msg = string.Empty;&#xD;&#xA;    string User = workflowAssignment.ReturnFeedbackOnverrideUser((IDomainMessageCollection)messages,instance.ID);&#xD;&#xA;    if (!string.IsNullOrEmpty(User))&#xD;&#xA;    {&#xD;&#xA;        msg = string.Format(&quot;Feedback on Policy Override made by {0}&quot;, User);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    return msg;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4235" DefinitionGroupDescription="Credit" DefinitionDescription="Policy Override Complete" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1296.25" LocationY="307.2491" Type="SAHL.X2Designer.Items.UserActivity" Id="50" Name="Request Lightstone Valuation" X2ID="18c4cb88-2209-4603-8ffd-475580ced3de" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Lightstone AVM" ToNode="Common Lightstone AVM">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="    public bool OnCompleteActivity_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;    {&#xD;&#xA;        ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;        if (!common.CheckPropertyExists((IDomainMessageCollection)messages, Credit_Data.ApplicationKey))&#xD;&#xA;        {&#xD;&#xA;            return false;&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        if (!common.CheckLightStoneValuationRules((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;        {&#xD;&#xA;            return false;&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        common.DoLightStoneValuationForWorkFlow((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;        return true;&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4359" DefinitionGroupDescription="Valuation" DefinitionDescription="Request Lightstone Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="384.9297" LocationY="165.4344" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="41" Name="Is Valuation Approval Required" X2ID="9b6cd6a5-0996-4824-96e4-a92633c14412" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Assign Credit" ToNode="Valuation Approval Required">
          <CodeSections>
            <CodeSection Name="OnStart" Code="    public bool OnStartActivity_Is_Valuation_Approval_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        return credit.IsValuationApprovalRequired((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Is_Valuation_Approval_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Is_Valuation_Approval_Required(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="689.8359" LocationY="165.4344" Type="SAHL.X2Designer.Items.UserActivity" Id="42" Name="Valuation Approved" X2ID="3d23bed7-caec-4e99-ae0d-a628d7fa59ca" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Valuation Approval Required" ToNode="Archive Valuation Approval">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_Approved(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_Approved(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Valuation_Approved(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_Approved(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4399" DefinitionGroupDescription="Credit" DefinitionDescription="Valuation Approved" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="59.4557" LocationY="643.5244" Type="SAHL.X2Designer.Items.UserActivity" Id="43" Name="Exceptions Rate Adjustment" X2ID="c4654aad-1e67-402b-af8d-db7dcede3b81" Message="Exceptions Rate Adjustment" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ApplicationDeclineCounterRateRedirectExceptionAction" LinkedActivity="" UseLinkedActivity="False" FromNode="Credit" ToNode="Credit Decision Check">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Exceptions_Rate_Adjustment(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;    bool employmentTypeConfirmed = credit.CheckEmploymentTypeConfirmedRule((IDomainMessageCollection)messages, instance.ID, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!employmentTypeConfirmed)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="    public bool OnCompleteActivity_Exceptions_Rate_Adjustment(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;    {&#xD;&#xA;&#x9;&#x9;Credit_Data.ActionSource = &quot;Exceptions Rate Adjustment&quot;;&#xD;&#xA;&#x9;&#x9;//this is to bypass mandate checks&#xD;&#xA;&#x9;&#x9;Credit_Data.ExceptionsDeclineWithOffer = true;&#xD;&#xA;        ICredit credit = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;        return credit.CheckCreditApprovalRules((IDomainMessageCollection)messages,Credit_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;    }&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Exceptions_Rate_Adjustment(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Exceptions_Rate_Adjustment(InstanceDataModel instance,IX2Credit_Data Credit_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4458" DefinitionGroupDescription="Approve Application" DefinitionDescription="Exceptions Decline Counter Rate" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1031.495" LocationY="126.2511" Type="SAHL.X2Designer.Items.UserActivity" Id="43" Name="Confirm Application Employment" X2ID="5be06f00-a7ea-4404-958e-9f274da84684" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowEmploymentTypeConfirmation" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Application Employment Type Confirmation" ToNode="Common Application Employment Type Confirmation">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Confirm_Application_Employment(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Confirm_Application_Employment(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; &#x9;int selectedEmploymentType = param.Data == null ? 0 : Convert.ToInt32(param.Data);&#xD;&#xA; &#x9;common.ProcessApplicationForManuallySelectedEmploymentType((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, false, selectedEmploymentType);&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Confirm_Application_Employment(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Confirm_Application_Employment(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4628" DefinitionGroupDescription="Credit" DefinitionDescription="Confirm Application Employment" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1310.021" LocationY="173.5002" Type="SAHL.X2Designer.Items.UserActivity" Id="43" Name="Disqualify 30yr Term" X2ID="d14e9362-910f-48f1-8ff6-d6cc73bbf025" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_CreditDisqualify30YearTerm" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Disqualify 30 yr term" ToNode="Common Disqualify 30 yr term">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Disqualify_30yr_Term(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICredit creditHost = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;&#x9;return creditHost.CheckApplicationIsNewBusinessRule((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Disqualify_30yr_Term(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Disqualify_30yr_Term(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Disqualify_30yr_Term(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4658" DefinitionGroupDescription="Credit" DefinitionDescription="Credit Disqualified 30 Year Term" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1397.81" LocationY="576.5001" Type="SAHL.X2Designer.Items.UserActivity" Id="44" Name="Confirm Affordability" X2ID="18f97ab7-4999-4fcd-b602-69a2f9b8a9e7" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Confirm Affordability" ToNode="Common Confirm Affordability">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Confirm_Affordability(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Confirm_Affordability(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.ConfirmApplicationAffordabilityAssessments((IDomainMessageCollection)messages, Credit_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Confirm_Affordability(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Confirm_Affordability(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4662" DefinitionGroupDescription="Credit" DefinitionDescription="Confirm Affordability" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1509.461" LocationY="760.5001" Type="SAHL.X2Designer.Items.UserActivity" Id="45" Name="SWD Pricing Comparison" X2ID="63f2d16e-160b-4278-836c-8e75c76a3401" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_SWD_PricingComparison" LinkedActivity="" UseLinkedActivity="False" FromNode="Common SWD Pricing Comparison" ToNode="Common SWD Pricing Comparison">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;if (common.CheckApplicationHasAttribute((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.StopOrderDiscount))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;ICredit creditHost = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;&#x9;&#x9;return creditHost.CheckApplicationIsNewBusinessRule((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#x9;&#x9;&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;  messages.AddMessage( new SystemMessage(&quot;Stop Order Discount not applicable on this application&quot;,SystemMessageSeverityEnum.Error));&#xD;&#xA;&#x9;  return false;&#xD;&#xA;&#x9;}&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1370.094" LocationY="845.5001" Type="SAHL.X2Designer.Items.UserActivity" Id="46" Name="Disqualify for GEPF" X2ID="1f2de1df-84ca-44bc-9b31-37df351d3597" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Disqualify for GEPF" ToNode="Common Disqualify for GEPF">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Exceptions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Disqualify_for_GEPF(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;if (common.CheckApplicationHasAttribute((IDomainMessageCollection)messages, Credit_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.GovernmentEmployeePensionFund))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;messages.AddMessage( new SystemMessage(&quot;Application is not GEPF Funded&quot;,SystemMessageSeverityEnum.Error));&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Disqualify_for_GEPF(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;ICredit creditHost = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;&#x9;creditHost.DisqualifyApplicationForGEPF((IDomainMessageCollection)messages, Credit_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.PricingForRisk((IDomainMessageCollection)messages, Credit_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Disqualify_for_GEPF(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Disqualify_for_GEPF(InstanceDataModel instance, IX2Credit_Data Credit_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4663" DefinitionGroupDescription="Credit" DefinitionDescription="Disqualify for GEPF" />
          </BusinessStageTransitions>
        </Activity>
      </Activities>
      <Comments />
    </WorkFlow>
    <WorkFlow WorkFlowName="Valuations" LocationX="20" LocationY="70" GenericKeyTypeKey="2">
      <CustomVariables>
        <CustomVariable Name="ApplicationKey" Length="0" Type="integer" />
        <CustomVariable Name="PropertyKey" Length="0" Type="integer" />
        <CustomVariable Name="Withdrawn" Length="0" Type="bool" />
        <CustomVariable Name="RequestingAdUser" Length="255" Type="string" />
        <CustomVariable Name="AdcheckPropertyID" Length="0" Type="integer" />
        <CustomVariable Name="AdcheckValuationID" Length="0" Type="integer" />
        <CustomVariable Name="ValuationKey" Length="0" Type="integer" />
        <CustomVariable Name="AdCheckValuationIDStatus" Length="0" Type="integer" />
        <CustomVariable Name="nLoops" Length="0" Type="integer" />
        <CustomVariable Name="EntryPath" Length="0" Type="integer" />
        <CustomVariable Name="OnManagerWorkList" Length="0" Type="bool" />
        <CustomVariable Name="ValuationDataProviderDataServiceKey" Length="0" Type="integer" />
        <CustomVariable Name="LightstonePropertyID" Length="255" Type="string" />
        <CustomVariable Name="IsReview" Length="0" Type="bool" />
        <CustomVariable Name="GenericKey" Length="0" Type="integer" />
      </CustomVariables>
      <ExternalActivities>
        <ExternalActivity Name="ValuationRequest" Description="" />
        <ExternalActivity Name="EXTWithdrawn" Description="" />
        <ExternalActivity Name="EXTAssesmentReturned" Description="" />
        <ExternalActivity Name="EXTAssesmentComplete" Description="" />
        <ExternalActivity Name="EXTCleanupArchive" Description="" />
        <ExternalActivity Name="EXTADcheckValuationRequested" Description="" />
        <ExternalActivity Name="EXTAdcheckValuationRequestFail" Description="" />
        <ExternalActivity Name="FurtherValuationRequired" Description="" />
        <ExternalActivity Name="ReviewValuationRequired" Description="" />
        <ExternalActivity Name="EXTCloneCleanupArchive" Description="" />
        <ExternalActivity Name="EXTStuck" Description="" />
        <ExternalActivity Name="EXTAssesmentCompleteLS" Description="" />
        <ExternalActivity Name="EXTAssesmentRejectedLS" Description="EXTAssesmentRejectedLS" />
        <ExternalActivity Name="EXTAssesmentAmendedLS" Description="EXTAssesmentRejectedLS" />
        <ExternalActivity Name="EXTAssesmentWithdrawnLS" Description="EXTAssesmentWithdrawnLS" />
      </ExternalActivities>
      <CustomForms>
        <CustomForm Name="Orig_ApplicationSummaryRedirect" Description="Application Summary" />
        <CustomForm Name="Orig_ManualValuationsMainDwellingDetailsAdd" Description="Manual Valuation" />
        <CustomForm Name="Val_Memo" Description="" />
        <CustomForm Name="Val_RequestCapture" Description="Allows for the request of a capture of contact details and request for valuation" />
        <CustomForm Name="Val_SelectProperty" Description="Allows for the selection of property from returned matching property list from AdCheck to get the correct SAPTG ID for the property requiring a Valuation" />
        <CustomForm Name="Val_SetActiveValuation" Description="" />
        <CustomForm Name="ValuationAdCheckValuationPendingDetails" Description="AdCheck Valuation Details" />
        <CustomForm Name="ValuationDetailsRedirect" Description="Valuation Details" />
        <CustomForm Name="ValuationScheduleAdCheckValuationAddView" Description="Schedule a valuation" />
        <CustomForm Name="ValuationScheduleAdCheckValuationEditView" Description="Allows for the edit of a an instuction to the Valuer to assess" />
        <CustomForm Name="ValuationScheduleAdCheckValuationReadOnlyView" Description="Adcheck Summary" />
        <CustomForm Name="ValuationScheduledRedirect" Description="Assessment Summary" />
        <CustomForm Name="ValuationScheduleLightstoneValuationAddView" Description="" />
        <CustomForm Name="WF_ReAssign" Description="Reassign User" />
        <CustomForm Name="WF_StageTransitionHist" Description="Business Event History" />
        <CustomForm Name="WorkflowSubmit" Description="" />
        <CustomForm Name="WorkflowYesNo" Description="" />
      </CustomForms>
      <InvisibleAnchorNode LocationX="717.0944" LocationY="491.6567" />
      <Clapperboard LocationX="83.7608" LocationY="153.6569" LimitAccessTo="" Subject="" KeyVariable="ApplicationKey" />
      <States>
        <State LocationX="535.2897" LocationY="377.0217" X2ID="750ef916-d9cf-4d12-985c-284781c75cc4" Type="SAHL.X2Designer.Items.UserState" StateName="Schedule Valuation Assessment">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Schedule Valuation Assessment state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Schedule_Valuation_Assessment(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Schedule Valuation Assessment state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Schedule_Valuation_Assessment(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Valuations Administrator D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="ValuationScheduledRedirect" />
          </CustomForms>
        </State>
        <State LocationX="843.5248" LocationY="377.0948" X2ID="cff1650b-59a7-4ac1-9b15-17249ce48b53" Type="SAHL.X2Designer.Items.UserState" StateName="Valuation Assessment Pending ">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Assessment Pending  state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Valuation_Assessment_Pending_(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Assessment Pending  state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Valuation_Assessment_Pending_(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Valuations Administrator D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="ValuationScheduledRedirect" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="378.525" LocationY="999.4462" X2ID="dfed408e-3f58-48f4-8652-ed20ca5f5182" Type="SAHL.X2Designer.Items.UserState" StateName="Valuation Complete">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Complete state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Valuation_Complete(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Complete state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Valuation_Complete(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Valuations Manager D" />
            <WorkListCollection WorkListCollectionItem="Valuations Administrator D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="ValuationScheduledRedirect" />
            <CustomFormCollection FormName="ValuationDetailsRedirect" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="575.2626" LocationY="144.7125" X2ID="dcc802e0-17ba-435a-9016-a7c16e78f3fb" Type="SAHL.X2Designer.Items.UserState" StateName="Valuation Review Request">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Review Request state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Valuation_Review_Request(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Review Request state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Valuation_Review_Request(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Valuations Administrator D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="678.1588" LocationY="182.7126" X2ID="4481775e-4139-4264-87f5-11bc7112567d" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Valuation Review">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Valuation Review state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Valuation_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Valuation Review state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Valuation_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="205.4705" LocationY="377.0009" X2ID="90804af6-87d7-4453-a778-7b8e4a239f8a" Type="SAHL.X2Designer.Items.UserState" StateName="Further Valuation Request">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Further Valuation Request state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Further_Valuation_Request(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Further Valuation Request state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Further_Valuation_Request(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Valuations Administrator D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="38.40784" LocationY="300.3342" X2ID="edb03283-f5e2-4e76-ad73-06636ae06388" Type="SAHL.X2Designer.Items.CommonState" StateName="Common 2nd Valuation">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common 2nd Valuation state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_2nd_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common 2nd Valuation state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_2nd_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="624.173" LocationY="1034.022" X2ID="ab0a8559-8605-43d2-87a6-b2c3643cd6c1" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Valuation Complete" ReturnActivity="Valuation in Order" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Valuation Complete state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Valuation_Complete(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;    IValuations valuations = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;    &#xD;&#xA;    valuations.SetValuationStatus((IDomainMessageCollection)messages, Valuations_Data.ValuationKey,  (int)SAHL.Common.Globals.ValuationStatuses.Complete);&#xD;&#xA;&#xD;&#xA;    valuations.SetValuationActiveAndSave((IDomainMessageCollection)messages, Valuations_Data.ValuationKey);&#xD;&#xA;&#xD;&#xA;    valuations.SendEmailToAllOpenApplicationConsultantsForValuationComplete((IDomainMessageCollection)messages, Valuations_Data.ValuationKey, Valuations_Data.ApplicationKey);&#xD;&#xA;    &#xD;&#xA;    List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;    DYs.Add(&quot;Valuations Administrator D&quot;);&#xD;&#xA;    DYs.Add(&quot;Valuations Manager D&quot;);&#xD;&#xA;&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;    workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    &#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Valuation Complete state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Valuation_Complete(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Valuation Complete state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Valuation_Complete(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="865.627" LocationY="865.275" X2ID="5ba135f0-3746-43e4-ace0-3dee536ade1a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Re-Assign">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Re-Assign state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Re_Assign(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Re-Assign state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Re_Assign(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Schedule Valuation Assessment" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Assessment Pending " />
            <AppliesToCollection AppliesToCollectionItem="Valuation Complete" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="879.995" LocationY="617.275" X2ID="69855ce4-7134-4b33-9bb2-191746c5219a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Note">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Note state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Note(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Note state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Note(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Schedule Valuation Assessment" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Assessment Pending " />
            <AppliesToCollection AppliesToCollectionItem="Valuation Complete" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="30.10901" LocationY="769.2747" X2ID="88ed318f-8b9c-4412-92a6-b9fa95e111c9" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Escalate to Manager">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Escalate to Manager state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Escalate_to_Manager(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Escalate to Manager state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Escalate_to_Manager(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Schedule Valuation Assessment" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Complete" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="332.662" LocationY="769.9417" X2ID="9d9b7860-cf77-44ab-8b40-d8033bfd220b" Type="SAHL.X2Designer.Items.UserState" StateName="Manager Review">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manager Review state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Manager_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Valuations_Data.OnManagerWorkList = true;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manager Review state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Manager_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Valuations Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="ValuationScheduledRedirect" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="646.031" LocationY="770.6082" X2ID="65be50c3-eb44-40bc-a22e-a366d68db037" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Manager Archive" ReturnActivity="Valuation in Order" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manager Archive state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Manager_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;&#x9;IValuations valuations = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;valuations.SendEmailToAllOpenApplicationConsultantsForValuationComplete((IDomainMessageCollection)messages, Valuations_Data.ValuationKey, Valuations_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Administrator D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Manager D&quot;);&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manager Archive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Manager_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manager Archive state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Manager_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="855.422" LocationY="996.6842" X2ID="e6c6c3ba-915b-49a3-adae-62d79f798f0f" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Request AVM">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Request AVM state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Request_AVM(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Request AVM state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Request_AVM(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="34.15009" LocationY="631.0175" X2ID="4598d196-6edc-4018-b697-024f00aad15e" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Manual Valuation">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Manual Valuation state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Manual Valuation state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="844.8989" LocationY="734.3505" X2ID="9d45ba53-d148-4501-aca8-082dbbccc84a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Set Active Valuation">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Set Active Valuation state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Set_Active_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Set Active Valuation state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Set_Active_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="644.7311" LocationY="631.3505" X2ID="592c903f-0d6f-4e02-a08b-0e2439052148" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Manual Archive" ReturnActivity="Valuation in Order" ReturnWorkflow="Application Management">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manual Archive state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Manual_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;    IValuations valuations = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;    &#xD;&#xA;&#x9;// NB: we used to pass this as the second parameter, (Valuations_Data.ValuationKey), however it could not have ever worked as the valuation is not yet saved, for now pass 0 to get the email to work.&#xD;&#xA;    valuations.SendEmailToAllOpenApplicationConsultantsForValuationComplete((IDomainMessageCollection)messages, 0, Valuations_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;    List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;    DYs.Add(&quot;Valuations Administrator D&quot;);&#xD;&#xA;    DYs.Add(&quot;Valuations Manager D&quot;);&#xD;&#xA;&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manual Archive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Manual_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manual Archive state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Manual_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="38.38501" LocationY="1210.121" X2ID="cf293fc4-304f-4792-8751-437925109cc4" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Archive Cleanup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive Cleanup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Archive_Cleanup(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive Cleanup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Archive_Cleanup(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Schedule Valuation Assessment" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Assessment Pending " />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="647.588" LocationY="1210.121" X2ID="837a8871-4e30-4dab-b6e3-b91896e0bb2d" Type="SAHL.X2Designer.Items.ArchiveState" StateName="ParentCaseArchive" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ParentCaseArchive state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_ParentCaseArchive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;&#x9;IValuations valuations = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;valuations.SendEmailToAllOpenApplicationConsultantsForValuationComplete((IDomainMessageCollection)messages, Valuations_Data.ValuationKey, Valuations_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Administrator D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ParentCaseArchive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_ParentCaseArchive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ParentCaseArchive state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_ParentCaseArchive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="878.276" LocationY="491.5318" X2ID="d30cfdf9-e38b-4e58-9906-79f41b62f0ca" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Stuck">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Stuck(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Stuck(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo />
        </State>
        <State LocationX="856.127" LocationY="1134.121" X2ID="6435a5c0-3692-4a29-bb66-5f02a81e4f27" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Lightstone AVM">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Lightstone_AVM(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Lightstone_AVM(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Schedule Valuation Assessment" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Assessment Pending " />
          </AppliesTo>
        </State>
        <State LocationX="20" LocationY="950.1215" X2ID="4431fa79-ae8c-45e4-b970-4f1159ce969c" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Valuation Complete LS">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Valuation_Complete_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Valuation_Complete_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Schedule Valuation Assessment" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Assessment Pending " />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="26.77576" LocationY="466.1214" X2ID="1536d76c-f3a6-4082-8e14-3fc7683b98c7" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Valuation Rejected LS">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Valuation_Rejected_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Valuation_Rejected_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Valuation Assessment Pending " />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="20.02588" LocationY="999.1212" X2ID="2bf32eb3-32b4-4f17-b367-0c3e9e23d4e6" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Valuation Amended LS">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Valuation_Amended_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Valuation_Amended_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Schedule Valuation Assessment" />
            <AppliesToCollection AppliesToCollectionItem="Valuation Assessment Pending " />
            <AppliesToCollection AppliesToCollectionItem="Valuation Review Request" />
            <AppliesToCollection AppliesToCollectionItem="Further Valuation Request" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="411.5494" LocationY="155.5" X2ID="68baaae7-5a21-4bb3-a9bf-85c91bb703b9" Type="SAHL.X2Designer.Items.SystemState" StateName="Check Valuation" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Check_Valuation(InstanceDataModel instance, IX2Valuations_Data Valuations_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Check_Valuation(InstanceDataModel instance, IX2Valuations_Data Valuations_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
      </States>
      <Activities>
        <Activity LocationX="575.5958" LocationY="237.0458" Type="SAHL.X2Designer.Items.UserActivity" Id="7" Name="Request Valuation Review" X2ID="ea6ac039-ff27-4978-850f-363344b00a37" Message="Request Valuation Review" StageTransitionMessage="Request Valuation Review [CodeChanged]" Description="" Priority="8" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Valuation Review Request" ToNode="Schedule Valuation Assessment">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Valuation_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Valuation_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Valuations_Data.IsReview = true;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Request Valuation Review.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Request_Valuation_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Request Valuation Review&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Valuation_Review(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1490" DefinitionGroupDescription="Schedule Valuation" DefinitionDescription="Request Valuation Review" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="394.4358" LocationY="382.6677" Type="SAHL.X2Designer.Items.UserActivity" Id="9" Name="Re-instruct Valuer" X2ID="2272b31c-fd31-4294-be8f-c66cef8db696" Message="Re-instruct Valuer" StageTransitionMessage="Re-instruct Valuer [CodeChanged]" Description="" Priority="9" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Further Valuation Request" ToNode="Schedule Valuation Assessment">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Re_instruct_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Re_instruct_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Re-instruct Valuer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Re_instruct_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Re-instruct Valuer&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Re_instruct_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1890" DefinitionGroupDescription="Valuations" DefinitionDescription="Re-instruct Valuer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="196.7702" LocationY="151.1995" Type="SAHL.X2Designer.Items.ExternalActivity" Id="15" Name="Valuation Request" X2ID="7035971c-be5e-4bba-a032-a5052da40e94" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="" InvokedBy="ValuationRequest" FromNode="ClapperBoard" ToNode="Check Valuation">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_Request(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_Request(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Valuations_Data.EntryPath = 2;&#xD;&#xA; &#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_Request(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="29.68201" LocationY="382.7576" Type="SAHL.X2Designer.Items.UserActivity" Id="26" Name="Further Valuation Required" X2ID="22e4ecad-8fa6-4147-990c-6cf3f8d54ba0" Message="Further Valuation Required" StageTransitionMessage="Further Valuation Required [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common 2nd Valuation" ToNode="Further Valuation Request">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (!Valuations_Data.OnManagerWorkList)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    &#xD;&#xA;&#x9;    return common.IsValuationInProgress((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Administrator D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;Valuations_Data.OnManagerWorkList = false;&#xD;&#xA;&#x9;workflowAssignment.ReassignToPreviousValuationsUserIfExistsElseRoundRobin((IDomainMessageCollection)messages, &quot;Valuations Administrator D&quot;, 111, Valuations_Data.ApplicationKey, &quot;Valuations&quot;, instance.ID, &quot;Further Valuation Requested&quot;, (int)SAHL.Common.Globals.RoundRobinPointers.ValuationsAdministrator);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Further Valuation Required.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Further_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Further Valuation Required&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4584" DefinitionGroupDescription="Schedule Valuation" DefinitionDescription="Further Valuation Required" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="679.0204" LocationY="85.09114" Type="SAHL.X2Designer.Items.UserActivity" Id="27" Name="Review Valuation Required" X2ID="3d0a4c9e-1e6c-4b2b-a2a6-383a5497f77e" Message="Review Valuation Required" StageTransitionMessage="Review Valuation Required [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Valuation Review" ToNode="Valuation Review Request">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Review_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Review_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (!Valuations_Data.OnManagerWorkList)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    return common.IsValuationInProgress((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Administrator D&quot;);&#xD;&#xA;&#x9;DYs.Add(&quot;Valuations Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;Valuations_Data.OnManagerWorkList = false;&#xD;&#xA;&#x9;workflowAssignment.ReassignToPreviousValuationsUserIfExistsElseRoundRobin((IDomainMessageCollection)messages, &quot;Valuations Administrator D&quot;, 111, Valuations_Data.ApplicationKey, &quot;Valuations&quot;, instance.ID, &quot;Valuation Review Request&quot;, (int)SAHL.Common.Globals.RoundRobinPointers.ValuationsAdministrator);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Review_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Review Valuation Required&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Review_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4585" DefinitionGroupDescription="Schedule Valuation" DefinitionDescription="Review Valuation Required" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="482.8621" LocationY="1038.022" Type="SAHL.X2Designer.Items.UserActivity" Id="21" Name="Valuation in Order" X2ID="f68b15c6-c19c-4510-bcc7-c34e2c370c4b" Message="Valuation in Order" StageTransitionMessage="Valuation in Order [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Valuation Complete" ToNode="Archive Valuation Complete">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_in_Order(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  // --REFACTORED--&#xD;&#xA;  IValuations valuations = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;  return valuations.CheckValuationInOrderRules((IDomainMessageCollection)messages, Valuations_Data.ValuationKey, true);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_in_Order(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;    IValuations valuations = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;    valuations.RecalcHOC((IDomainMessageCollection)messages, Valuations_Data.ValuationKey, Valuations_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Valuation in Order. &#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Valuation_in_Order(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Valuation in Order&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_in_Order(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2057" DefinitionGroupDescription="Complete Valuation Assessment" DefinitionDescription="Valuation in Order" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="878.87" LocationY="952.275" Type="SAHL.X2Designer.Items.UserActivity" Id="24" Name="Reassign User" X2ID="6dc20f38-422c-4a50-82da-e7dd42c5de65" Message="Reassign User" StageTransitionMessage="Reassign User [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssign" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Re-Assign" ToNode="Common Re-Assign">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reassign_User(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reassign_User(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reassign User.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reassign_User(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reassign User&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reassign_User(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2185" DefinitionGroupDescription="Schedule Valuation" DefinitionDescription="Reassign User" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="893.313" LocationY="686.275" Type="SAHL.X2Designer.Items.UserActivity" Id="25" Name="Note" X2ID="76f70379-adc6-4d1f-8215-f572ffe5c7b1" Message="Note" StageTransitionMessage="Note [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Note" ToNode="Common Note">
          <Access />
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Note(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Note(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Note.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Note(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Note&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Note(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1894" DefinitionGroupDescription="Valuations" DefinitionDescription="Note" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="199.662" LocationY="774.275" Type="SAHL.X2Designer.Items.UserActivity" Id="26" Name="Escalate to Manager" X2ID="9db97c25-ac24-48aa-957c-e30d12f384b7" Message="Escalate to Manager" StageTransitionMessage="Escalate to Manager [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Escalate to Manager" ToNode="Manager Review">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Escalate_to_Manager(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Escalate_to_Manager(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;    List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;    DYs.Add(&quot;Valuations Administrator D&quot;);&#xD;&#xA;    DYs.Add(&quot;Valuations Manager D&quot;);&#xD;&#xA;&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;    WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Valuations_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;    string AssignedUser = string.Empty;&#xD;&#xA;&#xD;&#xA;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;Valuations Manager D&quot;, Valuations_Data.ApplicationKey, 113, instance.ID, &quot;Manager Review&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.ValautionsManager);&#xD;&#xA;    //WorkflowAssignment.ReactiveUserOrRoundRobin( param.Tran, &quot;Valuations Manager D&quot;, Valuations_Data.ApplicationKey, 113, instance.ID, &quot;Manager Review&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.ValautionsManager);&#xD;&#xA;    &#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Escalate to Manager.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Escalate_to_Manager(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Escalate to Manager&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Escalate_to_Manager(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2150" DefinitionGroupDescription="Manager Review Valuations" DefinitionDescription="Escalate to Manager" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="523.865" LocationY="775.6082" Type="SAHL.X2Designer.Items.UserActivity" Id="27" Name="Manager Archive" X2ID="8a42fc10-df2e-4091-b5cd-3296cd5eeb94" Message="Manager Archive" StageTransitionMessage="Manager Archive [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Manager Review" ToNode="Manager Archive">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Manager_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Manager_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Manager Archive.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Manager_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Manager Archive&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Manager_Archive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2149" DefinitionGroupDescription="Manager Review Valuations" DefinitionDescription="Manager Archive" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="843.019" LocationY="1084.684" Type="SAHL.X2Designer.Items.UserActivity" Id="29" Name="Request Automated Valuation" X2ID="a3902873-5303-494f-9876-9c491b7f3a3f" Message="Request Automated Valuation" StageTransitionMessage="Request Automated Valuation [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Request AVM" ToNode="Common Request AVM">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Automated_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Automated_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Request Automated Valuation.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Request_Automated_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Request Automated Valuation&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Automated_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1630" DefinitionGroupDescription="Schedule Valuation" DefinitionDescription="Request Automated Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="349.2379" LocationY="636.0175" Type="SAHL.X2Designer.Items.UserActivity" Id="30" Name="Manual Valuation" X2ID="720fb446-5987-4192-8549-1d48d3fb3e85" Message="Manual Valuation" StageTransitionMessage="Manual Valuation [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ManualValuationsMainDwellingDetailsAdd" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Manual Valuation" ToNode="Manual Archive">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Valuations_Data.ValuationDataProviderDataServiceKey = 1;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Manual Valuation.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Manual Valuation&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2174" DefinitionGroupDescription="Manual Valuation" DefinitionDescription="Perform Manual Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="867.4509" LocationY="820.0175" Type="SAHL.X2Designer.Items.UserActivity" Id="32" Name="Set Active Valuation" X2ID="616ef153-f9b9-48a6-9eaf-c98cca5f6d65" Message="Set Active Valuation" StageTransitionMessage="Set Active Valuation" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Val_SetActiveValuation" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Set Active Valuation" ToNode="Common Set Active Valuation">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Set_Active_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Set_Active_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Set_Active_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="621.0277" LocationY="476.3505" Type="SAHL.X2Designer.Items.UserActivity" Id="35" Name="Perform Manual Valuation" X2ID="a70e8ad0-ad40-4c7f-b505-20e638376a9d" Message="Perform Manual Valuation" StageTransitionMessage="Perform Manual Valuation [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ManualValuationsMainDwellingDetailsAdd" LinkedActivity="" UseLinkedActivity="False" FromNode="Schedule Valuation Assessment" ToNode="Manual Archive">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Perform_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Perform_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Valuations_Data.ValuationDataProviderDataServiceKey = 1;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Perform Manual Valuation.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Perform_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Perform Manual Valuation&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Perform_Manual_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2174" DefinitionGroupDescription="Manual Valuation" DefinitionDescription="Perform Manual Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="168.2688" LocationY="95.67221" Type="SAHL.X2Designer.Items.ExternalActivity" Id="40" Name="EXT Review Valuation Required" X2ID="5c6575f9-6a67-4d93-8c37-6039f037cdb5" Message="Valuation Review Required" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="" InvokedBy="ReviewValuationRequired" FromNode="ClapperBoard" ToNode="Check Valuation">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Review_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Review_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Valuations_Data.EntryPath = 1;&#xD;&#xA;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Review_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="168.0832" LocationY="201.7723" Type="SAHL.X2Designer.Items.ExternalActivity" Id="41" Name="EXT Further Valuation Required" X2ID="fa0a8a48-5812-415d-aa02-c826faa78fb3" Message="Further Valuation Required" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="" InvokedBy="FurtherValuationRequired" FromNode="ClapperBoard" ToNode="Check Valuation">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Further_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Further_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Valuations_Data.EntryPath = 3;&#xD;&#xA;  &#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Further_Valuation_Required(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="225.302" LocationY="1215.121" Type="SAHL.X2Designer.Items.ExternalActivity" Id="40" Name="EXT_CommonArchive" X2ID="175984be-e7fa-42b9-8845-39c6ed84793e" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTCleanupArchive" FromNode="Common Archive Cleanup" ToNode="ParentCaseArchive">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_CommonArchive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_CommonArchive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_CommonArchive(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="891.666" LocationY="568.5319" Type="SAHL.X2Designer.Items.ExternalActivity" Id="44" Name="OnStuck" X2ID="f0df6506-381a-400b-b1a5-e45a2010b6bb" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTStuck" FromNode="Common Stuck" ToNode="Common Stuck">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnStuck(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnStuck(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnStuck(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="445.6169" LocationY="93.12149" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="45" Name="Review Valuation Requested" X2ID="9a7033c9-3da4-4fa8-9581-c056d24a442e" Message="Valuation Review Required" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Valuation" ToNode="Valuation Review Request">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Review_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Valuations_Data.EntryPath==1)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Review_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;// --REFACTORED--&#xD;&#xA;    Valuations_Data.nLoops = 0;&#xD;&#xA;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;    int applicationKey = common.GetApplicationKeyFromSourceInstanceID((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#xD;&#xA;    Valuations_Data.ApplicationKey = applicationKey;&#xD;&#xA;&#xD;&#xA;    string Subject = common.GetCaseName((IDomainMessageCollection)messages, Valuations_Data.ApplicationKey);&#xD;&#xA;    &#xD;&#xA;    instance.Subject = Subject;&#xD;&#xA;    instance.Name = Valuations_Data.ApplicationKey.ToString();&#xD;&#xA;&#xD;&#xA;    IValuations valuations = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;&#xD;&#xA;    Dictionary&lt;string, object&gt; data = valuations.GetValuationData((IDomainMessageCollection)messages, applicationKey);&#xD;&#xA;&#xD;&#xA;    if (data != null &amp;&amp; data.Count &gt; 0)&#xD;&#xA;    {&#xD;&#xA;        Valuations_Data.ValuationKey = (int)data[&quot;ValuationKey&quot;];&#xD;&#xA;        Valuations_Data.PropertyKey = (int)data[&quot;PropertyKey&quot;];&#xD;&#xA;        Valuations_Data.ValuationDataProviderDataServiceKey = (int)data[&quot;ValuationDataProviderDataServiceKey&quot;];&#xD;&#xA;&#xD;&#xA;        if (data.ContainsKey(&quot;LightstonePropertyID&quot;))&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;            Valuations_Data.LightstonePropertyID = (string)data[&quot;LightstonePropertyID&quot;];&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;    workflowAssignment.ReassignToPreviousValuationsUserIfExistsElseRoundRobin((IDomainMessageCollection)messages, &quot;Valuations Administrator D&quot;, 111, Valuations_Data.ApplicationKey, &quot;Valuations&quot;, instance.ID, &quot;Valuation Review Request&quot;, (int)SAHL.Common.Globals.RoundRobinPointers.ValuationsAdministrator);&#xD;&#xA;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Review_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Review_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1891" DefinitionGroupDescription="Valuations" DefinitionDescription="Review Valuation Required" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="458.5518" LocationY="246.1215" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="46" Name="Valuation Requested" X2ID="1696f320-6d55-4585-8f59-9ae61489d0ee" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Valuation" ToNode="Schedule Valuation Assessment">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Valuations_Data.EntryPath==2)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;    Valuations_Data.nLoops = 0;&#xD;&#xA;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;    Valuations_Data.ApplicationKey = common.GetApplicationKeyFromSourceInstanceID((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#xD;&#xA;    instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Valuations_Data.ApplicationKey);&#xD;&#xA;    instance.Name = Valuations_Data.ApplicationKey.ToString();&#xD;&#xA;&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;    workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;Valuations Administrator D&quot;, Valuations_Data.ApplicationKey, 111, instance.ID, &quot;Schedule Valuation Assesment&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.ValuationsAdministrator);&#xD;&#xA;&#xD;&#xA;    //workflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;Valuations Administrator D&quot;, Valuations_Data.ApplicationKey, 111, instance.ID, &quot;Schedule Valuation Assesment&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.ValuationsAdministrator);&#xD;&#xA;    &#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1895" DefinitionGroupDescription="Valuations" DefinitionDescription="ValuationRequest" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="263.945" LocationY="276.1213" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="47" Name="Further Valuation Requested" X2ID="e1c2acf2-af43-46a1-834b-c8928d3bb987" Message="Further Valuation Required" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Valuation" ToNode="Further Valuation Request">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Valuations_Data.EntryPath==3)&#xD;&#xA;  return true;&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;// --REFACTORED--&#xD;&#xA;    Valuations_Data.nLoops = 0;&#xD;&#xA;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;    int applicationKey = common.GetApplicationKeyFromSourceInstanceID((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;    Valuations_Data.ApplicationKey = applicationKey;&#xD;&#xA;    string Subject = common.GetCaseName((IDomainMessageCollection)messages, Valuations_Data.ApplicationKey);&#xD;&#xA;    instance.Subject = Subject;&#xD;&#xA;    instance.Name = Valuations_Data.ApplicationKey.ToString();&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;    workflowAssignment.ReassignToPreviousValuationsUserIfExistsElseRoundRobin((IDomainMessageCollection)messages, &quot;Valuations Administrator D&quot;, 111, Valuations_Data.ApplicationKey, &quot;Valuations&quot;, instance.ID, &quot;Further Valuation Requested&quot;, (int)SAHL.Common.Globals.RoundRobinPointers.ValuationsAdministrator);&#xD;&#xA;    &#xD;&#xA;    // string AssignedUser = string.Empty;&#xD;&#xA;    // &#xD;&#xA;    // ret = WorkflowAssignment.GetUserWhoWorkedOnCaseBasedOnSourceInstanceID(param.Tran, out AssignedUser, 928, 111, (int)instance.SourceInstanceID);&#xD;&#xA;    // if (!string.IsNullOrEmpty(AssignedUser))&#xD;&#xA;    // {&#xD;&#xA;    //  ret = WorkflowAssignment.ReassignCaseToUser(param.Tran, instance.ID, Valuations_Data.ApplicationKey, AssignedUser, 111, 928, &quot;FurtherValuation Requested&quot;);&#xD;&#xA;    // }&#xD;&#xA;    // else&#xD;&#xA;    // {&#xD;&#xA;    //  ret = WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;Valuations Administrator D&quot;, Valuations_Data.ApplicationKey, 111, instance.ID, &quot;Further Valuation Requested&quot;);&#xD;&#xA;    // }&#xD;&#xA;    &#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Further_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Valuation_Requested(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1889" DefinitionGroupDescription="Valuations" DefinitionDescription="Further Valuation Required" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="846.8101" LocationY="1226.121" Type="SAHL.X2Designer.Items.UserActivity" Id="49" Name="Request Lightstone Valuation" X2ID="954d9307-259e-4e03-9daa-f6ccf4942745" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Lightstone AVM" ToNode="Common Lightstone AVM">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Valuations Manager" />
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;// --REFACTORED--&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;    if (!common.CheckPropertyExists((IDomainMessageCollection)messages, Valuations_Data.ApplicationKey))&#xD;&#xA;    {&#xD;&#xA;        return false;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    if (!common.CheckLightStoneValuationRules((IDomainMessageCollection)messages, Valuations_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;    {&#xD;&#xA;        return false;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    common.DoLightStoneValuationForWorkFlow((IDomainMessageCollection)messages, Valuations_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;    return true;&#xD;&#xA;&#xD;&#xA;    //return common.GetLightStoneValuation((IDomainMessageCollection)messages, Valuations_Data.ApplicationKey, param.ADUserName, false);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4359" DefinitionGroupDescription="Valuation" DefinitionDescription="Request Lightstone Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="714.5596" LocationY="382.1214" Type="SAHL.X2Designer.Items.UserActivity" Id="50" Name="Instruct Ez-Val Valuer" X2ID="f73da5cc-68ee-4b8c-b6cf-756a2d2cb9b2" Message="Instruct Ez-Val Valuer" StageTransitionMessage="Instruct EZ-Val Valuer [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="ValuationScheduleLightstoneValuationAddView" LinkedActivity="" UseLinkedActivity="False" FromNode="Schedule Valuation Assessment" ToNode="Valuation Assessment Pending ">
          <Access>
            <AccessCollection AccessCollectionItem="Valuations Manager" />
            <AccessCollection AccessCollectionItem="Valuations Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Instruct_Ez_Val_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Instruct_Ez_Val_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Valuations_Data.IsReview = false;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Instruct_Ez_Val_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Instruct EZ-Val Valuer&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Instruct_Ez_Val_Valuer(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4443" DefinitionGroupDescription="Schedule Valuation" DefinitionDescription="Instruct Ez-Val Valuer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="229.429" LocationY="955.1215" Type="SAHL.X2Designer.Items.ExternalActivity" Id="51" Name="EXT_Complete_LS" X2ID="d738667f-4955-41e2-b65c-e11a3f060b78" Message="Lightstone Completed Valuation" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTAssesmentCompleteLS" FromNode="Common Valuation Complete LS" ToNode="Valuation Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Complete_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Complete_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_EXT_Complete_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Complete_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4580" DefinitionGroupDescription="Complete Valuation Assessment" DefinitionDescription="LightStone Valuation Completed" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="347.2054" LocationY="471.1214" Type="SAHL.X2Designer.Items.ExternalActivity" Id="52" Name="EXT_Rejected_LS" X2ID="572a7c87-bd4f-4bb7-896b-0a527b8f9a18" Message="Lightstone Rejected Valuation" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTAssesmentRejectedLS" FromNode="Common Valuation Rejected LS" ToNode="Schedule Valuation Assessment">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Rejected_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Rejected_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_EXT_Rejected_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Rejected_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4578" DefinitionGroupDescription="Withdraw Valuation Assessment" DefinitionDescription="LightStone Valuation Rejected" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="229.455" LocationY="1004.122" Type="SAHL.X2Designer.Items.ExternalActivity" Id="53" Name="EXT_Amended_LS" X2ID="e5ad4f09-4476-469f-afc3-19cdba284394" Message="Lightstone Ammended Valuation" StageTransitionMessage="" Description="" Priority="0" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTAssesmentAmendedLS" FromNode="Common Valuation Amended LS" ToNode="Valuation Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Amended_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Amended_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_EXT_Amended_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Amended_LS(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4581" DefinitionGroupDescription="Complete Valuation Assessment" DefinitionDescription="LightStone Valuation Amended" />
          </BusinessStageTransitions>
        </Activity>
      </Activities>
      <Comments>
        <Comment LocationX="1842.97" LocationY="1354.022" Name="" CommentText="" />
      </Comments>
    </WorkFlow>
    <WorkFlow WorkFlowName="Application Management" LocationX="20" LocationY="70" GenericKeyTypeKey="2">
      <CustomVariables>
        <CustomVariable Name="ApplicationKey" Length="0" Type="integer" />
        <CustomVariable Name="PreviousState" Length="255" Type="string" />
        <CustomVariable Name="GenericKey" Length="0" Type="integer" />
        <CustomVariable Name="CaseOwnerName" Length="255" Type="string" />
        <CustomVariable Name="IsFL" Length="0" Type="bool" />
        <CustomVariable Name="EWorkFolderID" Length="255" Type="string" />
        <CustomVariable Name="IsResub" Length="0" Type="bool" />
        <CustomVariable Name="OfferTypeKey" Length="0" Type="integer" />
        <CustomVariable Name="AppCapIID" Length="0" Type="biginteger" />
        <CustomVariable Name="RequireValuation" Length="0" Type="bool" />
        <CustomVariable Name="AlphaHousingSurveyEmailSent" Length="0" Type="bool" />
      </CustomVariables>
      <ExternalActivities>
        <ExternalActivity Name="CreateInstanceFromAppCapture" Description="" />
        <ExternalActivity Name="MoveAppToHold" Description="" />
        <ExternalActivity Name="ReturnAppFromHold" Description="" />
        <ExternalActivity Name="EXTPipeLineLoanRegister" Description="" />
        <ExternalActivity Name="EXTNTU" Description="" />
        <ExternalActivity Name="EXTReinstateNTU" Description="" />
        <ExternalActivity Name="EXTNTUFinal" Description="" />
        <ExternalActivity Name="EXTResub" Description="" />
        <ExternalActivity Name="EXTValuationComplete" Description="" />
        <ExternalActivity Name="EXTUnregister" Description="" />
        <ExternalActivity Name="EXTArchiveValuation" Description="" />
        <ExternalActivity Name="EXTArchiveFollowup" Description="" />
        <ExternalActivity Name="EXTArchiveMainCase" Description="" />
        <ExternalActivity Name="EXTArchiveQC" Description="" />
        <ExternalActivity Name="EXTDataStore" Description="" />
        <ExternalActivity Name="EXTReferRapidToCredit" Description="" />
        <ExternalActivity Name="EXTUpForFees" Description="" />
        <ExternalActivity Name="EXTHeldOver" Description="" />
        <ExternalActivity Name="EXTDisburseLoan" Description="" />
        <ExternalActivity Name="EXTComplete" Description="" />
        <ExternalActivity Name="EXTStuck" Description="" />
        <ExternalActivity Name="EXTWatchdog" Description="" />
        <ExternalActivity Name="EXTReset30DayTimer" Description="" />
      </ExternalActivities>
      <CustomForms>
        <CustomForm Name="AccountMemoSummary" Description="Account Memo Summary" />
        <CustomForm Name="App_AssignAdmin" Description="Assign Admin" />
        <CustomForm Name="App_FurtherLendingCalculator" Description="Further Loan Rework" />
        <CustomForm Name="ApplicationInOrder" Description="Used by Application in Order and Resubmit to Credit to run rules" />
        <CustomForm Name="ApplicationLoanDetailsUpdate" Description="Rework Application" />
        <CustomForm Name="ApplicationMemoSummary" Description="Memo Summary" />
        <CustomForm Name="CreditScoringSummaryFull" Description="Credit Scoring Summary" />
        <CustomForm Name="DeclineReasonsHistory" Description="Decline Reasons History" />
        <CustomForm Name="Orig_AdminDeclineDisplay" Description="Administrative Decline Reasons" />
        <CustomForm Name="Orig_ApplicationSummaryForResubApplicationCheckRedirect" Description="Application Summary For Resub Application Check" />
        <CustomForm Name="Orig_ApplicationSummaryFurtherLending" Description="FL Application Summary " />
        <CustomForm Name="Orig_ApplicationSummaryRedirect" Description="Application Summary" />
        <CustomForm Name="Orig_AppNTUDisplay" Description="Application Reasons" />
        <CustomForm Name="Orig_Correspondence_AIP" Description="Origination Correspondence AIP" />
        <CustomForm Name="Orig_Correspondence_InstructAttorney_Redirect" Description="Origination Correspondence InstructAttorney Redirect" />
        <CustomForm Name="Orig_Correspondence_LegalRegistrationLetter" Description="Origination Correspondence Legal Registrations Letter" />
        <CustomForm Name="Orig_Correspondence_LOA" Description="Origination Correspondence LOA" />
        <CustomForm Name="Orig_CreditDecision" Description="Credit Decision" />
        <CustomForm Name="Orig_Documents" Description="Documents" />
        <CustomForm Name="Orig_QAComplete" Description="QA Complete" />
        <CustomForm Name="Orig_QACompleteDisplay" Description="QA Query Complete" />
        <CustomForm Name="Orig_QAQuery" Description="Query Application" />
        <CustomForm Name="Orig_QAQueryDisplay" Description="QA Query" />
        <CustomForm Name="Orig_QueryApp" Description="Query Application" />
        <CustomForm Name="Orig_QueryAppDisplay" Description="Processor Query" />
        <CustomForm Name="Orig_ResendInstruction" Description="Resend Instruction" />
        <CustomForm Name="Orig_SelectAttorney" Description="Select Attorney" />
        <CustomForm Name="Orig_SelectRegistrationUser" Description="Select Registration User" />
        <CustomForm Name="ReleaseAndVariationsStartNew" Description="Release And Variations Start New" />
        <CustomForm Name="ResubmitToCredit" Description="ResubmitToCredit" />
        <CustomForm Name="WF_30YearTermConvert" Description="Convert to 30 Year Term" />
        <CustomForm Name="WF_30YearTermDetail" Description="Common 30 Year Term Detail" />
        <CustomForm Name="WF_30YearTermRevert" Description="Revert to 20 Year Term" />
        <CustomForm Name="WF_ApplicationWarnings" Description="Application Warnings" />
        <CustomForm Name="WF_CorrespondenceHistory" Description="Correspondence History" />
        <CustomForm Name="WF_CreateFollowUp" Description="Create Followup" />
        <CustomForm Name="WF_Decline" Description="Origination Decline" />
        <CustomForm Name="WF_FollowUpHold" Description="Follow up Hold" />
        <CustomForm Name="WF_MemoAdd" Description="Memo" />
        <CustomForm Name="WF_MemoAddWithCreditChecks" Description="Used by Motivate to save a memo and run rules" />
        <CustomForm Name="WF_NTU" Description="Origination NTU" />
        <CustomForm Name="WF_NTU_Pipeline" Description="NTU during Pipeline" />
        <CustomForm Name="WF_ReadytoFollowup" Description="Ready to Followup" />
        <CustomForm Name="WF_ReAssign" Description="Reassign User" />
        <CustomForm Name="WF_ReassignOriginatingBranchConsultant" Description="ReAssign Commission Consultant" />
        <CustomForm Name="WF_Resubmission" Description="Resubmission" />
        <CustomForm Name="WF_SendFeedback" Description="Send Feedback" />
        <CustomForm Name="WF_StageTransitionHist" Description="Business Event History" />
        <CustomForm Name="WF_SuretorAdd" Description="Add Suretor to Application" />
        <CustomForm Name="WF_SWD_PricingComparison" Description="Salary with Deduction Pricing Comparison" />
        <CustomForm Name="WF_UpdateFollowup" Description="Update Followup" />
        <CustomForm Name="WorkflowEmploymentTypeConfirmation" Description="Application Employment Confirmation " />
        <CustomForm Name="WorkflowSubmit" Description="" />
        <CustomForm Name="WorkflowYesNo" Description="" />
      </CustomForms>
      <InvisibleAnchorNode LocationX="166.744" LocationY="425.0314" />
      <Clapperboard LocationX="116.2442" LocationY="234.2579" LimitAccessTo="" Subject="" KeyVariable="ApplicationKey" />
      <States>
        <State LocationX="376.6738" LocationY="601.2141" X2ID="a4f74ac1-4010-48e0-afab-a1f23864e846" Type="SAHL.X2Designer.Items.UserState" StateName="Manage Application">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manage Application state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Manage_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manage Application state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Manage_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Manage Application&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="New Business Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_QACompleteDisplay" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="430.6826" LocationY="953.2166" X2ID="b544d2d3-551f-4843-9c75-638efb6752af" Type="SAHL.X2Designer.Items.UserState" StateName="Credit">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Credit&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="ITStaff" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
          </CustomForms>
        </State>
        <State LocationX="975.5486" LocationY="1059.213" X2ID="71ca0fd7-79e3-4aa2-8ba0-2aec946b37cd" Type="SAHL.X2Designer.Items.UserState" StateName="LOA">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the LOA state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    if (!Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;        dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;        dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;        dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;        dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;        dys.Add(&quot;New Business Manager D&quot;);        &#xD;&#xA;&#x9;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;        // Assign the Branch folks back in&#xD;&#xA;        // Assign the Branch folks back in&#xD;&#xA;        WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;LOA&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;    }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the LOA state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;LOA&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="61.55591" LocationY="808.9392" X2ID="4aa59fa1-ec9f-443a-b4f3-04c5b0451b78" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Resubmission">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Resubmission state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Resubmission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Resubmission state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Resubmission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Disbursement" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement Review" />
            <AppliesToCollection AppliesToCollectionItem="Registration Pipeline" />
          </AppliesTo>
        </State>
        <State LocationX="82.60822" LocationY="969.9392" X2ID="b9fed4cb-1ed4-4359-ab73-9d9392bc7123" Type="SAHL.X2Designer.Items.UserState" StateName="Resubmission">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Resubmission state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Resubmission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Resubmission state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Resubmission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Resubmission&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
            <WorkListCollection WorkListCollectionItem="Resubmission Admin" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="Orig_AppNTUDisplay" />
          </CustomForms>
        </State>
        <State LocationX="757.827" LocationY="600.9387" X2ID="e09d44ea-2135-4830-91cb-7a76d7944a9b" Type="SAHL.X2Designer.Items.SystemState" StateName="System Assign Processor" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the System Assign Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_System_Assign_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the System Assign Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_System_Assign_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;System Assign Processor&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="997.6937" LocationY="356.9408" X2ID="8c1ae7e2-fd88-46e2-bf90-7ebd127b5352" Type="SAHL.X2Designer.Items.UserState" StateName="QA">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the QA state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;        ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;        if (Application_Management_Data.OfferTypeKey == 0)&#xD;&#xA;        {&#xD;&#xA;            int tok = common.GetApplicationType((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;            Application_Management_Data.OfferTypeKey = tok;&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        //set require valuation for all cases&#xD;&#xA;        //set to false for Switch and Refinance, so it can get to credit before we pay for a valuation&#xD;&#xA;        if (Application_Management_Data.OfferTypeKey == 6 || Application_Management_Data.OfferTypeKey == 8)&#xD;&#xA;            Application_Management_Data.RequireValuation = false;&#xD;&#xA;        else&#xD;&#xA;            Application_Management_Data.RequireValuation = true;&#xD;&#xA;&#xD;&#xA;        return true;&#x9;&#xD;&#xA;}" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the QA state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;QA&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Credit Underwriter D" />
            <WorkListCollection WorkListCollectionItem="Credit Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
            <WorkListCollection WorkListCollectionItem="QA Administrator D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="1230.844" LocationY="293.94" X2ID="cf58db17-409e-41de-b322-c4bd39c4f753" Type="SAHL.X2Designer.Items.UserState" StateName="Request at QA">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Request at QA state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Request_at_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Request at QA state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Request_at_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Request at QA&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_QAQueryDisplay" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="1229.6" LocationY="601.9402" X2ID="d7f3946b-5d6c-4bd5-965f-6f526f86ff4a" Type="SAHL.X2Designer.Items.UserState" StateName="Issue AIP">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Issue AIP state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Issue_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Issue AIP state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Issue_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Issue AIP&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="996.0067" LocationY="600.9402" X2ID="1ffd07c8-f1c3-4616-aead-9a293e9f1fdb" Type="SAHL.X2Designer.Items.SystemState" StateName="Next Step" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Next Step state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Next_Step(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{ &#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;QA Administrator D&quot;);&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}        &#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Next Step state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Next_Step(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1346.533" LocationY="522.9408" X2ID="62cd183f-805a-480a-a52a-cd68710036c4" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive AIP" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive AIP state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;&#x9;furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.NTU, -1);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive AIP state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive AIP state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="211.9026" LocationY="452.9408" X2ID="3d107fc3-30ca-4ecb-87d3-ab4a206628e9" Type="SAHL.X2Designer.Items.UserState" StateName="Application Query">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Query state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Application_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;appMan.SendEmailToConsultantForQuery((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, instance.ID, 8);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Query state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Application_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Application Query&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_QueryAppDisplay" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="1209.7" LocationY="1059.939" X2ID="aaa314e8-fbfc-4430-b36c-d2fdc6bb37fe" Type="SAHL.X2Designer.Items.UserState" StateName="Signed LOA Review">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Signed LOA Review state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Signed_LOA_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;New Business Manager D&quot;);&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Signed LOA Review state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Signed_LOA_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Signed LOA Review&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations LOA Admin" />
            <WorkListCollection WorkListCollectionItem="Registrations Administrator" />
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="1576.755" LocationY="1059.944" X2ID="de8689b7-68ed-4572-b81b-b567d70678e6" Type="SAHL.X2Designer.Items.UserState" StateName="Application Check">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Check state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Application_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Check state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Application_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Application Check&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations LOA Admin" />
            <WorkListCollection WorkListCollectionItem="Registrations Administrator" />
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="873.5415" LocationY="1716.95" X2ID="d0efce7b-5fb2-482f-b931-5319e5bb9922" Type="SAHL.X2Designer.Items.UserState" StateName="Disbursement">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursement state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Disbursement(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursement state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Disbursement(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Disbursement&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations Administrator" />
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1175.817" LocationY="1848.946" X2ID="37f4e57a-2fdf-4abb-a5dc-65b7dfbc71bd" Type="SAHL.X2Designer.Items.UserState" StateName="Disbursed">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursed state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Disbursed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursed state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Disbursed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Disbursed&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1443.234" LocationY="1636.943" X2ID="23cf05d5-3926-4e6b-8170-03a691a50ff2" Type="SAHL.X2Designer.Items.SystemState" StateName="Attorney Check" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Attorney Check state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Attorney_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Attorney Check state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Attorney_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="456.6401" LocationY="226.834" X2ID="3dda8c44-ba81-4c52-9844-1f9ab5967c63" Type="SAHL.X2Designer.Items.UserState" StateName="Awaiting Application">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Awaiting Application state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Awaiting_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;Application_Management_Data.IsFL = true;&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey); ;&#xD;&#xA;&#x9;instance.Name = Application_Management_Data.ApplicationKey.ToString();&#xD;&#xA;&#x9;Application_Management_Data.IsResub = false;&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Awaiting Application state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Awaiting_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Awaiting Application&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Manager" />
            <WorkListCollection WorkListCollectionItem="HelpDesk" />
          </WorkList>
          <TrackList>
            <TrackListCollection TrackListCollectionItem="FL Application Processor" />
          </TrackList>
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryFurtherLending" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="122.6294" LocationY="600.9409" X2ID="680b97da-bbc8-4ea4-9897-055bb1431d1b" Type="SAHL.X2Designer.Items.UserState" StateName="Arrears">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Arrears state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Arrears(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Arrears state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Arrears(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Arrears&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Collections Admin" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_CreditDecision" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="1429.087" LocationY="293.94" X2ID="22aec60a-ca31-4899-8055-8ae8c4f4a7fc" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive QA Query" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive QA Query state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_QA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.NTU, -1);&#xD;&#xA;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive QA Query state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_QA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive QA Query state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_QA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="610.9363" LocationY="357.6073" X2ID="15f5f059-7e63-453d-acf3-beec76e7e762" Type="SAHL.X2Designer.Items.SystemState" StateName="Assign at QA" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Assign at QA state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Assign_at_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Assign at QA state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Assign_at_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;// Switch Loans never goto QA so dont RR.&#xD;&#xA;&#x9;if (Application_Management_Data.OfferTypeKey == 6)&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;List&lt;int&gt; OSKeys = new List&lt;int&gt;();&#xD;&#xA;&#x9;OSKeys.Add(1007);&#xD;&#xA;&#x9;OSKeys.Add(1008);&#xD;&#xA;&#x9;string User = string.Empty;&#xD;&#xA;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeysByProcess((IDomainMessageCollection)messages, &quot;QA Administrator D&quot;, Application_Management_Data.ApplicationKey, OSKeys, instance.ID, &quot;Assign at QA&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.QAAdministrator);&#xD;&#xA;&#x9;Application_Management_Data.PreviousState = &quot;Assign at QA&quot;;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="553.6479" LocationY="163.8339" X2ID="62247ff4-271e-409b-911c-cf739223f40f" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive No App Form" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive No App Form state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_No_App_Form(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();     &#x9;&#xD;&#xA;&#x9;ICommon  common =   DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey,(int)SAHL.Common.Globals.OfferStatuses.NTU, -1);&#xD;&#xA;&#x9;furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive No App Form state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_No_App_Form(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive No App Form state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_No_App_Form(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1117.016" LocationY="900.8485" X2ID="a6589103-a273-44f0-9daf-e9a6498d9e7f" Type="SAHL.X2Designer.Items.UserState" StateName="LOA Query">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the LOA Query state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_LOA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the LOA Query state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_LOA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="963.1188" LocationY="889.8483" X2ID="b857d042-da4d-494e-a216-5e0b217ef1ea" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Exp LOA" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Exp LOA state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Exp_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; ICommon  common =   DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;(); &#xD;&#xA; &#xD;&#xA; common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 4, -1);&#xD;&#xA; &#xD;&#xA; if (Application_Management_Data.IsFL)&#xD;&#xA; {&#xD;&#xA;&#x9;furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA; }&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Exp LOA state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Exp_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Exp LOA state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Exp_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="855.7627" LocationY="1947.854" X2ID="fe2d9c41-eeb5-49fb-874d-d33786a8c58e" Type="SAHL.X2Designer.Items.UserState" StateName="Disbursement Review">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursement Review state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Disbursement_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disbursement Review state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Disbursement_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Disbursement Review&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1685.314" LocationY="1873.349" X2ID="9c20e534-a0e9-405e-90e1-e4fec4a9eda0" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Translate ">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Translate  state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Translate_(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Translate  state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Translate_(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
          </AppliesTo>
        </State>
        <State LocationX="1879.687" LocationY="1873.349" X2ID="8252c4b2-bce8-4216-8f26-101dec9b902b" Type="SAHL.X2Designer.Items.UserState" StateName="Translate Conditions">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Translate Conditions state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Translate_Conditions(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;string AssignedUser = string.Empty;&#xD;&#xA;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;Translate Conditions D&quot;, Application_Management_Data.ApplicationKey, 1539, instance.ID, &quot;Translate Conditions&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.TranslateConditions);&#xD;&#xA;&#x9;//IX2ReturnData ret = BaseHelper.RoundRobinAssignForGivenOrgStructure((IDomainMessageCollection)messages, out AssignedUser, &quot;Translate Conditions D&quot;,Application_Management_Data.ApplicationKey,  1539);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Translate Conditions state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Translate_Conditions(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Translate Conditions D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="2113.136" LocationY="1873.349" X2ID="d59086b5-65cf-40b3-9a6f-141b927cea34" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Translate" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Translate state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Translate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Translate state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Translate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Translate state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Translate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1925.372" LocationY="1113.348" X2ID="c7ecf70b-f60c-4881-8c77-44612f394b9f" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Resend Instruction">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Resend Instruction state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Resend_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Resend Instruction state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Resend_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Registration Pipeline" />
          </AppliesTo>
        </State>
        <State LocationX="1958.541" LocationY="1327.35" X2ID="1411e6c5-2978-4843-81f2-686a9371d2f0" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Reassign">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Reassign state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Reassign(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Reassign state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Reassign(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Signed LOA Review" />
            <AppliesToCollection AppliesToCollectionItem="Application Check" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement" />
            <AppliesToCollection AppliesToCollectionItem="Disbursed" />
            <AppliesToCollection AppliesToCollectionItem="Arrears" />
            <AppliesToCollection AppliesToCollectionItem="LOA Query" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement Review" />
            <AppliesToCollection AppliesToCollectionItem="Registration Pipeline" />
          </AppliesTo>
        </State>
        <State LocationX="1559.043" LocationY="265.3487" X2ID="bae4af25-0f37-48f8-8b49-5c6e4c33c661" Type="SAHL.X2Designer.Items.CommonState" StateName="Common 2nd Valuation">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_2nd_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common 2nd Valuation state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_2nd_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Further Info Request" />
            <AppliesToCollection AppliesToCollectionItem="Registration Pipeline" />
          </AppliesTo>
        </State>
        <State LocationX="1547.342" LocationY="336.3489" X2ID="93bcc9da-01b2-4c23-9d58-634c4cf1af2b" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Valuation Review">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Valuation Review state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Valuation_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Valuation Review state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Valuation_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
          </AppliesTo>
        </State>
        <State LocationX="1924.127" LocationY="995.3485" X2ID="e1655262-37e0-4eea-bc4d-73bb32905c79" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Rework Application">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Rework Application state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Rework Application state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
          </AppliesTo>
        </State>
        <State LocationX="216.3197" LocationY="1458.35" X2ID="f507414a-d0d0-4d30-9fc4-887165b804e1" Type="SAHL.X2Designer.Items.UserState" StateName="Declined by Credit">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Declined by Credit state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Declined_by_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 5, -1);&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;// Assign the Branch folks back in&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;Declined by Credit&quot;,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;// Create a Manager Role, after the user assignment&#xD;&#xA;&#x9;&#x9;int ManagerOSKey = WorkflowAssignment.GetBranchManagerOrgStructureKey((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.AssignBranchManagerForOrgStrucKey((IDomainMessageCollection)messages, instance.ID, &quot;Branch Manager D&quot;, ManagerOSKey, Application_Management_Data.ApplicationKey, &quot;Declined By Credit&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;Declined By Credit&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;common.CreateNewRevision((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA; &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Declined by Credit state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Declined_by_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Declined by Credit&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="DeclineReasonsHistory" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="210.8457" LocationY="1755.349" X2ID="83acdf1b-2d20-4c36-9eb6-d4b137bbf05f" Type="SAHL.X2Designer.Items.UserState" StateName="Further Info Request">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Further Info Request state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Further_Info_Request(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    // reactiveate the NBP users.&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Further Info Request&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.NewBusinessProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;Further Info Request&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Further Info Request state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Further_Info_Request(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Further Info Request&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="DeclineReasonsHistory" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="461.2336" LocationY="1755.345" X2ID="5799ca61-9010-4ebd-96b8-a538fb6a0e6a" Type="SAHL.X2Designer.Items.SystemState" StateName="Back to Credit" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Back to Credit state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Back_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Back to Credit state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Back_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="253.2337" LocationY="1969.345" X2ID="88aa460f-1029-4f4c-ab5f-06fd4cabde46" Type="SAHL.X2Designer.Items.UserState" StateName="Disputes">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disputes state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Disputes(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    if (!Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;        dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;        dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;        dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;        dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;        dys.Add(&quot;New Business Manager D&quot;);&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        // Assign the Branch folks back in&#xD;&#xA;        WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;Disputes&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;    }&#xD;&#xA;    else&#xD;&#xA;    {&#xD;&#xA;        WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;Disputes&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;    }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Disputes state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Disputes(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Management_Data.PreviousState = &quot;Disputes&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="AccountMemoSummary" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="230.6245" LocationY="1305.349" X2ID="8a273da7-e91d-4240-8035-3a436c1d7575" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Decline Bin" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline Bin state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Decline_Bin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();          &#xD;&#xA;    &#xD;&#xA;    IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#xD;&#xA;    if (Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;        furtherLending.RemoveDetailTypes((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    if (!appMan.ArchiveChildInstances((IDomainMessageCollection)messages, instance.ID, param.ADUserName))&#xD;&#xA;    {&#xD;&#xA;        return false;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 5, -1);&#xD;&#xA;    &#xD;&#xA;&#xD;&#xA;    if (Application_Management_Data.IsResub)&#xD;&#xA;    {&#xD;&#xA;        if (!string.IsNullOrEmpty(Application_Management_Data.EWorkFolderID))&#xD;&#xA;        {&#xD;&#xA;            string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;            if (common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2DECLINEFINAL, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName))&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9; appMan.SendNTUFinalResubMail((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey); &#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;            else&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;return false;&#x9;&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline Bin state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Decline_Bin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline Bin state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Decline_Bin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="265.8458" LocationY="2193.352" X2ID="77550dad-3ddc-4686-bbd6-cbdf5f570771" Type="SAHL.X2Designer.Items.CommonState" StateName="Common NTU">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common NTU state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common NTU state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
            <AppliesToCollection AppliesToCollectionItem="Further Info Request" />
            <AppliesToCollection AppliesToCollectionItem="Disputes" />
            <AppliesToCollection AppliesToCollectionItem="Application Hold" />
            <AppliesToCollection AppliesToCollectionItem="Signed LOA Review" />
            <AppliesToCollection AppliesToCollectionItem="Application Check" />
          </AppliesTo>
        </State>
        <State LocationX="93.72778" LocationY="2524.347" X2ID="69ca128a-3e53-4e1e-ba20-4b0c40042e8d" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
          </AppliesTo>
        </State>
        <State LocationX="292.6296" LocationY="2350.351" X2ID="84c623ec-1a14-4f96-9925-ff000fa2bb31" Type="SAHL.X2Designer.Items.UserState" StateName="NTU">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the NTU state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    // Assign the Branch folks back in&#xD;&#xA;&#x9;    // Assign the Branch folks back in&#xD;&#xA;&#x9;    WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;NTU&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;NTU&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.NewBusinessProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;NTU&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the NTU state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //Application_Management_Data.PreviousState = &quot;NTU&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_AppNTUDisplay" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="294.6296" LocationY="2524.347" X2ID="655b1c6c-fb7f-4696-949e-cabed020dc45" Type="SAHL.X2Designer.Items.UserState" StateName="Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 5, -1);        &#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;appMan.SendEmailToConsultantForQuery((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, instance.ID, 2);&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //Application_Management_Data.PreviousState = &quot;Decline&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_AdminDeclineDisplay" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="95.03247" LocationY="2436.35" X2ID="da190469-2bba-49c1-942b-78390a8540cb" Type="SAHL.X2Designer.Items.SystemState" StateName="Return to sender" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Return to sender state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Return_to_sender(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 1, -1);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Return to sender state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Return_to_sender(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Return to sender state is autoforwarded.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetForwardStateName_Return_to_sender(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Application_Management_Data.PreviousState;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="507.5486" LocationY="2524.347" X2ID="a93ebd96-2b41-4234-908c-47772b5c15a3" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Decline" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;&#x9;&#x9;furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;&#x9;furtherLending.RemoveDetailTypes((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;IApplicationManagement appManagementService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 5, -1);&#xD;&#xA;&#x9;&#x9;if (!appManagementService.ArchiveChildInstances((IDomainMessageCollection)messages, instance.ID, param.ADUserName))&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;New Business Manager D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="529.0547" LocationY="2351.074" X2ID="d952ed86-e23d-4898-a8c3-248cddab3710" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive NTU" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive NTU state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{ &#xD;&#xA;&#x9;&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;furtherLending.RemoveDetailTypes((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;appMan.RemoveRegistrationProcessDetailTypes((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;appMan.SetAccountStatusToApplicationPriorToInstructAttorney((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey,param.ADUserName);&#xD;&#xA;&#x9;&#x9;appMan.RemoveAccountFromRegMail((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;if (!appMan.ArchiveChildInstances((IDomainMessageCollection)messages, instance.ID, param.ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 4, -1);&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;New Business Manager D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive NTU state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive NTU state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="691.9525" LocationY="227.2427" X2ID="7590d41e-7a35-4952-a971-8e11e4ef4019" Type="SAHL.X2Designer.Items.SystemState" StateName="Multiple Applications" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Multiple Applications state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Multiple_Applications(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Multiple Applications state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Multiple_Applications(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1078.373" LocationY="148.8646" X2ID="dddbda15-10f5-4d58-a464-401ff458f6e5" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Hold Application">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Hold Application state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Hold_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Hold Application state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Hold_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
            <AppliesToCollection AppliesToCollectionItem="Arrears" />
          </AppliesTo>
        </State>
        <State LocationX="969.5996" LocationY="227.199" X2ID="bf7dabce-613e-469a-9c1e-fcc7b4595184" Type="SAHL.X2Designer.Items.UserState" StateName="Application Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Application_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Application_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="FL Application Processor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
          </CustomForms>
        </State>
        <State LocationX="1208.957" LocationY="227.1988" X2ID="3e26184a-9653-406a-a5e5-13e49d1f7520" Type="SAHL.X2Designer.Items.SystemState" StateName="ContinueLoan" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ContinueLoan state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_ContinueLoan(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ContinueLoan state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_ContinueLoan(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the ContinueLoan state is autoforwarded.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetForwardStateName_ContinueLoan(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Application_Management_Data.PreviousState;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="746.7927" LocationY="2384.701" X2ID="f20a8dfe-2323-41e1-9e4d-2c6d2af3163a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Arrears" />
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="Translate Conditions" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="LOA Query" />
            <AppliesToCollection AppliesToCollectionItem="Signed LOA Review" />
            <AppliesToCollection AppliesToCollectionItem="Disbursed" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement Review" />
            <AppliesToCollection AppliesToCollectionItem="Declined by Credit" />
            <AppliesToCollection AppliesToCollectionItem="Disputes" />
            <AppliesToCollection AppliesToCollectionItem="Further Info Request" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
          </AppliesTo>
        </State>
        <State LocationX="984.8071" LocationY="2374.945" X2ID="06144c10-e38f-43d9-8e60-253ce43d61bb" Type="SAHL.X2Designer.Items.UserState" StateName="Followup Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Followup_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Followup_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="ApplicationMemoSummary" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1222.95" LocationY="2373.942" X2ID="92a904de-31c9-45e2-889e-936b9f1c0dea" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Followup Complete" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Complete state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Followup_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;    WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Complete state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Followup_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Complete state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Followup_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1661.823" LocationY="800.2728" X2ID="cdbcc853-3e53-45de-9a58-4f75e21b0cc0" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Valuation Complete" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Valuation Complete state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Valuation_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Valuation Complete state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Valuation_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Valuation Complete state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Valuation_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="719.6223" LocationY="1636.948" X2ID="00e7180e-a7aa-483e-a35f-c338766c9a21" Type="SAHL.X2Designer.Items.UserState" StateName="Registration Pipeline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Registration Pipeline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Registration_Pipeline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;if(!Application_Management_Data.AlphaHousingSurveyEmailSent)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;&#x9;bool alphaHousingEmailSent = false;&#xD;&#xA;&#x9;&#x9;appMan.SendAlphaHousingSurveyEmail((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.ADUserName, out alphaHousingEmailSent);&#xD;&#xA;&#x9;&#x9;if(alphaHousingEmailSent)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;Application_Management_Data.AlphaHousingSurveyEmailSent = true;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Registration Pipeline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Registration_Pipeline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;Application_Management_Data.PreviousState = &quot;Registration Pipeline&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations LOA Admin" />
            <WorkListCollection WorkListCollectionItem="Registrations Administrator" />
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
            <WorkListCollection WorkListCollectionItem="Resubmission Admin" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1685.796" LocationY="150.2735" X2ID="cdd10831-eb61-4bf4-b205-534b45211b75" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive FL" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive FL state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_FL(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Application_Management_Data.IsFL)&#xD;&#xA; {&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;  &#xD;&#xA; }&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive FL state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_FL(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive FL state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_FL(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1399.511" LocationY="1849.35" X2ID="603aa571-e992-4102-a90e-f811bf10ccee" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Origination" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Origination state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Origination(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;&#x9;{ &#xD;&#xA;&#x9;&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;furtherLending.FLCompleteUnholdNextApplicationWhereApplicable((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;furtherLending.SuretySignedConfirmed((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;if (!appMan.ArchiveChildInstances((IDomainMessageCollection)messages, instance.ID, param.ADUserName))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;furtherLending.RemoveDetailTypes((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;New Business Manager D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;string AssignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;AssignedTo = WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;&#x9;&#x9;//BaseHelper.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, out AssignedTo, Application_Management_Data.ApplicationKey, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;&#x9;&#x9;return common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2DISBURSEMENTTIMER, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName);&#xD;&#xA;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Origination state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Origination(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Origination state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Origination(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1103.87" LocationY="1637.351" X2ID="38879316-864e-44dd-bc5d-922e075921ee" Type="SAHL.X2Designer.Items.SystemState" StateName="CheckQCAndSendToPipeline" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_CheckQCAndSendToPipeline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the CheckQCAndSendToPipeline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_CheckQCAndSendToPipeline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="973.3468" LocationY="2532.351" X2ID="d48940fb-2681-4eb4-a90c-907bc39ef8c9" Type="SAHL.X2Designer.Items.UserState" StateName="Ready To Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Ready To Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Ready_To_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Ready To Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Ready_To_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="New Business Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Processor D" />
            <WorkListCollection WorkListCollectionItem="FL Supervisor D" />
            <WorkListCollection WorkListCollectionItem="FL Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="WF_ReadytoFollowup" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="2095.485" LocationY="996.3482" X2ID="4f7579fd-829a-4d88-b7c4-f5ab82d784e1" Type="SAHL.X2Designer.Items.CommonState" StateName="Common FL Rework Application">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common FL Rework Application state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_FL_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common FL Rework Application state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_FL_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
          </AppliesTo>
        </State>
        <State LocationX="1036.126" LocationY="1502.349" X2ID="016c3439-28b9-4c71-ba63-7d4520f069b8" Type="SAHL.X2Designer.Items.UserState" StateName="Instruct Failed">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Instruct Failed state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Instruct_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Instruct Failed state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Instruct_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations LOA Admin" />
            <WorkListCollection WorkListCollectionItem="Registrations Administrator" />
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
          </CustomForms>
        </State>
        <State LocationX="1949.191" LocationY="1219.349" X2ID="c540b1e9-0d50-4ac1-ba75-216f23388d00" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Assign Admin">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Assign Admin state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Assign_Admin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Assign Admin state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Assign_Admin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Declined by Credit" />
            <AppliesToCollection AppliesToCollectionItem="Disputes" />
          </AppliesTo>
        </State>
        <State LocationX="589.8015" LocationY="862.015" X2ID="ff83abdc-0eef-4f46-99b1-469613bb086b" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Return Processor">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Return Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Return_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Return Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Return_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="Signed LOA Review" />
            <AppliesToCollection AppliesToCollectionItem="Application Check" />
            <AppliesToCollection AppliesToCollectionItem="LOA Query" />
            <AppliesToCollection AppliesToCollectionItem="Declined by Credit" />
            <AppliesToCollection AppliesToCollectionItem="Further Info Request" />
          </AppliesTo>
        </State>
        <State LocationX="612.1686" LocationY="1547.579" X2ID="8f7b7079-0026-4dca-a308-1b82aa246975" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Relodge">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Relodge state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Relodge(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Relodge state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Relodge(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Disbursement" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement Review" />
          </AppliesTo>
        </State>
        <State LocationX="1329.335" LocationY="2473.682" X2ID="afbcc439-dd55-4e39-97a6-86f0bbef68b4" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Archive Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Archive_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Archive_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Followup Hold" />
            <AppliesToCollection AppliesToCollectionItem="Ready To Followup" />
          </AppliesTo>
        </State>
        <State LocationX="2079.271" LocationY="1788.681" X2ID="7de77ff5-5eea-4783-a989-97cc0eb179e0" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Manual Archive" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Manual_Archive(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manual Archive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Manual_Archive(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manual Archive state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Manual_Archive(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1828.984" LocationY="1788.681" X2ID="86f865c6-fc35-4943-8c2a-ffd645f43a52" Type="SAHL.X2Designer.Items.CommonState" StateName="CommonArchiveMain">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the CommonArchiveMain state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_CommonArchiveMain(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the CommonArchiveMain state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_CommonArchiveMain(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Credit" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Application Check" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement" />
            <AppliesToCollection AppliesToCollectionItem="Disbursed" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
            <AppliesToCollection AppliesToCollectionItem="Arrears" />
            <AppliesToCollection AppliesToCollectionItem="LOA Query" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement Review" />
            <AppliesToCollection AppliesToCollectionItem="Declined by Credit" />
            <AppliesToCollection AppliesToCollectionItem="Further Info Request" />
            <AppliesToCollection AppliesToCollectionItem="Disputes" />
            <AppliesToCollection AppliesToCollectionItem="NTU" />
            <AppliesToCollection AppliesToCollectionItem="Decline" />
            <AppliesToCollection AppliesToCollectionItem="Application Hold" />
            <AppliesToCollection AppliesToCollectionItem="Registration Pipeline" />
            <AppliesToCollection AppliesToCollectionItem="Instruct Failed" />
            <AppliesToCollection AppliesToCollectionItem="Translate Conditions" />
          </AppliesTo>
        </State>
        <State LocationX="1360.833" LocationY="800.205" X2ID="4f1892de-ebe4-4412-8c9a-36d62ee66c56" Type="SAHL.X2Designer.Items.HoldState" StateName="Valuation Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Valuation_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Valuation_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="786.6483" LocationY="1036.682" X2ID="8bec703d-2c83-4a65-8c89-4f56712f5607" Type="SAHL.X2Designer.Items.HoldState" StateName="Send to FL Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Send to FL Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Send_to_FL_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Send to FL Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Send_to_FL_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="483.5261" LocationY="1112.682" X2ID="8057f06f-a077-468d-9558-165db2325fb8" Type="SAHL.X2Designer.Items.HoldState" StateName="Rapid Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Rapid Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Rapid_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Rapid Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Rapid_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="398.526" LocationY="1114.683" X2ID="3c894dff-aeac-447b-8eed-0cef71f2fef8" Type="SAHL.X2Designer.Items.HoldState" StateName="Credit Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Credit_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Credit Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Credit_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="445.4375" LocationY="1378.682" X2ID="514b9ed4-4559-4009-bfd7-78db4706e7db" Type="SAHL.X2Designer.Items.HoldState" StateName="Back To Credit Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Back To Credit Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Back_To_Credit_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Back To Credit Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Back_To_Credit_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="1232.495" LocationY="1546.682" X2ID="39fe64a4-4515-403e-aa42-3bb2971a13d9" Type="SAHL.X2Designer.Items.HoldState" StateName="QuickCash Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the QuickCash Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_QuickCash_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the QuickCash Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_QuickCash_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="1983.025" LocationY="197.6818" X2ID="a70cad6b-87f1-49b5-a4b6-85b3b7967c91" Type="SAHL.X2Designer.Items.HoldState" StateName="Further Valuation Required">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Further Valuation Required state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Further_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Further Valuation Required state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Further_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="1968.699" LocationY="404.6821" X2ID="c6fd443e-668b-4cfe-9ae4-f330914fadae" Type="SAHL.X2Designer.Items.HoldState" StateName="Valuation Review Required">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Review Required state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Valuation_Review_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Valuation Review Required state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Valuation_Review_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="634.8801" LocationY="1037.682" X2ID="2d1b44fa-fc8a-4883-acac-a17ff9a8397c" Type="SAHL.X2Designer.Items.HoldState" StateName="Rapid Post Credit Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Rapid Post Credit Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Rapid_Post_Credit_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Rapid Post Credit Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Rapid_Post_Credit_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
          <CustomForms />
        </State>
        <State LocationX="83.125" LocationY="2350.909" X2ID="231f00c6-c3e6-4630-9736-992d79354478" Type="SAHL.X2Designer.Items.CommonState" StateName="PipeLine NTU">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the PipeLine NTU state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_PipeLine_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the PipeLine NTU state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_PipeLine_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement" />
            <AppliesToCollection AppliesToCollectionItem="Disbursement Review" />
            <AppliesToCollection AppliesToCollectionItem="Registration Pipeline" />
          </AppliesTo>
        </State>
        <State LocationX="1734.475" LocationY="1693.682" X2ID="36354d7c-4ef9-4e20-87af-0c65a3a3e45f" Type="SAHL.X2Designer.Items.UserState" StateName="Resub Application Check">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Resub Application Check state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Resub_Application_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Resub Application Check state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Resub_Application_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations LOA Admin" />
            <WorkListCollection WorkListCollectionItem="Registrations Administrator" />
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryForResubApplicationCheckRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="1274.84" LocationY="1700.682" X2ID="5e4d1203-a6d1-4aec-a25c-1d81695d1d1a" Type="SAHL.X2Designer.Items.UserState" StateName="Account Create Fail Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Account_Create_Fail_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Account_Create_Fail_Hold(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Registrations LOA Admin" />
            <WorkListCollection WorkListCollectionItem="Registrations Administrator" />
            <WorkListCollection WorkListCollectionItem="Registrations Manager" />
            <WorkListCollection WorkListCollectionItem="Registrations Supervisor" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
          </CustomForms>
        </State>
        <State LocationX="2103.532" LocationY="1113.682" X2ID="e9724439-c9a1-453a-80f4-795c59d90c62" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Reload Case Name">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Reload_Case_Name(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Reload_Case_Name(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
          </AppliesTo>
        </State>
        <State LocationX="774.9636" LocationY="850.6821" X2ID="487af3d3-acb7-4d01-8914-6fd8c51d50be" Type="SAHL.X2Designer.Items.SystemState" StateName="RetManageApp" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_RetManageApp(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_RetManageApp(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="public string GetForwardStateName_RetManageApp(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return (&quot;Manage Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="891.5261" LocationY="782.6821" X2ID="a036fe16-ae04-44c0-8ec7-b8987c73d4d1" Type="SAHL.X2Designer.Items.SystemState" StateName="Check Val" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Check_Val(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Check_Val(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1840.206" LocationY="265.6818" X2ID="c8abbc43-1eaf-4afa-a711-a3d962c60411" Type="SAHL.X2Designer.Items.SystemState" StateName="SysFurtherVal" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_SysFurtherVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_SysFurtherVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="2055.598" LocationY="297.682" X2ID="8ad3ed0a-9675-4b0f-9f8e-3e592b993c23" Type="SAHL.X2Designer.Items.SystemState" StateName="ReturnToSender" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_ReturnToSender(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_ReturnToSender(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="public string GetForwardStateName_ReturnToSender(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Application_Management_Data.PreviousState;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1843.877" LocationY="336.6821" X2ID="493cddbf-1bd4-4a81-9669-738773ad5672" Type="SAHL.X2Designer.Items.SystemState" StateName="SysReviewVal" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_SysReviewVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_SysReviewVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="2131.521" LocationY="1211.682" X2ID="41a1055d-2f02-4b24-a4da-aebdc5f1d879" Type="SAHL.X2Designer.Items.CommonState" StateName="Common OnStuck">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_OnStuck(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_OnStuck(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="System Assign Processor" />
            <AppliesToCollection AppliesToCollectionItem="Next Step" />
            <AppliesToCollection AppliesToCollectionItem="Attorney Check" />
            <AppliesToCollection AppliesToCollectionItem="Assign at QA" />
            <AppliesToCollection AppliesToCollectionItem="Back to Credit" />
            <AppliesToCollection AppliesToCollectionItem="Multiple Applications" />
            <AppliesToCollection AppliesToCollectionItem="CheckQCAndSendToPipeline" />
            <AppliesToCollection AppliesToCollectionItem="RetManageApp" />
            <AppliesToCollection AppliesToCollectionItem="Check Val" />
          </AppliesTo>
        </State>
        <State LocationX="2113.81" LocationY="889.6854" X2ID="116fcadd-d19c-484c-abe7-58129790099a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Branch Rework ">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Branch_Rework_(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Rework Application state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Branch_Rework_(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
          </AppliesTo>
        </State>
        <State LocationX="861.5261" LocationY="2464.685" X2ID="9fe0c214-d52e-41e1-9832-d557660ee324" Type="SAHL.X2Designer.Items.SystemState" StateName="State99" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_State99(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_State99(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="751.9114" LocationY="2536.018" X2ID="fe8596e7-e872-4c31-9de9-4f6e6b1bd2ae" Type="SAHL.X2Designer.Items.SystemState" StateName="FollowupReturn" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_FollowupReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_FollowupReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="public string GetForwardStateName_FollowupReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Application_Management_Data.PreviousState;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="2101.356" LocationY="1328.748" X2ID="0b7881ae-8550-4678-ae52-efa18551586e" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Reassign Commission">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Reassign_Commission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Reassign_Commission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Signed LOA Review" />
            <AppliesToCollection AppliesToCollectionItem="LOA Query" />
            <AppliesToCollection AppliesToCollectionItem="Resub Application Check" />
          </AppliesTo>
        </State>
        <State LocationX="20" LocationY="297.7734" X2ID="661eaa7d-d82d-447b-b49c-e83433d36f6c" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Processor" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;    DYs.Add(&quot;FL Processor D&quot;);&#xD;&#xA;    DYs.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;    DYs.Add(&quot;FL Manager D&quot;);&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, DYs,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;    // get current user assigned to this case, get source id, assign user to source id in WA as this case is heading back to AppMan&#xD;&#xA;    //WorkflowAssignment.ReassignParentMapToCurrentUser((IDomainMessageCollection)messages, instance.ID, (Int64)instance.SourceInstanceID, Application_Management_Data.ApplicationKey, &quot;Archive Processor&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#xD;&#xA;    string ADUserName = WorkflowAssignment.GetLatestUserAcrossInstances((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, 157, &quot;FL Processor D&quot;, &quot;Archive Processor&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    if (ADUserName == null || ADUserName == string.Empty || ADUserName.Length == 0)&#xD;&#xA;    {&#xD;&#xA;        //WorkflowAssignment.X2RoundRobinForGivenOSKeys((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, (Int64)instance.SourceInstanceID, &quot;Archive Processor&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;        WorkflowAssignment.X2RoundRobinForPointerDescription((IDomainMessageCollection)messages, (Int64)instance.SourceInstanceID, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor, Application_Management_Data.ApplicationKey, &quot;FL Processor D&quot;, &quot;Archive Processor&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    }&#xD;&#xA;    else&#xD;&#xA;    {&#xD;&#xA;        WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, (Int64)instance.SourceInstanceID, Application_Management_Data.ApplicationKey, ADUserName, 157, 857, &quot;Archive Processor&quot;);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    return true;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Processor state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="2126.308" LocationY="709.1821" X2ID="532daa34-b7a3-4431-8dac-9f2c5f118ffc" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Lightstone AVM">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Lightstone_AVM(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Lightstone_AVM(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
          </AppliesTo>
        </State>
        <State LocationX="126.0859" LocationY="2662.273" X2ID="99e77658-af07-4b34-a15c-0b22183a8f19" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Credit Score Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Credit_Score_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Credit_Score_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo />
        </State>
        <State LocationX="1839.701" LocationY="605.0463" X2ID="190b49bd-7fd7-4903-bf8f-d6e4b906d801" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Application Employment Type Confirmation">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Application_Employment_Type_Confirmation(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Application_Employment_Type_Confirmation(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
          </AppliesTo>
        </State>
        <State LocationX="785.3594" LocationY="1333.273" X2ID="8b33b298-11b8-47d7-beec-a9ffa1bbc281" Type="SAHL.X2Designer.Items.SystemState" StateName="Check Application Type" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Check_Application_Type(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Check_Application_Type(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1686.659" LocationY="611.2733" X2ID="4f5d7687-8dd1-43cc-803d-2a4058b84192" Type="SAHL.X2Designer.Items.SystemState" StateName="Valuation Return" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Valuation_Return(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Valuation_Return(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="522.8568" LocationY="2151.682" X2ID="2ed02ca8-13cd-4ca3-a866-6aa42d68c721" Type="SAHL.X2Designer.Items.CommonState" StateName="HelpDesk NTU">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_HelpDesk_NTU(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_HelpDesk_NTU(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Awaiting Application" />
          </AppliesTo>
        </State>
        <State LocationX="1881.005" LocationY="1416.5" X2ID="446511bb-22e6-4ee8-a514-fe6233d03d29" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Send Feedback">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Send_Feedback(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Send_Feedback(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Decline" />
            <AppliesToCollection AppliesToCollectionItem="Declined by Credit" />
            <AppliesToCollection AppliesToCollectionItem="Disputes" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="LOA Query" />
            <AppliesToCollection AppliesToCollectionItem="NTU" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
          </AppliesTo>
        </State>
        <State LocationX="2075.711" LocationY="1546.5" X2ID="6259f62d-83bf-416c-a64d-e8f7e3cae55a" Type="SAHL.X2Designer.Items.CommonState" StateName="Common 30 Year Term Detail">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
          </AppliesTo>
        </State>
        <State LocationX="2067.138" LocationY="1654.5" X2ID="e7c263d3-54ef-4eb8-b679-74dc36397452" Type="SAHL.X2Designer.Items.CommonState" StateName="Common SWD Pricing Comparison">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manage Application" />
            <AppliesToCollection AppliesToCollectionItem="LOA" />
            <AppliesToCollection AppliesToCollectionItem="Resubmission" />
            <AppliesToCollection AppliesToCollectionItem="QA" />
            <AppliesToCollection AppliesToCollectionItem="Request at QA" />
            <AppliesToCollection AppliesToCollectionItem="Issue AIP" />
            <AppliesToCollection AppliesToCollectionItem="Application Query" />
            <AppliesToCollection AppliesToCollectionItem="Application Check" />
            <AppliesToCollection AppliesToCollectionItem="LOA Query" />
            <AppliesToCollection AppliesToCollectionItem="Registration Pipeline" />
            <AppliesToCollection AppliesToCollectionItem="Instruct Failed" />
            <AppliesToCollection AppliesToCollectionItem="Resub Application Check" />
            <AppliesToCollection AppliesToCollectionItem="Account Create Fail Hold" />
          </AppliesTo>
        </State>
      </States>
      <Activities>
        <Activity LocationX="434.0244" LocationY="365.7305" Type="SAHL.X2Designer.Items.ExternalActivity" Id="2" Name="Proceed with Application" X2ID="93454af5-a0a9-4bdc-a62e-386f2f5af8a5" Message="The case moved to the Switch Channel" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="CreateInstanceFromAppCapture" FromNode="ClapperBoard" ToNode="Assign at QA">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Proceed_with_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Proceed_with_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;&#x9;instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Name = Application_Management_Data.ApplicationKey.ToString();&#xD;&#xA;&#x9;Application_Management_Data.IsResub = false;&#xD;&#xA;&#x9;int tok = common.GetApplicationType((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;Application_Management_Data.OfferTypeKey = tok;&#xD;&#xA;&#x9;return true;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Proceed with Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Proceed_with_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Proceed_with_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2101" DefinitionGroupDescription="New Application" DefinitionDescription="Proceed with Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="322.7158" LocationY="819.2141" Type="SAHL.X2Designer.Items.UserActivity" Id="15" Name="Application in Order" X2ID="92db70b8-3d8c-4ec1-b71b-54da4fa918ca" Message="Application in Order" StageTransitionMessage="Application in Order [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="ApplicationInOrder" LinkedActivity="" UseLinkedActivity="False" FromNode="Manage Application" ToNode="Credit">
          <Access>
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Application_in_Order(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Application_in_Order(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#x9;&#xD;&#xA;&#x9;/*&#xD;&#xA;&#x9;&#x9;All rules have been moved to the custom form for this state. &#xD;&#xA;&#x9;&#x9;Any rules added here will have warnings ignored, rather&#xD;&#xA;&#x9;&#x9;use the custom form or add to existing rule sets&#xD;&#xA;&#x9;*/&#xD;&#xA;&#x9;ICommon commonService = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;commonService.PricingForRisk((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Application in Order.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Application_in_Order(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Application in Order&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Application_in_Order(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2087" DefinitionGroupDescription="Manage Application" DefinitionDescription="Application in Order" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="890.6555" LocationY="1038.895" Type="SAHL.X2Designer.Items.UserActivity" Id="20" Name="Send LOA" X2ID="251d345f-c73f-4026-bc95-1bbd6eb33d38" Message="Send LOA" StageTransitionMessage="Send LOA [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_Correspondence_LOA" LinkedActivity="" UseLinkedActivity="False" FromNode="LOA" ToNode="LOA">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Send_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Send_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Send LOA.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Send_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Send LOA&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Send_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2178" DefinitionGroupDescription="Post Credit (LOA) Process" DefinitionDescription="Send LOA" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1120.548" LocationY="297.9408" Type="SAHL.X2Designer.Items.UserActivity" Id="38" Name="QA Query" X2ID="4bc1cf56-b94f-404b-9330-d75687d0d05a" Message="QA Query" StageTransitionMessage="QA Query [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_QAQuery" LinkedActivity="" UseLinkedActivity="False" FromNode="QA" ToNode="Request at QA">
          <Access>
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_QA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_QA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;if(!common.CheckApplicationMinimumIncomeRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    appMan.SendEmailToConsultantForQuery((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, instance.ID, 8);&#xD;&#xA;&#x9;&#xD;&#xA;    if (!Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;        dys.Add(&quot;QA Administrator D&quot;);&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages,instance.ID,Application_Management_Data.ApplicationKey,dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;        // Assign the Branch folks back in&#xD;&#xA;        WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;Request at QA&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;    }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  QA Query.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_QA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;QA Query&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_QA_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1407" DefinitionGroupDescription="QA Process" DefinitionDescription="QA Query" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1224.646" LocationY="361.9402" Type="SAHL.X2Designer.Items.UserActivity" Id="39" Name="Request Resolved" X2ID="13fe3dab-6fd6-436a-9d2f-2874dcfb85b9" Message="Request Resolved" StageTransitionMessage="Request Resolved [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Request at QA" ToNode="QA">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Resolved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Resolved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;if(!applicationCapture.CheckBranchSubmitApplicationRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;if(!common.CheckApplicationMinimumIncomeRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;&#xD;&#xA;    var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;    if (!Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;        dys.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD);&#xD;&#xA;        dys.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD);&#xD;&#xA;        dys.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD);&#xD;&#xA;        workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        // Assign the QA types bak&#xD;&#xA;        List&lt;int&gt; OSKeys = new List&lt;int&gt;();&#xD;&#xA;        OSKeys.Add(1007);&#xD;&#xA;        OSKeys.Add(1008);&#xD;&#xA;        string user = string.Empty;&#xD;&#xA;        workflowAssignment.ReactiveUserOrRoundRobinForOSKeysByProcess((IDomainMessageCollection)messages,&quot;QA Administrator D&quot;, Application_Management_Data.ApplicationKey, OSKeys, instance.ID, &quot;Request Resolved&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.QAAdministrator);&#xD;&#xA;    }&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Request Resolved.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Request_Resolved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Request Resolved&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Resolved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2181" DefinitionGroupDescription="QA Process" DefinitionDescription="Request Resolved" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="992.8816" LocationY="492.9408" Type="SAHL.X2Designer.Items.UserActivity" Id="40" Name="QA Complete" X2ID="4d416f1a-571a-436e-b86d-3bc4cfc55364" Message="QA Complete" StageTransitionMessage="QA Complete [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_QAComplete" LinkedActivity="" UseLinkedActivity="False" FromNode="QA" ToNode="Next Step">
          <Access>
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_QA_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_QA_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;bool b = false;&#xD;&#xA;&#xD;&#xA;&#x9;b = appMan.CheckQACompleteRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;&#x9;if (!b)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    b = appMan.SaveApplication((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;&#x9;    return b;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;if (b)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    common.PricingForRisk((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  QA Complete.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_QA_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;QA Complete&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_QA_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1400" DefinitionGroupDescription="QA Process" DefinitionDescription="QA Complete" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1103.244" LocationY="606.9402" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="41" Name="New Purchase" X2ID="f7f8aa6c-bd31-4ca3-a957-5cb465545e8e" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Next Step" ToNode="Issue AIP">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_New_Purchase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; bool b = false;&#xD;&#xA; if (Application_Management_Data.OfferTypeKey == 7)&#xD;&#xA;  b = true;&#xD;&#xA; return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_New_Purchase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 1, 3);&#xD;&#xA;    common.CreateNewRevision((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;    List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;    dys.Add(&quot;QA Administrator D&quot;);&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    // Assign the Branch folks back in&#xD;&#xA;    // Assign the Branch folks back in&#xD;&#xA;    WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;Issue AIP&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  New Purchase.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_New_Purchase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_New_Purchase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2534" DefinitionGroupDescription="AIP" DefinitionDescription="New Purchase" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1003.775" LocationY="669.9392" Type="SAHL.X2Designer.Items.UserActivity" Id="42" Name="Client Accepts" X2ID="19d22149-ab9c-4843-9d02-bd1f77d402d7" Message="Client Accepts" StageTransitionMessage="Client Accepts [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Issue AIP" ToNode="System Assign Processor">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Client_Accepts(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Client_Accepts(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.PricingForRisk((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true; &#xD;&#xA;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Client Accepts.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Client_Accepts(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Client Accepts&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Client_Accepts(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2535" DefinitionGroupDescription="AIP" DefinitionDescription="Client Accepts" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1226.848" LocationY="525.9406" Type="SAHL.X2Designer.Items.UserActivity" Id="43" Name="Client Refuse" X2ID="64a4a124-dfa9-45c6-b2f1-ab83b2a1f43e" Message="Client Refuse" StageTransitionMessage="Client Refuse [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Issue AIP" ToNode="Archive AIP">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Client_Refuse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return appMan.CheckADUserInSameBranchRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.IgnoreWarning, param.ADUserName);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Client_Refuse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Client Refuse.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Client_Refuse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Client Refuse&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Client_Refuse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2536" DefinitionGroupDescription="AIP" DefinitionDescription="Client Refuse" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1341.356" LocationY="605.9402" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="1 month timer" X2ID="925650bc-ebb7-4e43-a0cc-2eaabea09824" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Issue AIP" ToNode="Archive AIP">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_1_month_timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_1_month_timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  1 month timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_1_month_timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for 1 month timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_1_month_timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddMonths(1));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2538" DefinitionGroupDescription="AIP" DefinitionDescription="1 month timer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="912.6986" LocationY="604.1349" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="45" Name="Other Types" X2ID="829f2f7a-f15d-49fb-b407-47b7dc3dc333" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Next Step" ToNode="System Assign Processor">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Other_Types(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Other_Types(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Other Types.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Other_Types(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Other_Types(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2044" DefinitionGroupDescription="AIP" DefinitionDescription="Other Types" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="374.3872" LocationY="458.2742" Type="SAHL.X2Designer.Items.UserActivity" Id="50" Name="Query on Application" X2ID="b592192f-30f0-4138-9e85-2aba1a66d505" Message="Query on Application" StageTransitionMessage="Query on Application" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_QueryApp" LinkedActivity="" UseLinkedActivity="False" FromNode="Manage Application" ToNode="Application Query">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Query_on_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Query_on_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;if(!common.CheckApplicationMinimumIncomeRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA; &#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        // Deactivate the NBP users -&#xD;&#xA;        List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;        dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;        dys.Add(&quot;New Business Manager D&quot;);&#xD;&#xA;        WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;        // Assign the Branch folks back in&#xD;&#xA;        // Assign the Branch folks back in&#xD;&#xA;        WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;Arrears&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Query_on_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Query on Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Query_on_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4379" DefinitionGroupDescription="New Business Reporting" DefinitionDescription="Query on Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="207.4834" LocationY="531.6071" Type="SAHL.X2Designer.Items.UserActivity" Id="51" Name="Feedback on Query" X2ID="0f7087d9-629c-4deb-bf9f-1eae5416335e" Message="Feedback on Query received from Branch" StageTransitionMessage="Feedback on Query received from Branch [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Application Query" ToNode="Manage Application">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager D" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Feedback_on_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Feedback_on_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if(!common.CheckApplicationMinimumIncomeRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;if(!applicationCapture.CheckBranchSubmitApplicationRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#xD;&#xA;&#x9;common.PricingForRisk((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;    dys.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD);&#xD;&#xA;&#x9;    dys.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD);&#xD;&#xA;&#x9;    dys.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD);&#xD;&#xA;&#xD;&#xA;&#x9;    workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages,instance.ID, Application_Management_Data.ApplicationKey, dys, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;    // Assign the NPB&#xD;&#xA;&#x9;    workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages,&quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.NewBusinessProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Feedback on Query.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Feedback_on_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Feedback on Query received from Branch&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Feedback_on_Query(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2091" DefinitionGroupDescription="Manage Application" DefinitionDescription="Feedback on Query" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="213.7646" LocationY="958.939" Type="SAHL.X2Designer.Items.UserActivity" Id="54" Name="Resubmit to Credit" X2ID="58b03607-e048-48a7-91c1-6ccbef63f4e1" Message="Resubmit to Credit" StageTransitionMessage="Resubmit to Credit [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="ResubmitToCredit" LinkedActivity="" UseLinkedActivity="False" FromNode="Resubmission" ToNode="Credit">
          <Access>
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Resubmit_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Resubmit_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;/*&#xD;&#xA;&#x9;&#x9;All rules have been moved to the custom form for this state. &#xD;&#xA;&#x9;&#x9;Any rules added here will have warnings ignored, rather&#xD;&#xA;&#x9;&#x9;use the custom form or add to existing rule sets&#xD;&#xA;&#x9;*/&#xD;&#xA;&#x9;// Ensuring PricingForRisk is run before returning&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.PricingForRisk((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Resubmit to Credit.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Resubmit_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Resubmit to Credit&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Resubmit_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2141" DefinitionGroupDescription="Resubmission App Mgt" DefinitionDescription="Resubmit to Credit" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1108.506" LocationY="1063.939" Type="SAHL.X2Designer.Items.UserActivity" Id="55" Name="LOA Received" X2ID="be9a0911-4c1c-447a-960b-4babb6774202" Message="LOA Received" StageTransitionMessage="LOA Received [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="LOA" ToNode="Signed LOA Review">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_LOA_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_LOA_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  LOA Received.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_LOA_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;LOA Received&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_LOA_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1368" DefinitionGroupDescription="Post Credit (LOA) Process" DefinitionDescription="LOA Received" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1358.536" LocationY="1064.939" Type="SAHL.X2Designer.Items.UserActivity" Id="56" Name="LOA Accepted" X2ID="413f3907-41ca-40c4-b15b-e27c247a2c3e" Message="LOA Accepted" StageTransitionMessage="LOA Accepted [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Signed LOA Review" ToNode="Application Check">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_LOA_Accepted(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appManagementService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return appManagementService.CheckApplicationDebitOrderCollectionRule((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_LOA_Accepted(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  LOA Accepted.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_LOA_Accepted(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;LOA Accepted&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_LOA_Accepted(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2119" DefinitionGroupDescription="Registrations" DefinitionDescription="LOA Accepted" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1575.478" LocationY="1641.943" Type="SAHL.X2Designer.Items.UserActivity" Id="64" Name="Instruct Attorney" X2ID="144d0539-e6cd-4769-b977-79732e9399db" Message="Instruct Attorney" StageTransitionMessage="Instruct Attorney [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_Correspondence_InstructAttorney_Redirect" LinkedActivity="" UseLinkedActivity="False" FromNode="Application Check" ToNode="Attorney Check">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Instruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Instruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    return appMan.CheckInstructAttorneyRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Instruct Attorney.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Instruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Instruct Attorney&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Instruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2120" DefinitionGroupDescription="Registrations" DefinitionDescription="Instruct Attorney" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="839.1377" LocationY="1823.94" Type="SAHL.X2Designer.Items.UserActivity" Id="65" Name="Review Disbursement Setup" X2ID="62fdbac6-ac5f-472e-b0f5-0de94b86edef" Message="Review Disbursement Setup" StageTransitionMessage="Review Disbursement Setup [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disbursement" ToNode="Disbursement Review">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Review_Disbursement_Setup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Review_Disbursement_Setup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Review Disbursement Setup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Review_Disbursement_Setup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Review Disbursement Setup&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Review_Disbursement_Setup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2118" DefinitionGroupDescription="Registrations" DefinitionDescription="Review Disbursement Setup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1148.494" LocationY="1952.941" Type="SAHL.X2Designer.Items.UserActivity" Id="67" Name="Rollback Disbursement" X2ID="d0393003-f860-46ec-bbb0-44a03eb3a59c" Message="Rollback Disbursement" StageTransitionMessage="Rollback Disbursement [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disbursed" ToNode="Disbursement Review">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rollback_Disbursement(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rollback_Disbursement(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;if (EFID != &quot;&quot;)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    &#xD;&#xA;&#x9;    if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;    {&#xD;&#xA;&#x9;        appMan.ReturnDisbursedLoanToRegistration((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);                &#xD;&#xA;&#x9;    }&#xD;&#xA;&#xD;&#xA;&#x9;    return common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2ROLLBACKDISBURSEMENT, Application_Management_Data.ApplicationKey, param.ADUserName, param.StateName);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Rollback Disbursement.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Rollback_Disbursement(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Rollback Disbursement&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rollback_Disbursement(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1292" DefinitionGroupDescription="Registrations" DefinitionDescription="Rollback Disbursement" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="92.18658" LocationY="878.9392" Type="SAHL.X2Designer.Items.UserActivity" Id="73" Name="Resubmit" X2ID="f6634969-d5af-47de-bd28-ffcbcddf8134" Message="Resubmit" StageTransitionMessage="Resubmit [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_Resubmission" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Resubmission" ToNode="Resubmission">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Resubmit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Resubmit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;(); &#xD;&#xA;&#x9;&#xD;&#xA;    string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;    if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;    {&#xD;&#xA;        if(!appMan.CheckEWorkAtCorrectStateRule((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;    common.ArchiveV3ITCForApplication((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;    Application_Management_Data.IsResub = true;&#xD;&#xA;&#x9;    appMan.ReturnNonDisbursedLoanToProspect((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;    common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 1, -1);&#xD;&#xA;&#x9;&#x9;common.RemoveApplicationAttribute((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.CreditDisqualified30YearTerm);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;if (common.CheckApplicationHasAttribute((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.Loanwith30YearTerm))&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;appMan.Revert30YearTermApplicationToPreviousTerm((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;else&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;    common.CreateNewRevision((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;&#x9;common.CalculateAndSaveApplication((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, false);&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;        common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2RESUB, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName);&#xD;&#xA;    }&#xD;&#xA;    return true; &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Resubmit.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Resubmit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Resubmit&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Resubmit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2142" DefinitionGroupDescription="Resubmission App Mgt" DefinitionDescription="Resubmit" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1307.636" LocationY="1641.942" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="73" Name="AttAssigned" X2ID="5f99f90e-0dea-4cac-90ac-2a54f86424a2" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Attorney Check" ToNode="CheckQCAndSendToPipeline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_AttAssigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.CreateAccountForApplication((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_AttAssigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  AttAssigned.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_AttAssigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_AttAssigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1931" DefinitionGroupDescription="Registrations" DefinitionDescription="AttAssigned" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="574.0959" LocationY="231.8339" Type="SAHL.X2Designer.Items.UserActivity" Id="51" Name="Application Received" X2ID="ce1c2db7-fd8a-4561-a207-09ba1c386c2d" Message="Application Received" StageTransitionMessage="Application Received [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Awaiting Application" ToNode="Multiple Applications">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Application_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Application_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#x9;&#xD;&#xA;&#x9;furtherLending.AddDetailTypes((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Application Received.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Application_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Application Received&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Application_Received(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2069" DefinitionGroupDescription="Further Lending" DefinitionDescription="Application Received" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="114.3302" LocationY="666.9392" Type="SAHL.X2Designer.Items.UserActivity" Id="54" Name="Note Comment" X2ID="a1e30e10-f9fc-4d8e-b488-8dd5f5c80c72" Message="Note Comment" StageTransitionMessage="Note Comment [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_MemoAdd" LinkedActivity="" UseLinkedActivity="False" FromNode="Arrears" ToNode="Manage Application">
          <Access>
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Loss Control QC Collections Admin" />
            <AccessCollection AccessCollectionItem="FL Collections Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Note_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Note_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; if (Application_Management_Data.IsFL)&#xD;&#xA; {&#xD;&#xA;  // Deactivate the FLCollections Users&#xD;&#xA;  //WorkflowAssignment.DeActiveUsersForInstance(param.Tran, instance.ID, Application_Management_Data.ApplicationKey); &#xD;&#xA;  // Assign the NPB&#xD;&#xA;  //WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID);&#xD;&#xA; }&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Note Comment.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Note_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Note Comment&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Note_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2079" DefinitionGroupDescription="Further Lending Arrears" DefinitionDescription="Note Comment" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="468.7649" LocationY="1035.94" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="55" Name="Rapid Readvance" X2ID="fb92c17a-6c20-40ae-a283-5f67ba2384fb" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit" ToNode="Rapid Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rapid_Readvance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;bool b = false;&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;    if (Application_Management_Data.OfferTypeKey == (int)SAHL.Common.Globals.OfferTypes.ReAdvance)&#xD;&#xA;    {&#xD;&#xA;    &#x9;b = furtherLending.CheckRapidShouldGotoCreditRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, false);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;    dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;    WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;    return b;&#xD;&#xA;}" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rapid_Readvance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Rapid Readvance.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Rapid_Readvance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rapid_Readvance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2070" DefinitionGroupDescription="Further Lending" DefinitionDescription="Rapid Readvance" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1344.59" LocationY="298.94" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="2 Months" X2ID="eb9d3b9c-1fe2-4159-8873-fbb1ce2c2845" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Request at QA" ToNode="Archive QA Query">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_2_Months(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_2_Months(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  2 Months.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_2_Months(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for 2 Months.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_2_Months(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddMonths(2));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2180" DefinitionGroupDescription="QA Process" DefinitionDescription="2 Months" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="735.036" LocationY="361.941" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="59" Name="Assigned QA" X2ID="85203de5-c9b5-460e-836a-d750bb80a492" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Assign at QA" ToNode="QA">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Assigned_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Assigned_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Assigned QA.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Assigned_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Assigned_QA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1953" DefinitionGroupDescription="QA Process" DefinitionDescription="Assigned QA" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="471.5543" LocationY="168.8339" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="30 Day Timer" X2ID="18134ef6-cfb4-4fc7-b816-2c6f7d1b42f2" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Awaiting Application" ToNode="Archive No App Form">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_30_Day_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_30_Day_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 4, -1);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  30 Day Timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_30_Day_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for 30 Day Timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_30_Day_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2065" DefinitionGroupDescription="Further Lending" DefinitionDescription="15 days" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1234.661" LocationY="691.9392" Type="SAHL.X2Designer.Items.UserActivity" Id="61" Name="Send AIP" X2ID="b807cf6b-f604-45d2-ab60-da6884c17c47" Message="Send AIP" StageTransitionMessage="Send AIP [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_Correspondence_AIP" LinkedActivity="" UseLinkedActivity="False" FromNode="Issue AIP" ToNode="Issue AIP">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Send_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Send_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Send AIP.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Send_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Send AIP&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Send_AIP(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2049" DefinitionGroupDescription="AIP" DefinitionDescription="Send AIP" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1223.167" LocationY="907.8485" Type="SAHL.X2Designer.Items.UserActivity" Id="60" Name="Query on LOA" X2ID="81f588d7-01ac-458e-a8bc-864b1f021e13" Message="Query on LOA" StageTransitionMessage="Query on LOA [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_MemoAdd" LinkedActivity="" UseLinkedActivity="False" FromNode="Signed LOA Review" ToNode="LOA Query">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Query_on_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Query_on_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;        {&#xD;&#xA;            IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;            List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;            dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;            dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;            dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;            dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;            dys.Add(&quot;New Business Manager D&quot;);&#xD;&#xA;            WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;            // Assign the Branch folks back in&#xD;&#xA;            // Assign the Branch folks back in&#xD;&#xA;            WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;LOA Query&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;        }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Query on LOA.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Query_on_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Query on LOA&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Query_on_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2177" DefinitionGroupDescription="Post Credit (LOA) Process" DefinitionDescription="Query on LOA" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="981.1288" LocationY="972.8474" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="30 Days" X2ID="9d977daf-b7b3-445c-afa2-6aaa44b383ec" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="LOA" ToNode="Archive Exp LOA">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_30_Days(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_30_Days(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  30 Days.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_30_Days(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for 30 Days.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_30_Days(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1948" DefinitionGroupDescription="Application Management" DefinitionDescription="30 days" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1109.657" LocationY="1010.848" Type="SAHL.X2Designer.Items.UserActivity" Id="63" Name="Resend LOA" X2ID="bbf370a0-1aef-44b5-9270-29b42427c194" Message="Resend LOA" StageTransitionMessage="Resend LOA [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Signed LOA Review" ToNode="LOA">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Resend_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Resend_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Resend LOA.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Resend_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Resend LOA&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Resend_LOA(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1377" DefinitionGroupDescription="Post Credit (LOA) Process" DefinitionDescription="Resend LOA" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="210.6532" LocationY="609.6215" Type="SAHL.X2Designer.Items.UserActivity" Id="63" Name="Require Arrear Comment" X2ID="b89b0d7a-d96c-4ad8-b6aa-9a730879946f" Message="Require Arrear Comment" StageTransitionMessage="Require Arrear Comment [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Manage Application" ToNode="Arrears">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Require_Arrear_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Require_Arrear_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;// WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;FL Collections Admin D&quot;, Application_Management_Data.ApplicationKey, 134, instance.ID);&#xD;&#xA;// if (Application_Management_Data.IsFL)&#xD;&#xA;// {&#xD;&#xA;//   Deactivate  &#xD;&#xA;//  WorkflowAssignment.DeActiveUsersForInstance(param.Tran, instance.ID, Application_Management_Data.ApplicationKey);&#xD;&#xA;// }&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Require Arrear Comment.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Require_Arrear_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Require Arrear Comment&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Require_Arrear_Comment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2080" DefinitionGroupDescription="Further Lending Arrears" DefinitionDescription="Require Arrear Comment" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="519.114" LocationY="960.6215" Type="SAHL.X2Designer.Items.UserActivity" Id="63" Name="Override Check" X2ID="2d26ba24-8f8c-4806-90bc-ee7e3d3a1f17" Message="Override Check" StageTransitionMessage="Override Check [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Manage Application" ToNode="Credit">
          <Access>
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="NBOverride" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Override_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Override_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appManService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL &amp;&amp; !appManService.CheckCreditOverrideRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, true))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Override Check.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Override_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Override Check&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Override_Check(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2089" DefinitionGroupDescription="Manage Application" DefinitionDescription="Override Check" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1509.178" LocationY="615.1807" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="64" Name="Valuation in Order" X2ID="7933c69e-f65a-43a9-a805-4f1ae6d3f4fd" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Valuation Return" ToNode="Valuation in Order">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_in_Order(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_in_Order(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_in_Order(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="1665.775" LocationY="532.7415" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="65" Name="Valuation Resubmission?" X2ID="6dfbc394-3182-415d-8059-b4259ae1fab8" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Valuation Return" ToNode="Valuation Resubmission?">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_Resubmission_(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_Resubmission_(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_Resubmission_(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="632.6896" LocationY="697.515" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="64" Name="Return Processor Credit" X2ID="bd53b7be-f9b8-43dd-a2b3-d9cb654d7255" Message="Returned to Processor From Credit" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Manage Application" ToNode="Return Processor Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_Processor_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_Processor_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;  &#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;    dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;    dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;    dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;    dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    if (!Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        // reactiveate the NBP users.&#xD;&#xA;        WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.NewBusinessProcessor);&#xD;&#xA;    }&#xD;&#xA;    else&#xD;&#xA;    {&#xD;&#xA;        WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;    }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_Processor_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="579.4785" LocationY="1337.848" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="64" Name="Return with Approve or Offer" X2ID="1947b449-40cd-44b1-8b52-48a414a7de2f" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Application Type" ToNode="Return with Approve or Offer">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_with_Approve_or_Offer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_with_Approve_or_Offer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_with_Approve_or_Offer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="142.4733" LocationY="1055.349" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="65" Name="Credit Return Resubmission" X2ID="e255ec61-2c07-44c5-b640-efe765cd2dbf" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Resubmission" ToNode="Credit Return Resubmission">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Credit_Return_Resubmission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Credit_Return_Resubmission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Credit_Return_Resubmission(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="1722.333" LocationY="1537.349" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="66" Name="Credit Return Resub Approve" X2ID="28c9ef39-ce8f-4744-a4e2-eb931b676202" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Resub Application Check" ToNode="Credit Return Resub Approve">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Credit_Return_Resub_Approve(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Credit_Return_Resub_Approve(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Credit_Return_Resub_Approve(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="1989.412" LocationY="1878.349" Type="SAHL.X2Designer.Items.UserActivity" Id="67" Name="Translation Complete" X2ID="78d63602-98cc-48c1-9342-ec76e3de4c17" Message="Translation Complete" StageTransitionMessage="Translation Complete [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Translate Conditions" ToNode="Archive Translate">
          <Access>
            <AccessCollection AccessCollectionItem="Translate Conditions" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Translation_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Translation_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Translation Complete.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Translation_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Translation Complete&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Translation_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1786" DefinitionGroupDescription="Application Management" DefinitionDescription="Translation Complete" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1787.125" LocationY="1878.349" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="68" Name="Misc Condition" X2ID="015b151d-ba0f-4832-85de-b45189103be9" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="Common Translate " ToNode="Translate Conditions">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Misc_Condition(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return false;&#xD;&#xA; //IX2ReturnData ret = AppMan.TranslateCondition(Application_Management_Data.ApplicationKey, instance.ID, Application_Management_Data.IsFL, out b);&#xD;&#xA; //return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Misc_Condition(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Misc Condition.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Misc_Condition(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Misc_Condition(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1785" DefinitionGroupDescription="Application Management" DefinitionDescription="Misc Condition" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1698.729" LocationY="1071.35" Type="SAHL.X2Designer.Items.UserActivity" Id="71" Name="Select Attorney" X2ID="8f23dbe8-96c9-410b-96dd-cc5e73d78181" Message="Select Attorney" StageTransitionMessage="Select Attorney [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_SelectAttorney" LinkedActivity="" UseLinkedActivity="False" FromNode="Application Check" ToNode="Application Check">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Select_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Select_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Select Attorney.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Select_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Select Attorney&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Select_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2132" DefinitionGroupDescription="Registrations" DefinitionDescription="Select Attorney" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1512.714" LocationY="1231.351" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="71" Name="Att not assigned" X2ID="2f547c06-8ecc-4bf2-bc5e-3003e00aeab7" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Attorney Check" ToNode="Application Check">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Att_not_assigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;//If an attorney exists return false&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return !(appMan.HasApplicationRole((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 4 )); //4 = &quot;Conveyance Attorney&quot;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Att_not_assigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Att not assigned.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Att_not_assigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Att_not_assigned(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2123" DefinitionGroupDescription="Registrations" DefinitionDescription="Att not assigned" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1349.187" LocationY="673.6826" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="72" Name="Valuation Workflow" X2ID="f354eeeb-7a7e-48b5-8f51-afd09455f683" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" WorkFlowToCall="Valuations" ActivityToCall="Valuation Request" ReturnActivity="Valuation in Order" FromNode="Valuation Hold" ToNode="Valuation Workflow">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_Workflow(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_Workflow(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_Workflow(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="404.364" LocationY="1205.349" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="73" Name="Credit" X2ID="d09b225a-0902-4050-9838-c6ee043fccba" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" WorkFlowToCall="Credit" ActivityToCall="Move from Origination" ReturnActivity="Return with Approve or Offer" FromNode="Credit Hold" ToNode="Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="1553.327" LocationY="945.3485" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="74" Name="Return ReAdv Payment FL" X2ID="f6cc2a3e-1b27-4266-a134-36188a526a47" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Application Check" ToNode="Return ReAdv Payment FL">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_ReAdv_Payment_FL(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_ReAdv_Payment_FL(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_ReAdv_Payment_FL(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="887.1062" LocationY="1153.349" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="75" Name="New Business" X2ID="ce9d98dc-e821-4b3e-a51a-57da7f818b5e" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Application Type" ToNode="LOA">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_New_Business(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; // removed ticket #12833&#xD;&#xA;// string userName = string.Empty;&#xD;&#xA;// BaseHelper.HasCaseBeenAssignedToThisDynamicRoleBefore(&quot;Registrations LOA Admin D&quot;, Application_Management_Data.ApplicationKey, out userName);&#xD;&#xA;// &#xD;&#xA;// &#xD;&#xA;// string AssignedUser = string.Empty;&#xD;&#xA;// if (string.IsNullOrEmpty(userName))&#xD;&#xA;// {&#xD;&#xA;//  ret = BaseHelper.RoundRobinAssignForGivenOrgStructure(param.Tran, out AssignedUser, &quot;Registrations LOA Admin D&quot;, Application_Management_Data.ApplicationKey, 579);&#xD;&#xA;// }&#xD;&#xA;// else&#xD;&#xA;// {&#xD;&#xA;//  ret = BaseHelper.ReassignOrEscalateCaseToUser(param.Tran, Application_Management_Data.ApplicationKey, &quot;Registrations LOA Admin D&quot;, userName, true);&#xD;&#xA;// }&#xD;&#xA;// &#xD;&#xA;// return true;&#xD;&#xA;&#x9;if (Application_Management_Data.OfferTypeKey == 6 || Application_Management_Data.OfferTypeKey == 7 || Application_Management_Data.OfferTypeKey == 8)&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_New_Business(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  New Business.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_New_Business(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_New_Business(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1625" DefinitionGroupDescription="Post Credit (LOA) Process" DefinitionDescription="New Business" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="789.244" LocationY="1155.348" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="76" Name="Further Lending" X2ID="e99fd3b5-4419-469b-ac1d-d2e635b92f46" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Application Type" ToNode="Send to FL Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Lending(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Application_Management_Data.IsFL)&#xD;&#xA; { &#xD;&#xA;  bool b = false;&#xD;&#xA;  if (Application_Management_Data.OfferTypeKey == 3 || Application_Management_Data.OfferTypeKey == 4)&#xD;&#xA;   b = true;&#xD;&#xA;  return b;&#xD;&#xA; }&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Lending(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Further Lending.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Further_Lending(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Lending(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2068" DefinitionGroupDescription="Further Lending" DefinitionDescription="Further Lending" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="771.7517" LocationY="958.3483" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="77" Name="Readvance Payments" X2ID="44c3f8b4-5a05-4f66-95bd-c5507ce1f2d5" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" WorkFlowToCall="Readvance Payments" ActivityToCall="Approve App - FA &amp; FL" ReturnActivity="" FromNode="Send to FL Hold" ToNode="Readvance Payments">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Readvance_Payments(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Readvance_Payments(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Readvance_Payments(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="461.4184" LocationY="1204.349" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="78" Name="Readvance Payment" X2ID="8914dea0-8895-4ca3-b038-5ce351802295" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" WorkFlowToCall="Readvance Payments" ActivityToCall="Readvance Payment" ReturnActivity="" FromNode="Rapid Hold" ToNode="Readvance Payment">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Readvance_Payment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Readvance_Payment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Readvance_Payment(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="620.756" LocationY="605.9088" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="79" Name="Assign Processor" X2ID="6900fb44-145c-4ab0-b43f-ec4c712a7435" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="System Assign Processor" ToNode="Manage Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Assign_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;//bool requireValuation;&#xD;&#xA;    //AppMan.CheckIfApplicationRequiresValuation(Application_Management_Data.ApplicationKey, out requireValuation);&#xD;&#xA;    //if(requireValuation)&#xD;&#xA;    //{&#xD;&#xA;    // Application_Management_Data.RequireValuation = requireValuation;&#xD;&#xA;    //}&#xD;&#xA;&#xD;&#xA;    // The logic is a bit messy but works as it is used in another place.&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    IValuations val =  DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;    bool hasValuation = val.CheckValuationExistsRecentRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, false);&#xD;&#xA;    bool requireValuationApproval = !hasValuation;&#xD;&#xA;&#xD;&#xA;    if (requireValuationApproval)&#xD;&#xA;    {&#xD;&#xA;        Application_Management_Data.RequireValuation = requireValuationApproval;&#xD;&#xA;    }&#xD;&#xA;    if (Application_Management_Data.IsFL) return true;&#xD;&#xA;    string AssignedUser = string.Empty;&#xD;&#xA;    &#xD;&#xA;    AssignedUser = WorkflowAssignment.GetUserWhoWorkedOnThisLEsOtherCasesForDynamicRole((IDomainMessageCollection)messages, 694, Application_Management_Data.ApplicationKey, instance.ID);&#xD;&#xA;    if (string.IsNullOrEmpty(AssignedUser))&#xD;&#xA;    {&#xD;&#xA;        // no NPB user who has worked on a case for these Main Applicants before so RR&#xD;&#xA;        WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.NewBusinessProcessor);&#xD;&#xA;    }&#xD;&#xA;    else&#xD;&#xA;    {&#xD;&#xA;        // Assign the case to a specific person.&#xD;&#xA;        WorkflowAssignment.ReassignCaseToUser((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, AssignedUser, 106, 694, &quot;Manage Application&quot;);&#xD;&#xA;    }&#xD;&#xA;    common.UpdateAssignedUserInIDM((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, Application_Management_Data.IsFL, instance.ID, &quot;Application Management&quot;);&#xD;&#xA;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Assign_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#xD;&#xA;// if (Application_Management_Data.RequireValuation)&#xD;&#xA;// {&#xD;&#xA;//  Message = &quot;Returned from Credit – Valuation Approved&quot;;&#xD;&#xA;// }  &#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Assign Processor.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Assign_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Assign_Processor(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2092" DefinitionGroupDescription="Manage Application" DefinitionDescription="Assign Processor" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="869.9933" LocationY="707.9099" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="80" Name="AutoValuation" X2ID="e03661cf-978b-4dc4-b926-28806386d193" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="System Assign Processor" ToNode="Valuation Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_AutoValuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();          &#xD;&#xA;    IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;    IValuations val = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;    //val.CheckIfCanPerformFurtherValuation((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;    //if no valuation clone is required yet, continue the process to save the financial cost&#xD;&#xA;    if (!Application_Management_Data.RequireValuation)&#xD;&#xA;        return false;&#xD;&#xA;&#xD;&#xA;    bool b = common.IsValuationInProgress((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey);&#xD;&#xA;    if (b)&#xD;&#xA;        return false;&#xD;&#xA;    if (Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        b = FL.ValuationRequired((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;    }&#xD;&#xA;    else&#xD;&#xA;    {&#xD;&#xA;        b = val.CheckValuationExistsRecentRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;    }&#xD;&#xA;    return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_AutoValuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  AutoValuation.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_AutoValuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_AutoValuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1973" DefinitionGroupDescription="Application Management" DefinitionDescription="AutoValuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="399.3101" LocationY="1036.576" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="81" Name="GotoCredit" X2ID="b2d78775-5747-442b-aa6f-e2488b6860fa" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit" ToNode="Credit Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_GotoCredit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_GotoCredit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;    dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Manager D&quot;);    &#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  GotoCredit.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_GotoCredit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_GotoCredit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2093" DefinitionGroupDescription="Manage Application" DefinitionDescription="GotoCredit" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1143.417" LocationY="1553.576" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="82" Name="AutoGotoQC" X2ID="29ef2100-a28f-45ef-806b-4d4145d430a3" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="CheckQCAndSendToPipeline" ToNode="QuickCash Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_AutoGotoQC(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; // look at the old check for QC method here if we ever even get to using QC&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_AutoGotoQC(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  AutoGotoQC.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_AutoGotoQC(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_AutoGotoQC(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1972" DefinitionGroupDescription="Application Management" DefinitionDescription="AutoGotoQC" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1857.696" LocationY="1054.348" Type="SAHL.X2Designer.Items.UserActivity" Id="83" Name="Resend Instruction" X2ID="1a4aa93a-14e7-45d3-b66f-a6c7027ebfc3" Message="Resend Instruction" StageTransitionMessage="Resend Instruction" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_ResendInstruction" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Resend Instruction" ToNode="Common Resend Instruction">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Resend_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Resend_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;if (Convert.ToBoolean(param.Data))&#xD;&#xA;    {&#xD;&#xA;        IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;        ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;        string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;        // archive ework case and resend instruction&#xD;&#xA;        if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;        {&#xD;&#xA;            bool b = false;&#xD;&#xA;&#x9;&#x9;&#x9;string AssignedTo = string.Empty;&#xD;&#xA;            IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;            &#xD;&#xA;&#x9;&#x9;&#x9;AssignedTo = WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;            if(!common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2ARCHIVE, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName))&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;string EFolderID = &quot;&quot;;&#xD;&#xA;            b = appMan.CreateEWorkPipelineCase((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, out EFolderID);&#xD;&#xA;            Application_Management_Data.EWorkFolderID = EFolderID;&#xD;&#xA;            return b;&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;    else&#xD;&#xA;    {&#xD;&#xA;        // Do nothing just resend the instruction.&#xD;&#xA;    }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Resend_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Resend Instruction&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Resend_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1781" DefinitionGroupDescription="Application Management" DefinitionDescription="Resend Instruction" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1860.573" LocationY="1280.122" Type="SAHL.X2Designer.Items.UserActivity" Id="85" Name="Reassign User" X2ID="da894712-c731-4d4e-834a-46f42bf37bc3" Message="" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssign" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Reassign" ToNode="Common Reassign">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reassign_User(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reassign_User(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    common.UpdateAssignedUserInIDM((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, Application_Management_Data.IsFL, instance.ID, &quot;Application Management&quot;);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reassign User.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reassign_User(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Console.WriteLine(&quot;*** {0} ***&quot;, param.Data);&#xD;&#xA; if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reassign_User(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1794" DefinitionGroupDescription="Application Management" DefinitionDescription="Reassign User" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1692.268" LocationY="270.3495" Type="SAHL.X2Designer.Items.UserActivity" Id="87" Name="Perform Further Valuation" X2ID="129314e5-2d22-4006-8af7-e4bc70e7d69d" Message="Perform Further Valuation" StageTransitionMessage="Perform Further Valuation [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common 2nd Valuation" ToNode="SysFurtherVal">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Perform_Further_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;if (!Application_Management_Data.RequireValuation)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;messages.AddMessage( new SystemMessage(&quot;Valuation is not required&quot;,SystemMessageSeverityEnum.Error));&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;    &#xD;&#xA;&#x9;IValuations val = DomainServiceLoader.Instance.Get&lt;IValuations&gt;();&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Perform_Further_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.IsValuationInProgress((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Perform Further Valuation.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Perform_Further_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Perform Further Valuation&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Perform_Further_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2229" DefinitionGroupDescription="Application Management" DefinitionDescription="Valuation Request" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1694.805" LocationY="341.3497" Type="SAHL.X2Designer.Items.UserActivity" Id="88" Name="Review Valuation Required" X2ID="4090c11a-ddc6-45cd-9059-c5c15fbd175a" Message="Review Valuation Required" StageTransitionMessage="Review Valuation Required [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Valuation Review" ToNode="SysReviewVal">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Review_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if(!Application_Management_Data.RequireValuation)&#xD;&#xA; {&#x9;&#xD;&#xA;&#x9;messages.AddMessage( new SystemMessage(&quot;Valuation is not required&quot;, SystemMessageSeverityEnum.Error));&#xD;&#xA;&#x9;return false;&#xD;&#xA; }&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Review_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    common.IsValuationInProgress((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey);        &#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Review Valuation Required.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Review_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Review Valuation Required&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Review_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2230" DefinitionGroupDescription="Application Management" DefinitionDescription="Valuation Review" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1856.338" LocationY="943.3485" Type="SAHL.X2Designer.Items.UserActivity" Id="89" Name="Rework Application" X2ID="217e1fcc-20a8-48ab-8078-96034fa01f3f" Message="Rework Application" StageTransitionMessage="Rework Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="ApplicationLoanDetailsUpdate" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Rework Application" ToNode="Common Rework Application">
          <Access>
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Rework Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Rework Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1796" DefinitionGroupDescription="Application Management" DefinitionDescription="Rework Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="319.6797" LocationY="1760.346" Type="SAHL.X2Designer.Items.UserActivity" Id="90" Name="Info Request Complete" X2ID="507e4eb1-11d7-48c3-83ef-d36a90489fe8" Message="Info Request Complete" StageTransitionMessage="Info Request Complete [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Further Info Request" ToNode="Back to Credit">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Info_Request_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Info_Request_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;return common.CheckApplicationMinimumIncomeRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Info Request Complete.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Info_Request_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Info Request Complete&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Info_Request_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1388" DefinitionGroupDescription="Post Credit (Non LOA) Process" DefinitionDescription="Info Request Complete" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="228.2428" LocationY="1392.349" Type="SAHL.X2Designer.Items.UserActivity" Id="91" Name="Decline Final" X2ID="f7df963b-d204-409d-afad-309525b64016" Message="Decline Final" StageTransitionMessage="Decline Final" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Declined by Credit" ToNode="Decline Bin">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;   IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;   return appMan.CheckADUserInSameBranchRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning, param.ADUserName); &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#xD;&#xA; &#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Decline_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline Final&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1789" DefinitionGroupDescription="Application Management" DefinitionDescription="Decline Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="337.9426" LocationY="1463.345" Type="SAHL.X2Designer.Items.UserActivity" Id="92" Name="Motivate" X2ID="3a659f6a-38cc-494a-830e-8c7cbf1a117a" Message="Motivate" StageTransitionMessage="Motivate [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_MemoAddWithCreditChecks" LinkedActivity="" UseLinkedActivity="False" FromNode="Declined by Credit" ToNode="Back to Credit">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Motivate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Motivate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;/*&#xD;&#xA;&#x9;&#x9;All rules have been moved to the custom form for this state. &#xD;&#xA;&#x9;&#x9;Any rules added here will have warnings ignored, rather&#xD;&#xA;&#x9;&#x9;use the custom form or add to existing rule sets&#xD;&#xA;&#x9;*/&#xD;&#xA; &#x9;ICommon commonService = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;commonService.UpdateOfferStatus((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, 1, -1);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Motivate.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Motivate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Motivate&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Motivate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1382" DefinitionGroupDescription="Post Credit (Non LOA) Process" DefinitionDescription="Motivate" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="454.5466" LocationY="1974.346" Type="SAHL.X2Designer.Items.UserActivity" Id="93" Name="Dispute Finalised" X2ID="dec7064d-d76a-4ab8-b6f0-6dce439397a3" Message="Dispute Finalised" StageTransitionMessage="Dispute Finalised [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disputes" ToNode="Back to Credit">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Dispute_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Dispute_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Dispute Finalised.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Dispute_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Dispute Finalised&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Dispute_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1385" DefinitionGroupDescription="Post Credit (Non LOA) Process" DefinitionDescription="Dispute Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="198.1406" LocationY="1594.349" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="94" Name="Credit Decline Application" X2ID="7997ab40-6cd1-4a2e-8cac-226fc966c0a1" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Declined by Credit" ToNode="Credit Decline Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Credit_Decline_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Credit_Decline_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Credit_Decline_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="215.0886" LocationY="1864.347" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="95" Name="Credit Further Info" X2ID="82416490-bec2-4af9-882c-ef7bade22f86" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Further Info Request" ToNode="Credit Further Info">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Credit_Further_Info(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Credit_Further_Info(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Credit_Further_Info(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="248.4766" LocationY="2081.346" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="96" Name="Credit Dispute" X2ID="ba40be41-5746-4afd-88c9-c0e54b1b7db5" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Disputes" ToNode="Credit Dispute">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Credit_Dispute(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Credit_Dispute(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Credit_Dispute(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="426.9558" LocationY="2316.349" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="NTU Timeout" X2ID="f9c9f577-da44-493f-9965-5b56672977b8" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="NTU" ToNode="Archive NTU">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_NTU_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_NTU_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;    //182 being the Reason Description Key (Expiry due to excessive time lapse) and 11 the Reason Type Key (Application NTU)&#xD;&#xA;    common.AddReasons((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, 182, 11);&#xD;&#xA;&#xD;&#xA;    if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;    {&#xD;&#xA;        string AssignedTo = string.Empty;&#xD;&#xA;        IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;        AssignedTo = WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;        return common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2ClientRefused, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  NTU Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_NTU_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for NTU Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_NTU_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;//return (DateTime.Now.AddMinutes(15));&#xD;&#xA;    DateTime dt = DateTime.Now;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    return common.GetnWorkingDaysFromToday((IDomainMessageCollection)messages, 11);&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2540" DefinitionGroupDescription="Application Management" DefinitionDescription="NTU Timeout" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="397.0676" LocationY="2479.346" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Decline Timeout" X2ID="a6f443a4-be09-45e3-9d26-aeb2bd965351" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Decline" ToNode="Archive Decline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Decline Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Decline_Timeout(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1783" DefinitionGroupDescription="Application Management" DefinitionDescription="Decline Timeout" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="284.6906" LocationY="2441.348" Type="SAHL.X2Designer.Items.UserActivity" Id="99" Name="Reinstate NTU" X2ID="92d5f2a0-ee40-4409-98ee-535d7335d4fb" Message="Reinstate NTU" StageTransitionMessage="Reinstate NTU [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="NTU" ToNode="Return to sender">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstate_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#x9;&#xD;&#xA; &#x9;appMan.CheckIfReinstateAllowedByUser((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, Application_Management_Data.PreviousState, param.IgnoreWarning, param.ADUserName);&#xD;&#xA;    return true;&#xD;&#xA;}" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstate_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;    string AssignedTo = string.Empty;&#xD;&#xA;&#x9;string EFolderID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;&#xD;&#xA;    AssignedTo = WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;    &#xD;&#xA;    if (!string.IsNullOrEmpty(EFolderID))&#xD;&#xA;    {&#xD;&#xA;&#x9;&#x9;if(!common.PerformEWorkAction((IDomainMessageCollection)messages, EFolderID, SAHL.Common.Constants.EworkActionNames.X2ClientWonOver, Application_Management_Data.ApplicationKey, AssignedTo,param.StateName))&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;        &#x9;return false;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;    }&#xD;&#xA;&#x9;&#xD;&#xA;    Application_Management_Data.EWorkFolderID = EFolderID;&#xD;&#xA;    AssignedTo = WorkflowAssignment.HandleApplicationManagementRolesOnReturnFromNTUtoPreviousState((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, Application_Management_Data.PreviousState, Application_Management_Data.IsFL, Application_Management_Data.AppCapIID,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;&#x9;return true;&#xD;&#xA;}" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reinstate NTU.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reinstate_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reinstate NTU&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstate_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2539" DefinitionGroupDescription="Application Management" DefinitionDescription="Reinstate NTU" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="178.8015" LocationY="2480.347" Type="SAHL.X2Designer.Items.UserActivity" Id="100" Name="Reinstate Decline" X2ID="523c7fe7-78cb-4c3f-87f5-193866fceee5" Message="Reinstate Decline" StageTransitionMessage="Reinstate Decline [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Decline" ToNode="Return to sender">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstate_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; instance.Name = Application_Management_Data.ApplicationKey.ToString();&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstate_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;    dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;    dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;    dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;    dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;New Business Supervisor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    if (!Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        switch (Application_Management_Data.PreviousState.ToUpper())&#xD;&#xA;        {&#xD;&#xA;            case &quot;QA&quot;:&#xD;&#xA;                {&#xD;&#xA;                    List&lt;int&gt; OSKeys = new List&lt;int&gt;();&#xD;&#xA;                    OSKeys.Add(1007);&#xD;&#xA;                    OSKeys.Add(1008);&#xD;&#xA;                    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeysByProcess((IDomainMessageCollection)messages, &quot;QA Administrator D&quot;, Application_Management_Data.ApplicationKey, OSKeys, instance.ID, &quot;Return To Sender From Decline&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.QAAdministrator);&#xD;&#xA;                    break;&#xD;&#xA;                }&#xD;&#xA;            case &quot;MANAGE APPLICATION&quot;:&#xD;&#xA;                {&#xD;&#xA;                    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Return To Sender From Decline&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.NewBusinessProcessor);&#xD;&#xA;                    break;&#xD;&#xA;                }&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;    else&#xD;&#xA;    {&#xD;&#xA;        WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;Return To Sender From Decline&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;    }&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reinstate Decline.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reinstate_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reinstate Decline&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstate_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1779" DefinitionGroupDescription="Application Management" DefinitionDescription="Reinstate Decline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="209.6297" LocationY="2529.347" Type="SAHL.X2Designer.Items.UserActivity" Id="101" Name="Decline" X2ID="7bddf36f-587c-4797-9473-96952aed0f11" Message="Decline" StageTransitionMessage="Decline [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_Decline" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Decline" ToNode="Decline">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    // Assign the Branch folks back in&#xD;&#xA;&#x9;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;    WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID,Application_Management_Data.AppCapIID , Application_Management_Data.ApplicationKey, &quot;Decline&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1784" DefinitionGroupDescription="Application Management" DefinitionDescription="Decline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="297.6296" LocationY="2277.349" Type="SAHL.X2Designer.Items.UserActivity" Id="102" Name="NTU" X2ID="b57ec12d-79cc-45a2-82dc-d8e2d1d6e053" Message="NTU" StageTransitionMessage="NTU [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_NTU" LinkedActivity="" UseLinkedActivity="False" FromNode="Common NTU" ToNode="NTU">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;    IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    if (Application_Management_Data.IsFL)&#xD;&#xA;    {&#xD;&#xA;        FL.InitialFLNTU((IDomainMessageCollection)messages, param.ADUserName, Application_Management_Data.ApplicationKey, instance.ID);&#xD;&#xA;    }&#xD;&#xA;    // tell the user. if it doesnt work then dont perform ntu in ework and roll the case back&#xD;&#xA;&#xD;&#xA;    common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 4, -1);&#xD;&#xA;    bool b = true;&#xD;&#xA;&#xD;&#xA;    IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    appMan.SendEmailToConsultantForQuery((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, instance.ID, 4);&#xD;&#xA;&#xD;&#xA;    if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;    {&#xD;&#xA;        string AssignedTo = string.Empty;&#xD;&#xA;        AssignedTo = WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;        b = common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2NTUAdvise, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName);&#xD;&#xA;    }&#xD;&#xA;&#x9;if(b)&#xD;&#xA;&#x9;{&#xD;&#xA;    &#x9;appMan.NTUCase((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;    return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  NTU.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;NTU&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1347" DefinitionGroupDescription="Application Management" DefinitionDescription="NTU" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="653.7534" LocationY="1824.135" Type="SAHL.X2Designer.Items.UserActivity" Id="104" Name="Disbursement Incorrect" X2ID="cd1b5cd0-f9db-4e2b-b56f-d0cb6aa825b2" Message="Disbursement Incorrect" StageTransitionMessage="Disbursement Incorrect [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disbursement Review" ToNode="Disbursement">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Disbursement_Incorrect(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Disbursement_Incorrect(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Disbursement Incorrect.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Disbursement_Incorrect(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Disbursement Incorrect&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Disbursement_Incorrect(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2126" DefinitionGroupDescription="Registrations" DefinitionDescription="Disbursement Incorrect" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="325.1919" LocationY="231.9094" Type="SAHL.X2Designer.Items.UserActivity" Id="105" Name="Further Lending Calc" X2ID="5466db04-bb58-4410-a8f3-4e9f2df28c19" Message="Further Lending Calc" StageTransitionMessage="Further Lending Calc [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="ClapperBoard" ToNode="Awaiting Application">
          <Access>
            <AccessCollection AccessCollectionItem="Everyone" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Lending_Calc(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Lending_Calc(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Further Lending Calc.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Further_Lending_Calc(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Further Lending Calc&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Lending_Calc(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2066" DefinitionGroupDescription="Further Lending" DefinitionDescription="Further Lending Calc" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="821.2184" LocationY="232.2431" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="105" Name="Apps in prog of higher pri" X2ID="5444616a-3d57-4480-a7a5-16d92efff3a7" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Multiple Applications" ToNode="Application Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Apps_in_prog_of_higher_pri(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;return furtherLending.AppsInProgOfHigherPri((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Apps_in_prog_of_higher_pri(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;Application_Management_Data.PreviousState = &quot;QA&quot;;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Apps in prog of higher pri.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Apps_in_prog_of_higher_pri(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Apps_in_prog_of_higher_pri(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2072" DefinitionGroupDescription="Further Lending" DefinitionDescription="Apps in prog of higher priority" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="958.3108" LocationY="153.1989" Type="SAHL.X2Designer.Items.ExternalActivity" Id="107" Name="EXT Hold Application" X2ID="8e45dc8b-3fda-442c-994a-eec0650f0f93" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="MoveAppToHold" FromNode="Common Hold Application" ToNode="Application Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Hold_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Hold_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  EXT Hold Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_EXT_Hold_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Hold_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2071" DefinitionGroupDescription="Further Lending" DefinitionDescription="EXT Hold Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1072.777" LocationY="232.199" Type="SAHL.X2Designer.Items.ExternalActivity" Id="108" Name="EXT Reactivate App" X2ID="1ab77e0c-2cd5-4f62-9511-9191d33e75e3" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="ReturnAppFromHold" FromNode="Application Hold" ToNode="ContinueLoan">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Reactivate_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Reactivate_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; System.Threading.Thread.Sleep(1000);&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  EXT Reactivate App.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_EXT_Reactivate_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Reactivate_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2073" DefinitionGroupDescription="Further Lending" DefinitionDescription="EXT Reactivate App" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="836.5829" LocationY="297.9414" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="109" Name="Highest Priority" X2ID="3309453b-740d-4036-ab75-fcd0576bdea9" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Multiple Applications" ToNode="QA">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Highest_Priority(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL furtherLending = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;return furtherLending.HighestPriority((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Highest_Priority(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;&#x9;dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;&#x9;// do a round robin and assign other FL cases for this account to same biatch&#xD;&#xA;&#x9;&#x9;string AssignedTo = WorkflowAssignment.RoundRobinAndAssignOtherFLCases((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, &quot;FL Processor D&quot;, 157, instance.ID, &quot;QA&quot;, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;FL.AddAccountMemoMessageOnReceiptOfApplication((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.ADUserName, AssignedTo);&#xD;&#xA;&#x9;&#x9;common.UpdateAssignedUserInIDM((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, Application_Management_Data.IsFL, instance.ID, &quot;Application Management&quot;);&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Highest Priority.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Highest_Priority(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Highest_Priority(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2075" DefinitionGroupDescription="Further Lending" DefinitionDescription="Highest Priority" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1109.417" LocationY="2378.94" Type="SAHL.X2Designer.Items.UserActivity" Id="110" Name="Complete Followup" X2ID="4894025a-f4df-4109-acf6-5e96d3702f03" Message="Complete Followup" StageTransitionMessage="Complete Followup [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowSubmit" LinkedActivity="" UseLinkedActivity="False" FromNode="Followup Hold" ToNode="Followup Complete">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Complete_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Complete_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Complete Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Complete_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Complete Followup&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Complete_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1787" DefinitionGroupDescription="Application Management" DefinitionDescription="Complete Followup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="957.0752" LocationY="2283.94" Type="SAHL.X2Designer.Items.UserActivity" Id="112" Name="Update Followup" X2ID="412d4b87-6113-4061-98ac-d83ba2e7176f" Message="Update Followup" StageTransitionMessage="Update Followup [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_UpdateFollowup" LinkedActivity="" UseLinkedActivity="False" FromNode="Followup Hold" ToNode="Followup Hold">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="New Business Processor D" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Update_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Update_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Update Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Update_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Update Followup&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Update_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1799" DefinitionGroupDescription="Application Management" DefinitionDescription="Update Followup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="753.9319" LocationY="2469.607" Type="SAHL.X2Designer.Items.UserActivity" Id="113" Name="Create Followup" X2ID="453355be-218a-4779-bced-bccddcbe8faf" Message="Create Followup" StageTransitionMessage="Create Followup [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_CreateFollowUp" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Followup" ToNode="State99">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey); ;&#xD;&#xA;    instance.Name = Application_Management_Data.ApplicationKey.ToString();&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Followup&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1788" DefinitionGroupDescription="Application Management" DefinitionDescription="Create Followup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="989.1974" LocationY="2449.862" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="OnFollowup" X2ID="fe6a77fe-e7eb-42ad-9f31-8437b0d68d6f" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Followup Hold" ToNode="Ready To Followup">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  OnFollowup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_OnFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for OnFollowup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_OnFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;return common.GetFollowupTime((IDomainMessageCollection)messages,Application_Management_Data.GenericKey);&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1799" DefinitionGroupDescription="Application Management" DefinitionDescription="Update Followup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="424.2805" LocationY="2354.94" Type="SAHL.X2Designer.Items.UserActivity" Id="114" Name="NTU Finalised" X2ID="be4d23c1-ffea-42c9-80c6-64c21eb7e3f8" Message="NTU Finalised" StageTransitionMessage="NTU Finalised [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="NTU" ToNode="Archive NTU">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_NTU_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;bool b = false;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;    IApplicationManagement applicationManagement = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    return applicationManagement.CheckADUserInSameBranchRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.IgnoreWarning, param.ADUserName);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_NTU_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;if(FL.CheckNTUDeclineFinalRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;appMan.RemoveDetailFromApplicationAfterNTUFinalised((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;&#x9;if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;string AssignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;&#x9;AssignedTo = WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;&#x9;&#x9;&#x9;return common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2ClientRefused, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName); &#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return false;&#x9;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  NTU Finalised.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_NTU_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;NTU Finalised&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_NTU_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1790" DefinitionGroupDescription="Application Management" DefinitionDescription="NTU Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="398.3916" LocationY="2528.94" Type="SAHL.X2Designer.Items.UserActivity" Id="115" Name="Decline Finalised" X2ID="11265ad9-f08f-416f-95c6-a25024ac540c" Message="" StageTransitionMessage="Decline Finalised [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Decline" ToNode="Archive Decline">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;    IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    return appMan.CheckADUserInSameBranchRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.IgnoreWarning, param.ADUserName) ;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;        IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();     &#xD;&#xA;        return FL.CheckNTUDeclineFinalRules((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.IgnoreWarning); &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline Finalised.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline Finalised&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline_Finalised(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1789" DefinitionGroupDescription="Application Management" DefinitionDescription="Decline Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="719.4083" LocationY="1721.943" Type="SAHL.X2Designer.Items.ExternalActivity" Id="116" Name="Pipeline_UpForFees" X2ID="e4ab8c4a-13ce-48fe-80f5-496fe545931a" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTUpForFees" FromNode="Registration Pipeline" ToNode="Disbursement">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Pipeline_UpForFees(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Pipeline_UpForFees(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Pipeline_UpForFees.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Pipeline_UpForFees(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Pipeline_UpForFees(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2131" DefinitionGroupDescription="Registrations" DefinitionDescription="PipeLineUpForFees" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="446.9436" LocationY="1300.94" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="116" Name="Back To Credit Goto" X2ID="b239d2ae-cb7c-46b7-9f58-1fdc1e5bd3e9" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" WorkFlowToCall="Credit" ActivityToCall="Move from Origination" ReturnActivity="Return with Approve or Offer" FromNode="Back To Credit Hold" ToNode="Back To Credit Goto">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Back_To_Credit_Goto(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Back_To_Credit_Goto(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Back_To_Credit_Goto(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="444.9756" LocationY="1460.94" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="117" Name="SystemBackToCredit" X2ID="094ec60e-8f57-4fd9-b4ab-d5a8b934b03a" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Back to Credit" ToNode="Back To Credit Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_SystemBackToCredit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;    dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;    dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;    dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;    dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;New Business Manager D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;    dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;    WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_SystemBackToCredit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_SystemBackToCredit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="632.4109" LocationY="792.0463" Type="SAHL.X2Designer.Items.UserActivity" Id="118" Name="Perform Valuation" X2ID="495f79fe-cc0e-4a32-beed-fb84e4a6f0cf" Message="Perform Valuation" StageTransitionMessage="Perform Valuation [CodeChanged]" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Manage Application" ToNode="Check Val">
          <Access>
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Perform_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Perform_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    common.IsValuationInProgress((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Perform Valuation.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Perform_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Perform Valuation&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Perform_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1793" DefinitionGroupDescription="Application Management" DefinitionDescription="Perform Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1302.729" LocationY="154.6067" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="119" Name="FL Return Common" X2ID="78c123b0-42dc-4e8b-b7c9-fa433fb2e9e4" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Archive FL" ToNode="FL Return Common">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_FL_Return_Common(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_FL_Return_Common(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_FL_Return_Common(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="1262.088" LocationY="1854.349" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Disbursement Timer" X2ID="807d5ef1-5864-4054-91fb-ac4a167ed44d" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Disbursed" ToNode="Archive Origination">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Disbursement Timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Disbursement Timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now.AddHours(6));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2127" DefinitionGroupDescription="Registrations" DefinitionDescription="Disbursement Timer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="2126.847" LocationY="202.3495" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="121" Name="Valuations Request" X2ID="a3613e98-8666-4548-a9f3-cf69540c4324" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" WorkFlowToCall="Valuations" ActivityToCall="EXT Further Valuation Required" ReturnActivity="" FromNode="Further Valuation Required" ToNode="Valuations Request">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuations_Request(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuations_Request(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuations_Request(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="2123.192" LocationY="409.3497" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="122" Name="Valuations Review" X2ID="835ae1fc-1406-4a6b-8e1d-7380e25069a5" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" WorkFlowToCall="Valuations" ActivityToCall="EXT Review Valuation Required" ReturnActivity="" FromNode="Valuation Review Required" ToNode="Valuations Review">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuations_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuations_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuations_Review(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="909.3313" LocationY="1642.349" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="123" Name="Create EWork PipelineCase" X2ID="4c3162ac-3502-462d-8b12-e2c14a521ef6" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="CheckQCAndSendToPipeline" ToNode="Registration Pipeline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_EWork_PipelineCase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;appMan.AddDetailTypeInstructionSent((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;bool b = false;&#xD;&#xA;&#x9;if (string.IsNullOrEmpty(EFID))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;string EFolderID = &quot;&quot;;&#xD;&#xA;&#x9;&#x9;b = appMan.CreateEWorkPipelineCase((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, out EFolderID);&#xD;&#xA;&#x9;&#x9;Application_Management_Data.EWorkFolderID = EFolderID;&#xD;&#xA;&#x9;&#x9;return b;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2REINSTRUCTED, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName);&#xD;&#xA;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_EWork_PipelineCase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create EWork PipelineCase.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_EWork_PipelineCase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_EWork_PipelineCase(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2125" DefinitionGroupDescription="Registrations" DefinitionDescription="Create EWork PipelineCase" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="189.9426" LocationY="2314.349" Type="SAHL.X2Designer.Items.ExternalActivity" Id="124" Name="EXT NTU" X2ID="5e16473c-cb5a-4ece-a30f-3a7c27568fe7" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTNTU" FromNode="PipeLine NTU" ToNode="NTU">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.NTU, -1); // 4&#xD;&#xA;&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;appMan.SendEmailToConsultantForQuery((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, instance.ID, (int)SAHL.Common.Globals.ReasonTypeGroups.NTU); // 4&#xD;&#xA;&#x9; &#xD;&#xA;&#x9;appMan.NTUCase((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;return true; &#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_EXT_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_NTU(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3635" DefinitionGroupDescription="Application Management" DefinitionDescription="NTU from Registration Pipeline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1107.557" LocationY="2458.349" Type="SAHL.X2Designer.Items.UserActivity" Id="127" Name="Continue with Followup" X2ID="d8e90f02-60ed-4551-9397-bf896351c259" Message="Continue with Followup" StageTransitionMessage="Continue with Followup" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Ready To Followup" ToNode="Followup Complete">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Continue_with_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Continue_with_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Continue_with_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1035.71" LocationY="2434.35" Type="SAHL.X2Designer.Items.UserActivity" Id="125" Name="Reinstate Followup" X2ID="0dc2e4cb-a2c9-4d97-bf3d-2d63156054e5" Message="Reinstate Followup" StageTransitionMessage="Reinstate Followup" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_UpdateFollowup" LinkedActivity="" UseLinkedActivity="False" FromNode="Ready To Followup" ToNode="Followup Hold">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="New Business Processor D" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstate_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstate_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstate_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1201.218" LocationY="2537.349" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Archive Completed Followup" X2ID="a9db160e-9826-4121-a621-33650d83c5f8" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Ready To Followup" ToNode="Followup Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Archive_Completed_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Archive_Completed_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Archive Completed Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Archive_Completed_Followup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddDays(10));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="2010.083" LocationY="942.3463" Type="SAHL.X2Designer.Items.UserActivity" Id="127" Name="FL Rework Application" X2ID="dfd67987-154c-4467-8fda-0c0f1a726ce3" Message="FL Rework Application" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_FurtherLendingCalculator" LinkedActivity="" UseLinkedActivity="False" FromNode="Common FL Rework Application" ToNode="Common FL Rework Application">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_FL_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_FL_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_FL_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;FL Rework Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_FL_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1796" DefinitionGroupDescription="Application Management" DefinitionDescription="Rework Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="550.9033" LocationY="282.2425" Type="SAHL.X2Designer.Items.ExternalActivity" Id="127" Name="EXT DataStore FL Doc Recieved" X2ID="d803961c-3f6e-410b-9524-449fb085ba2a" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTDataStore" FromNode="Awaiting Application" ToNode="Multiple Applications">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_DataStore_FL_Doc_Recieved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_DataStore_FL_Doc_Recieved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  EXT DataStore FL Doc Recieved.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_EXT_DataStore_FL_Doc_Recieved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_DataStore_FL_Doc_Recieved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2069" DefinitionGroupDescription="Further Lending" DefinitionDescription="Application Received" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="656.6946" LocationY="1159.349" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="126" Name="Rapid Return" X2ID="39ff85ee-f829-466d-a0ee-43bc4f24f5a3" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Application Type" ToNode="Rapid Post Credit Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rapid_Return(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Application_Management_Data.IsFL)&#xD;&#xA; { &#xD;&#xA;  bool b = false;&#xD;&#xA;  if (Application_Management_Data.OfferTypeKey == 2)&#xD;&#xA;   b = true;&#xD;&#xA;  return b;&#xD;&#xA; }&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rapid_Return(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rapid_Return(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="880.291" LocationY="1507.349" Type="SAHL.X2Designer.Items.UserActivity" Id="127" Name="Retry Instruction" X2ID="bcde748c-99b5-407c-9f12-d01ea458600f" Message="Retry Instruction" StageTransitionMessage="Retry Instruction [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowSubmit" LinkedActivity="" UseLinkedActivity="False" FromNode="Instruct Failed" ToNode="Registration Pipeline">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Retry_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Retry_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;appMan.AddDetailTypeInstructionSent((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;bool b = false;&#xD;&#xA;&#x9;if (string.IsNullOrEmpty(EFID))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;string EFolderID = &quot;&quot;;&#xD;&#xA;&#x9;b = appMan.CreateEWorkPipelineCase((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, out EFolderID);&#xD;&#xA;&#x9;Application_Management_Data.EWorkFolderID = EFolderID;&#xD;&#xA;&#x9;return b;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2REINSTRUCTED, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Retry Instruction.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Retry_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Retry Instruction&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Retry_Instruction(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2125" DefinitionGroupDescription="Registrations" DefinitionDescription="Create EWork PipelineCase" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="896.4446" LocationY="1567.352" Type="SAHL.X2Designer.Items.UserActivity" Id="128" Name="Instruction Failed" X2ID="e077bb01-8afa-4626-9e39-a5416963fe16" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowSubmit" LinkedActivity="" UseLinkedActivity="False" FromNode="Registration Pipeline" ToNode="Instruct Failed">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Instruction_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Instruction_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Instruction_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1001.718" LocationY="1584.349" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="129" Name="Pipeline Case Create Failed" X2ID="17a57037-3b90-4bc0-9a27-9c5dbf15cecb" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="CheckQCAndSendToPipeline" ToNode="Instruct Failed">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Pipeline_Case_Create_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Pipeline_Case_Create_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Pipeline_Case_Create_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="204.7337" LocationY="2400.349" Type="SAHL.X2Designer.Items.ExternalActivity" Id="128" Name="EXT Reinstate" X2ID="b070c8ae-ef8a-4aea-b0fa-02e5c9311217" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTReinstateNTU" FromNode="NTU" ToNode="Return to sender">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Reinstate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Reinstate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{ &#xD;&#xA;&#x9;string AssignedTo = string.Empty;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#xD;&#xA; &#x9;AssignedTo = WorkflowAssignment.HandleApplicationManagementRolesOnReturnFromNTUtoPreviousState((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, Application_Management_Data.PreviousState, Application_Management_Data.IsFL, Application_Management_Data.AppCapIID, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_EXT_Reinstate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Reinstate(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3637" DefinitionGroupDescription="Application Management" DefinitionDescription="EXT Reinstate" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="417.2966" LocationY="2273.349" Type="SAHL.X2Designer.Items.ExternalActivity" Id="129" Name="EXT NTU Final" X2ID="ba6b333b-6e78-4a26-ba97-aa70f2a2e608" Message="" StageTransitionMessage="" Description="" Priority="5" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTNTUFinal" FromNode="NTU" ToNode="Archive NTU">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_NTU_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_NTU_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_EXT_NTU_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_NTU_Final(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3636" DefinitionGroupDescription="Application Management" DefinitionDescription="EXT NTU Final" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1863.129" LocationY="1171.349" Type="SAHL.X2Designer.Items.UserActivity" Id="129" Name="Assign Admin" X2ID="9de7b860-d20c-4336-a2fe-e2cee7d45edf" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_AssignAdmin" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Assign Admin" ToNode="Common Assign Admin">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Assign_Admin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Assign_Admin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Assign_Admin(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="475.2595" LocationY="547.1216" Type="SAHL.X2Designer.Items.ExternalActivity" Id="130" Name="ValuationComplete" X2ID="3249fa7a-c5a7-4a97-bc8c-14105c0f97e5" Message="Valuation Complete" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Child Instance" InvokedBy="EXTValuationComplete" FromNode="Manage Application" ToNode="Manage Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ValuationComplete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ValuationComplete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;appMan.SendEmailToConsultantForValuationDone((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ValuationComplete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1684.447" LocationY="705.6821" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="131" Name="RaiseOnComplete" X2ID="002e7437-0834-412a-8fb1-1f4a84b8763a" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="EXTValuationComplete" SplitWorkFlow="False" FromNode="Valuation Return" ToNode="Archive Valuation Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_RaiseOnComplete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_RaiseOnComplete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_RaiseOnComplete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="487.2544" LocationY="791.015" Type="SAHL.X2Designer.Items.UserActivity" Id="132" Name="Return to Manage Application" X2ID="ca78ba03-baa5-467e-b34b-c7a2a646997d" Message="Returned to Manage Application" StageTransitionMessage="Return to Manage Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Return Processor" ToNode="Manage Application">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_to_Manage_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_to_Manage_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.ArchiveV3ITCForApplication((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 1, -1);&#xD;&#xA;&#x9;common.RemoveApplicationAttribute((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.CreditDisqualified30YearTerm);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;if (common.CheckApplicationHasAttribute((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.Loanwith30YearTerm))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;IApplicationManagement appManagementService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;&#x9;appManagementService.Revert30YearTermApplicationToPreviousTerm((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;&#x9;common.CreateNewRevision((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;New Business Supervisor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;&#x9;WorkflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.ApplicationKey, dys,SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;if (!Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    // reactiveate the NBP users.&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.NewBusinessProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;    WorkflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.FLProcessor);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Return_to_Manage_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Return to Manage Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_to_Manage_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2147" DefinitionGroupDescription="Return to Manage Application" DefinitionDescription="Return to Processor" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1338.955" LocationY="2379.682" Type="SAHL.X2Designer.Items.ExternalActivity" Id="130" Name="EXT_ArchiveFollowup" X2ID="40cd4627-5d23-4fb2-9e17-fdfc2fe295d2" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTArchiveFollowup" FromNode="Common Archive Followup" ToNode="Followup Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_ArchiveFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_ArchiveFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_ArchiveFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1488.094" LocationY="805.6821" Type="SAHL.X2Designer.Items.ExternalActivity" Id="131" Name="EXT_ArchiveValuationClone" X2ID="2f661c41-0fcb-4399-be6e-c1b56b08e292" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTArchiveValuation" FromNode="Valuation Hold" ToNode="Archive Valuation Complete">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_ArchiveValuationClone(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_ArchiveValuationClone(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_ArchiveValuationClone(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1939.137" LocationY="1793.681" Type="SAHL.X2Designer.Items.ExternalActivity" Id="132" Name="EXT_CommonArchiveMain" X2ID="3152d99a-70ee-422d-a8d9-4121ed522018" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTArchiveMainCase" FromNode="CommonArchiveMain" ToNode="Manual Archive">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_CommonArchiveMain(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_CommonArchiveMain(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_CommonArchiveMain(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="245.9401" LocationY="1119.682" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="134" Name="Rapid Submit to Credit" X2ID="4073be7f-65b5-4282-b4ab-37d1021f6b75" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit Hold" ToNode="Rapid Submit to Credit">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rapid_Submit_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rapid_Submit_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rapid_Submit_to_Credit(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="619.0989" LocationY="957.6818" Type="SAHL.X2Designer.Items.CallWorkFlowActivity" Id="134" Name="Readvance Post Credit Appro" X2ID="f3c20c50-813c-42f8-9640-3e4437acdccd" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" WorkFlowToCall="Readvance Payments" ActivityToCall="Readvance Post Credit Appro" ReturnActivity="" FromNode="Rapid Post Credit Hold" ToNode="Readvance Post Credit Appro">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Readvance_Post_Credit_Appro(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Readvance_Post_Credit_Appro(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Readvance_Post_Credit_Appro(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="176.4577" LocationY="2354.909" Type="SAHL.X2Designer.Items.UserActivity" Id="135" Name="NTU PipeLine" X2ID="f7ae4d69-7043-4b81-8fee-6db910b75162" Message="NTU PipeLine" StageTransitionMessage="NTU PipeLine [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_NTU_Pipeline" LinkedActivity="" UseLinkedActivity="False" FromNode="PipeLine NTU" ToNode="NTU">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_NTU_PipeLine(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_NTU_PipeLine(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;bool b = true;&#xD;&#xA;&#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();  &#xD;&#xA;&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;&#x9;if (Application_Management_Data.IsFL)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;FL.InitialFLNTU((IDomainMessageCollection)messages, param.ADUserName, Application_Management_Data.ApplicationKey, instance.ID);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;// tell the user. if it doesnt work then dont perform ntu in ework and roll the case back&#xD;&#xA;&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 4, -1);&#xD;&#xA;&#x9;           &#xD;&#xA;&#x9;appMan.SendEmailToConsultantForQuery((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, instance.ID, 4);&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#x9;if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;string AssignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;AssignedTo = WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;&#x9;&#x9;if(!common.PerformEWorkAction((IDomainMessageCollection)messages,EFID, SAHL.Common.Constants.EworkActionNames.X2NTUAdvise, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName))&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;appMan.NTUCase((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;&#x9;return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  NTU PipeLine.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_NTU_PipeLine(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;NTU PipeLine&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_NTU_PipeLine(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1347" DefinitionGroupDescription="Application Management" DefinitionDescription="NTU" />
            <BusinessStageTransition StageDefinitionKey="3635" DefinitionGroupDescription="Application Management" DefinitionDescription="RegistrationPipelineApplicationNTU" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="778.5183" LocationY="1825.682" Type="SAHL.X2Designer.Items.UserActivity" Id="136" Name="Held Over" X2ID="d5dae8a4-7187-4915-91f7-08af6afbfb3f" Message="Held Over" StageTransitionMessage="Held Over [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disbursement Review" ToNode="Disbursement">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;&#x9;if (EFID != &quot;&quot;)&#xD;&#xA;    {&#xD;&#xA;&#x9;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;&#x9;return common.PerformEWorkAction((IDomainMessageCollection)messages,EFID, SAHL.Common.Constants.EworkActionNames.X2HOLDOVER, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName); &#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Held Over.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Held Over&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1288" DefinitionGroupDescription="Registrations" DefinitionDescription="Held Over" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1070.71" LocationY="492.6821" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="137" Name="MoveSwitch" X2ID="253f036b-75aa-4e57-8023-fe7960fe0f74" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="QA" ToNode="Next Step">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_MoveSwitch(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; bool b = false;&#xD;&#xA; if (Application_Management_Data.OfferTypeKey == 6 || Application_Management_Data.OfferTypeKey == 8)&#xD;&#xA;  b = true;&#xD;&#xA; return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_MoveSwitch(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    common.PricingForRisk((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_MoveSwitch(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="181.6615" LocationY="741.6818" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="138" Name="Return Processor Readvance" X2ID="47d63384-b9e6-4c35-a517-2459a7e23cda" Message="Returned to Processor From Readvance Payments" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Manage Application" ToNode="Return Processor Readvance">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_Processor_Readvance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;// List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;//  dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;//  dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;//  dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;//  dys.Add(&quot;New Business Processor D&quot;);&#xD;&#xA;//  dys.Add(&quot;FL Processor D&quot;);&#xD;&#xA;//  dys.Add(&quot;FL Supervisor D&quot;);&#xD;&#xA;//  dys.Add(&quot;FL Manager D&quot;);&#xD;&#xA;//  WorkflowAssignment.DeActiveUsersForInstance(param.Tran, instance.ID, Application_Management_Data.ApplicationKey, dys, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;// if (!Application_Management_Data.IsFL)&#xD;&#xA;// {&#xD;&#xA;//  // reactiveate the NBP users.&#xD;&#xA;//  WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;// }&#xD;&#xA;// else&#xD;&#xA;// {&#xD;&#xA;//  WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;FL Processor D&quot;, Application_Management_Data.ApplicationKey, 157, instance.ID, &quot;Manage Application&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;// }&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_Processor_Readvance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;// if (!Application_Management_Data.IsFL)&#xD;&#xA;// {&#xD;&#xA;//  // reactiveate the NBP users.&#xD;&#xA;//  WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;New Business Processor D&quot;, Application_Management_Data.ApplicationKey, 106, instance.ID, &quot;Manange Application&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;// }&#xD;&#xA;// else&#xD;&#xA;// {&#xD;&#xA;//  Console.WriteLine(&quot;Further Info Request: - do the FL roles&quot;);&#xD;&#xA;// }&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_Processor_Readvance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="728.1067" LocationY="1553.682" Type="SAHL.X2Designer.Items.ExternalActivity" Id="139" Name="Pipeline Relodge" X2ID="1f2fab33-18eb-4869-9e0d-0d6076a59c70" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTResub" FromNode="Common Relodge" ToNode="Registration Pipeline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Pipeline_Relodge(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Pipeline_Relodge(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Pipeline_Relodge(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="991.396" LocationY="1811.682" Type="SAHL.X2Designer.Items.ExternalActivity" Id="139" Name="Ext Held Over" X2ID="c54de898-1066-4fdc-b08f-6b4fccf67670" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTHeldOver" FromNode="Disbursement Review" ToNode="Disbursement">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Ext_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Ext_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Ext_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Ext_Held_Over(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3640" DefinitionGroupDescription="Registrations" DefinitionDescription="EXT Held Over" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1048.627" LocationY="1914.682" Type="SAHL.X2Designer.Items.ExternalActivity" Id="140" Name="EXT Disburse" X2ID="f42574c4-e7c8-4822-9175-add35fa60b3b" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTDisburseLoan" FromNode="Disbursement Review" ToNode="Disbursed">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Disburse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Disburse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  EXT Disburse.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_EXT_Disburse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Disburse(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3639" DefinitionGroupDescription="Registrations" DefinitionDescription="EXT Disburse" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="919.5128" LocationY="1791.682" Type="SAHL.X2Designer.Items.ExternalActivity" Id="141" Name="Ext Complete" X2ID="138edf92-3336-47e7-8092-fb6044626bc7" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTComplete" FromNode="Disbursement" ToNode="Disbursement Review">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Ext_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Ext_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Ext_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Ext_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3638" DefinitionGroupDescription="Registrations" DefinitionDescription="EXT Complete" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1568.526" LocationY="1698.968" Type="SAHL.X2Designer.Items.UserActivity" Id="138" Name="Reinstruct Attorney" X2ID="e58bb2bc-79cb-42c3-bad2-34d48c5c8d71" Message="Reinstruct Attorney" StageTransitionMessage="Reinstruct Attorney [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="Orig_Correspondence_InstructAttorney_Redirect" LinkedActivity="" UseLinkedActivity="False" FromNode="Resub Application Check" ToNode="Attorney Check">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    return appMan.CheckInstructAttorneyRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Reinstruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reinstruct Attorney&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstruct_Attorney(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3653" DefinitionGroupDescription="Registrations" DefinitionDescription="Reinstructed" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1255.434" LocationY="1806.684" Type="SAHL.X2Designer.Items.UserActivity" Id="137" Name="Force Disbursement Timer" X2ID="fa3c42e9-243d-4017-bf82-7780294b0b52" Message="Force Disbursement Timer" StageTransitionMessage="Force Disbursement Timer [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Disbursed" ToNode="Archive Origination">
          <Access>
            <AccessCollection AccessCollectionItem="ITStaff" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Force_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Force_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Force Disbursement Timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Force_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Force Disbursement Timer&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Force_Disbursement_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2127" DefinitionGroupDescription="Registrations" DefinitionDescription="Disbursement Timer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1426.792" LocationY="1705.682" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="137" Name="Account Create Failed" X2ID="fb419eab-21a9-4187-90d0-9342c51f3eb2" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Attorney Check" ToNode="Account Create Fail Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Account_Create_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Account_Create_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Account_Create_Failed(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1099.778" LocationY="1705.682" Type="SAHL.X2Designer.Items.UserActivity" Id="138" Name="Create Account For Application" X2ID="a8b06d5e-75a9-4f15-b13f-53efa21a61a4" Message="Create Account For Application" StageTransitionMessage="Create Account For Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Account Create Fail Hold" ToNode="CheckQCAndSendToPipeline">
          <Access>
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Account_For_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Account_For_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    common.CreateAccountForApplication((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Create_Account_For_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Account For Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Account_For_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1931" DefinitionGroupDescription="Registrations" DefinitionDescription="AttAssigned" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="2024.467" LocationY="1058.682" Type="SAHL.X2Designer.Items.UserActivity" Id="140" Name="Reload CaseName" X2ID="4791de0c-739f-4725-afea-addb6c6991f9" Message="Reload CaseName" StageTransitionMessage="Reload CaseName" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Reload Case Name" ToNode="Common Reload Case Name">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reload_CaseName(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reload_CaseName(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;string Name = string.Empty;&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey); ;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reload_CaseName(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1128.991" LocationY="787.6821" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="140" Name="SplitVal" X2ID="360b312c-e293-4bbc-b31c-f034e5412b65" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="Check Val" ToNode="Valuation Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_SplitVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_SplitVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_SplitVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="885.2838" LocationY="855.8729" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="141" Name="OnSplitReturn" X2ID="8ed4dab8-35e4-4824-a45e-c2557b4b8cc1" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Val" ToNode="RetManageApp">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnSplitReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnSplitReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnSplitReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1806.494" LocationY="202.6818" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="142" Name="Further Valuation Required" X2ID="8d4102bf-5b19-416b-bda5-af0e9cf967e5" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="SysFurtherVal" ToNode="Further Valuation Required">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Further_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Further_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Further_Valuation_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1940.439" LocationY="270.6819" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="143" Name="OnReturnFurtherVal" X2ID="69fd3a34-85be-4929-b7d4-5ffa4245e594" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="SysFurtherVal" ToNode="ReturnToSender">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnReturnFurtherVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnReturnFurtherVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnReturnFurtherVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1941.113" LocationY="341.6821" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="144" Name="OnReturnReviewVal" X2ID="80ce7082-2eec-499f-b344-d223c4420430" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="SysReviewVal" ToNode="ReturnToSender">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnReturnReviewVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnReturnReviewVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnReturnReviewVal(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1815.164" LocationY="409.6821" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="145" Name="Valuation Review Required" X2ID="8b628a90-d669-4b9e-9497-9c09d406233f" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="SysReviewVal" ToNode="Valuation Review Required">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Valuation_Review_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Valuation_Review_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Valuation_Review_Required(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="2047.993" LocationY="1170.681" Type="SAHL.X2Designer.Items.ExternalActivity" Id="144" Name="OnStuck" X2ID="264619da-ca1f-4a16-a62e-a7c66dd6aea7" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTStuck" FromNode="Common OnStuck" ToNode="Common OnStuck">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnStuck(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnStuck(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnStuck(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1157.696" LocationY="962.6848" Type="SAHL.X2Designer.Items.UserActivity" Id="145" Name="Query Complete" X2ID="d039ed69-63f7-4393-babf-75922cdb68ef" Message="" StageTransitionMessage="Query Complete [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="LOA Query" ToNode="Signed LOA Review">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Query_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Query_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Query_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Query Complete&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Query_Complete(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3711" DefinitionGroupDescription="Post Credit (LOA) Process" DefinitionDescription="Query Resolved" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="105.2526" LocationY="1378.685" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Decline By Credit Timer" X2ID="cf407d93-0819-4971-baa9-b4c0acc0b33d" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Declined by Credit" ToNode="Decline Bin">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_By_Credit_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_By_Credit_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Decline_By_Credit_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="public DateTime GetActivityTime_Decline_By_Credit_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1783" DefinitionGroupDescription="Application Management" DefinitionDescription="Decline Timeout" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1996.806" LocationY="839.6854" Type="SAHL.X2Designer.Items.UserActivity" Id="147" Name="Branch Rework Application" X2ID="c3a87b54-2a37-4dab-b9bf-f414335cda77" Message="Rework Application" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="ApplicationLoanDetailsUpdate" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Branch Rework " ToNode="Common Branch Rework ">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Branch_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Branch_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Branch_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Branch_Rework_Application(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1796" DefinitionGroupDescription="Application Management" DefinitionDescription="Rework Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="843.9636" LocationY="2379.685" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="143" Name="OnCreateFollowup" X2ID="2a45c9c1-d276-4d09-b487-3d82eef09322" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="State99" ToNode="Followup Hold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnCreateFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;    instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;    instance.Name = Application_Management_Data.ApplicationKey.ToString();&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnCreateFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;WorkflowAssignment.CloneActiveSecurityFromInstanceForInstance((IDomainMessageCollection)messages, instance.ParentInstanceID.Value, instance.ID);&#xD;&#xA;&#x9;WorkflowAssignment.ReActivateBranchUsersForOrigination((IDomainMessageCollection)messages, instance.ID, Application_Management_Data.AppCapIID, Application_Management_Data.ApplicationKey, &quot;OnCreateFollowup&quot;,SAHL.Common.Globals.Process.Origination );&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnCreateFollowup(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="843.6304" LocationY="2539.685" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="144" Name="OnFollowupReturn" X2ID="97e7f101-0cb2-403c-a36d-422b9e6646d5" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="State99" ToNode="FollowupReturn">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_OnFollowupReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_OnFollowupReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_OnFollowupReturn(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="2009.373" LocationY="1277.521" Type="SAHL.X2Designer.Items.UserActivity" Id="145" Name="ReAssign Commission Consultant" X2ID="dab21c6a-0117-4699-bbc6-adeb123840f3" Message="" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReassignOriginatingBranchConsultant" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Reassign Commission" ToNode="Common Reassign Commission">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;   if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3842" DefinitionGroupDescription="Application Management" DefinitionDescription="Reassign Commissionable Consultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="144.5679" LocationY="379.2734" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="90 Day Timer" X2ID="0c98c341-608c-450e-9569-f945737c82fb" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Application Query" ToNode="Application Query">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_90_Day_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_90_Day_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    appMan.ActivateNTUFromWatchdogTime((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="OnTimedActivity" Code="public DateTime GetActivityTime_90_Day_Timer(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(9));&#xD;&#xA; return (DateTime.Now.AddDays(90));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="222.3828" LocationY="2255.274" Type="SAHL.X2Designer.Items.ExternalActivity" Id="147" Name="Stale App" X2ID="3ca93b82-199c-497a-ba60-4dbbc8b6fec8" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTWatchdog" FromNode="Common NTU" ToNode="NTU">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Stale_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Stale_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; string EFID = Application_Management_Data.EWorkFolderID;&#xD;&#xA;        IFL FL = DomainServiceLoader.Instance.Get&lt;IFL&gt;();&#xD;&#xA;        ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;        if (Application_Management_Data.IsFL)&#xD;&#xA;        {&#xD;&#xA;            FL.InitialFLNTU((IDomainMessageCollection)messages, param.ADUserName, Application_Management_Data.ApplicationKey, instance.ID);&#xD;&#xA;        }&#xD;&#xA;        // tell the user. if it doesnt work then dont perform ntu in ework and roll the case back&#xD;&#xA;&#xD;&#xA;        common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, 4, -1);&#xD;&#xA;        &#xD;&#xA;        bool b = false;&#xD;&#xA;&#xD;&#xA;        IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;        appMan.SendEmailToConsultantForQuery((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, instance.ID, 4);&#xD;&#xA;&#xD;&#xA;        if (!string.IsNullOrEmpty(EFID))&#xD;&#xA;        {&#xD;&#xA;            IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;            if(!common.PerformEWorkAction((IDomainMessageCollection)messages, EFID, SAHL.Common.Constants.EworkActionNames.X2NTUAdvise, Application_Management_Data.ApplicationKey, param.ADUserName,param.StateName))&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        appMan.NTUCase((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;        return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Stale_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Stale_App(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4190" DefinitionGroupDescription="Application Management" DefinitionDescription="90 Day Timer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="363.8906" LocationY="294.2734" Type="SAHL.X2Designer.Items.UserActivity" Id="148" Name="Create Instance" X2ID="8e10da52-9b6c-42af-8570-d5bf1efb7bea" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="ClapperBoard" ToNode="Assign at QA">
          <Access />
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Instance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Instance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;    ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();  &#xD;&#xA;    string Name = common.GetCaseName((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;    instance.Subject = Name;&#xD;&#xA;    instance.Name = Application_Management_Data.ApplicationKey.ToString();&#xD;&#xA;    Application_Management_Data.IsResub = false;&#xD;&#xA;    int tok = common.GetApplicationType((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;    Application_Management_Data.OfferTypeKey = tok;&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Instance(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1952.833" LocationY="722.1821" Type="SAHL.X2Designer.Items.UserActivity" Id="149" Name="Request Lightstone Valuation" X2ID="f8e02c66-1455-414d-91a1-1b542da658fd" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Lightstone AVM" ToNode="Common Lightstone AVM">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="FL Manager" />
            <AccessCollection AccessCollectionItem="FL Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;    if (!common.CheckPropertyExists((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey))&#xD;&#xA;    {&#xD;&#xA;        return false;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    if (!common.CheckLightStoneValuationRules((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;    {&#xD;&#xA;        return false;&#xD;&#xA;    }&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;    common.DoLightStoneValuationForWorkFlow((IDomainMessageCollection)messages,Application_Management_Data.ApplicationKey, param.ADUserName);&#xD;&#xA;    return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Request_Lightstone_Valuation(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4359" DefinitionGroupDescription="Valuation" DefinitionDescription="Request Lightstone Valuation" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="206.6042" LocationY="2608.273" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="146" Name="Credit Score Decline" X2ID="81de7a35-3d76-478d-b23e-1345386e49f8" Message="Credit Score Decline" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Common Credit Score Decline" ToNode="Decline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Credit_Score_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Credit_Score_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Credit_Score_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Credit_Score_Decline(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4394" DefinitionGroupDescription="Application Management" DefinitionDescription="Credit Score Decline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="233.4335" LocationY="1206.273" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="153" Name="Return from Opt-Out Super Lo" X2ID="e52343ef-dbcc-4b07-8b8f-8f0f6c111b81" Message="Return from Opt-Out Super Lo" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Credit Hold" ToNode="Return from Opt-Out Super Lo">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_from_Opt_Out_Super_Lo(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_from_Opt_Out_Super_Lo(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_from_Opt_Out_Super_Lo(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="746.9022" LocationY="484.2734" Type="SAHL.X2Designer.Items.ReturnWorkflowActivity" Id="155" Name="Return Credit Pre-Approved" X2ID="15469bd8-a5b1-45ac-8faf-a7a3e8e76a12" Message="Credit Valuation Approval" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="System Assign Processor" ToNode="Return Credit Pre-Approved">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Return_Credit_Pre_Approved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //ensure that valuations are required before submitting back to credit&#xD;&#xA; Application_Management_Data.RequireValuation = true;&#xD;&#xA; &#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Return_Credit_Pre_Approved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Return_Credit_Pre_Approved(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </Activity>
        <Activity LocationX="1983.123" LocationY="522.0463" Type="SAHL.X2Designer.Items.UserActivity" Id="168" Name="Confirm Application Employment" X2ID="1b128adc-f298-4d90-9dc8-c2e7f793fac1" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowEmploymentTypeConfirmation" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Application Employment Type Confirmation" ToNode="Common Application Employment Type Confirmation">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="FL Application Processor" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Confirm_Application_Employment(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Confirm_Application_Employment(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; &#x9;int selectedEmploymentType = param.Data == null ? 0 : Convert.ToInt32(param.Data);&#xD;&#xA; &#x9;common.ProcessApplicationForManuallySelectedEmploymentType((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, false, selectedEmploymentType);&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Confirm_Application_Employment(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Confirm_Application_Employment(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4627" DefinitionGroupDescription="Manage Application" DefinitionDescription="Confirm Application Employment" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="329.5417" LocationY="145.2734" Type="SAHL.X2Designer.Items.UserActivity" Id="149" Name="Rework Figures" X2ID="516b3a77-dc1f-4677-af3f-e586e6cfcdfd" Message="" StageTransitionMessage="" Description="Rework Figures" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_FurtherLendingCalculator" LinkedActivity="" UseLinkedActivity="False" FromNode="Awaiting Application" ToNode="Awaiting Application">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="HelpDesk" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Rework_Figures(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Rework_Figures(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Rework_Figures(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return (&quot;Rework Figures&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Rework_Figures(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1796" DefinitionGroupDescription="Application Management" DefinitionDescription="Rework Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="524.3229" LocationY="2249.682" Type="SAHL.X2Designer.Items.UserActivity" Id="150" Name="HelpDesk NTU" X2ID="51419835-213a-403f-9591-c6000cae24df" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="HelpDesk NTU" ToNode="Archive NTU">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="HelpDesk" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_HelpDesk_NTU(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_HelpDesk_NTU(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appMan = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return appMan.HelpDeskNTU((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_HelpDesk_NTU(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_HelpDesk_NTU(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1790" DefinitionGroupDescription="Application Management" DefinitionDescription="NTU Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="454.5938" LocationY="85.09114" Type="SAHL.X2Designer.Items.ExternalActivity" Id="151" Name="Reset 30 Day Timer" X2ID="493ed780-77a7-4335-aaeb-8461f6499d13" Message="" StageTransitionMessage="" Description="Reset 30 Day Timer" Priority="5" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTReset30DayTimer" FromNode="Awaiting Application" ToNode="Awaiting Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reset_30_Day_Timer(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reset_30_Day_Timer(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reset_30_Day_Timer(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="2024.557" LocationY="1432.5" Type="SAHL.X2Designer.Items.UserActivity" Id="152" Name="Send Feedback" X2ID="2b78b42d-fa18-4d2d-bf86-14f971abf0c0" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_SendFeedback" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Send Feedback" ToNode="Common Send Feedback">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Send_Feedback(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;bool isComcorpApplication = common.CheckIsComcorpApplicationRule((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!isComcorpApplication)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Send_Feedback(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Send_Feedback(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Send_Feedback(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4636" DefinitionGroupDescription="Application Management" DefinitionDescription="Comcorp Send Bank Feedback" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1914.263" LocationY="1546.5" Type="SAHL.X2Designer.Items.UserActivity" Id="153" Name="30 Year Term Detail" X2ID="172f3fdf-1fa3-4b88-89df-6b9988914a95" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_30YearTermDetail" LinkedActivity="" UseLinkedActivity="False" FromNode="Common 30 Year Term Detail" ToNode="Common 30 Year Term Detail">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Manager D" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appManagementService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return appManagementService.Check30YearTermApplicationRule((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4656" DefinitionGroupDescription="Application Management" DefinitionDescription="30 Year Term Detail" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1064.422" LocationY="1158.5" Type="SAHL.X2Designer.Items.UserActivity" Id="154" Name="Convert to 30 Year Term" X2ID="3409d9c2-7569-4e21-91e8-432a373da957" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_30YearTermConvert" LinkedActivity="" UseLinkedActivity="False" FromNode="LOA" ToNode="LOA">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Convert_to_30_Year_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appManagementService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return appManagementService.Check30YearTermApplicationRule((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Convert_to_30_Year_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Convert_to_30_Year_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Convert_to_30_Year_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4659" DefinitionGroupDescription="Application Management" DefinitionDescription="Converted to 30 Year Term" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="968.8186" LocationY="1214.727" Type="SAHL.X2Designer.Items.UserActivity" Id="155" Name="Revert to Previous Term" X2ID="4aa7e54e-6d9e-4bb7-a619-1ff00bd1f2e3" Message="" StageTransitionMessage="" Description="" Priority="5" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_30YearTermRevert" LinkedActivity="" UseLinkedActivity="False" FromNode="LOA" ToNode="LOA">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Revert_to_Previous_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appManagementService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return appManagementService.CheckApplicationHas30YearTermRule((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Revert_to_Previous_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Revert_to_Previous_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Revert_to_Previous_Term(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4660" DefinitionGroupDescription="Application Management" DefinitionDescription="Reverted to 20 Year Term" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1892.427" LocationY="1657.5" Type="SAHL.X2Designer.Items.UserActivity" Id="156" Name="SWD Pricing Comparison" X2ID="28e1fd60-8a75-4a66-8e65-b25c53e29aab" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_SWD_PricingComparison" LinkedActivity="" UseLinkedActivity="False" FromNode="Common SWD Pricing Comparison" ToNode="Common SWD Pricing Comparison">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="New Business Processor" />
            <AccessCollection AccessCollectionItem="Registrations LOA Admin" />
            <AccessCollection AccessCollectionItem="Registrations Administrator" />
            <AccessCollection AccessCollectionItem="Registrations Manager" />
            <AccessCollection AccessCollectionItem="Registrations Supervisor" />
            <AccessCollection AccessCollectionItem="New Business Manager" />
            <AccessCollection AccessCollectionItem="Credit Underwriter" />
            <AccessCollection AccessCollectionItem="Credit Manager" />
            <AccessCollection AccessCollectionItem="Credit Supervisor" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
            <AccessCollection AccessCollectionItem="New Business Supervisor" />
            <AccessCollection AccessCollectionItem="QA Administrator D" />
            <AccessCollection AccessCollectionItem="Resubmission Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;if (common.CheckApplicationHasAttribute((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.StopOrderDiscount))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;ICredit creditHost = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;&#x9;&#x9;return creditHost.CheckApplicationIsNewBusinessRule((IDomainMessageCollection)messages, Application_Management_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#x9;&#x9;&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;  messages.AddMessage( new SystemMessage(&quot;Stop Order Discount not applicable on this application&quot;,SystemMessageSeverityEnum.Error));&#xD;&#xA;&#x9;  return false;&#xD;&#xA;&#x9;}&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Management_Data Application_Management_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
      </Activities>
      <Comments />
    </WorkFlow>
    <WorkFlow WorkFlowName="Application Capture" LocationX="20" LocationY="70" GenericKeyTypeKey="2">
      <CustomVariables>
        <CustomVariable Name="ApplicationKey" Length="0" Type="integer" />
        <CustomVariable Name="Last_State" Length="255" Type="string" />
        <CustomVariable Name="Last_NTU_State" Length="255" Type="string" />
        <CustomVariable Name="LeadType" Length="0" Type="integer" />
        <CustomVariable Name="GenericKey" Length="0" Type="integer" />
        <CustomVariable Name="CaseOwnerName" Length="255" Type="string" />
        <CustomVariable Name="AdminUserName" Length="255" Type="string" />
        <CustomVariable Name="IsEA" Length="0" Type="bool" />
        <CustomVariable Name="isEstateAgentApplication" Length="0" Type="bool" />
        <CustomVariable Name="NetLeadXML" Length="0" Type="text" />
      </CustomVariables>
      <ExternalActivities>
        <ExternalActivity Name="ArchiveReminderSource" Description="" />
        <ExternalActivity Name="Create Instance" Description="" />
        <ExternalActivity Name="EXTRefreshTimer" Description="" />
        <ExternalActivity Name="EXTCreateNetLead" Description="" />
        <ExternalActivity Name="EXTCreateNetApplication" Description="" />
        <ExternalActivity Name="EXTCreateApplication" Description="" />
        <ExternalActivity Name="EXTCreateCapitecInstance" Description="" />
      </ExternalActivities>
      <CustomForms>
        <CustomForm Name="App_ApplicatantUpdate" Description="Update Lead" />
        <CustomForm Name="App_ApplicationNotAccepted" Description="Application Not Accepted (NTU)" />
        <CustomForm Name="App_AssignAdmin" Description="Assign Admin" />
        <CustomForm Name="App_AssignEstateAgent" Description="Assign Estate Agency" />
        <CustomForm Name="App_AssignOwningConsulant" Description="Assign Originating Consultant" />
        <CustomForm Name="App_LeadUpdate" Description="Lead Update" />
        <CustomForm Name="App_LoanCalculator" Description="Application Calculator" />
        <CustomForm Name="App_SelectEstateAgentorAgency" Description="Select Estate Agent or Agency" />
        <CustomForm Name="App_SendApplication" Description="Origination Send Application View" />
        <CustomForm Name="ApplicationLoanDetailsUpdate" Description="Application Update Loan Details" />
        <CustomForm Name="ApplicationMemoSummary" Description="Application Memo Summary" />
        <CustomForm Name="CreditScoringSummaryFull" Description="" />
        <CustomForm Name="Orig_AdminDeclineDisplay" Description="Administrative Decline Reasons" />
        <CustomForm Name="Orig_ApplicationSummaryRedirect" Description="Application Summary" />
        <CustomForm Name="Orig_AppNTUDisplay" Description="Application NTU" />
        <CustomForm Name="Orig_CapitecDeclineDisplay" Description="Administrative Decline Reasons" />
        <CustomForm Name="Orig_Correspondence" Description="Correspondence" />
        <CustomForm Name="Orig_DisplayNetLeadXML" Description="Display NetLeadXML created by EXT" />
        <CustomForm Name="Orig_LeadNTUDisplay" Description="Origination NTU" />
        <CustomForm Name="WF_30YearTermDetail" Description="Common 30 Year Term Detail" />
        <CustomForm Name="WF_ApplicationWarnings" Description="Application Warnings" />
        <CustomForm Name="WF_Capitec_Contact_Client" Description="Capitec Contact Client" />
        <CustomForm Name="WF_CorrespondenceHistory" Description="Correspondence History" />
        <CustomForm Name="WF_CreateFollowUp" Description="Create Followup Diary View" />
        <CustomForm Name="WF_Decline_AppCapp" Description="Origination Decline View" />
        <CustomForm Name="WF_FollowUpHold" Description="Callback Hold" />
        <CustomForm Name="WF_LeadNTU" Description="NTU of Lead in Application Capture" />
        <CustomForm Name="WF_Memo" Description="Origination Application Memo view" />
        <CustomForm Name="WF_MemoAdd" Description="Add Memo" />
        <CustomForm Name="WF_MemoSummary" Description="Memo Summary" />
        <CustomForm Name="WF_MemoUpdate" Description="Update Memo" />
        <CustomForm Name="WF_NTU" Description="Application Not Accepted" />
        <CustomForm Name="WF_ReadytoFollowup" Description="Ready to Followup" />
        <CustomForm Name="WF_ReAssign" Description="Common re-assign case view" />
        <CustomForm Name="WF_ReassignOriginatingBranchConsultant" Description="ReAssign Commission Consultant" />
        <CustomForm Name="WF_ReAssignState" Description="Resassign and move case" />
        <CustomForm Name="WF_SendFeedback" Description="Send Feedback" />
        <CustomForm Name="WF_StageTransitionHist" Description="Business Event History" />
        <CustomForm Name="WF_SWD_PricingComparison" Description="Salary with Deduction Pricing Comparison" />
        <CustomForm Name="WF_UpdateFollowup" Description="Update Followup" />
        <CustomForm Name="WorkflowSubmit" Description="" />
        <CustomForm Name="WorkflowYesNo" Description="" />
      </CustomForms>
      <InvisibleAnchorNode LocationX="226.5574" LocationY="250.4673" />
      <Clapperboard LocationX="536.6926" LocationY="151.1541" LimitAccessTo="" Subject="" KeyVariable="ApplicationKey" />
      <States>
        <State LocationX="554.0959" LocationY="1570.874" X2ID="938d188d-48b9-432a-8ed8-b0239d0ad6d2" Type="SAHL.X2Designer.Items.UserState" StateName="Application Capture">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Capture state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Application_Capture(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Capture state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Application_Capture(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;Application Capture&quot;;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
          </CustomForms>
        </State>
        <State LocationX="1513.162" LocationY="447.5435" X2ID="9d0bf9b9-2b99-4815-a70b-4456c6ed073f" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Manage Lead" />
          </AppliesTo>
        </State>
        <State LocationX="1526.161" LocationY="299.5431" X2ID="a4859250-6096-4190-8ad8-54730580ec16" Type="SAHL.X2Designer.Items.UserState" StateName="Followup Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Followup_Hold(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Followup Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Followup_Hold(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="ApplicationMemoSummary" />
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
          </CustomForms>
        </State>
        <State LocationX="1800.494" LocationY="303.897" X2ID="72a14cd0-ab89-4d1c-9e1d-dc6a561d62e4" Type="SAHL.X2Designer.Items.UserState" StateName="Ready to Followup">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Ready to Followup state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Ready_to_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Ready to Followup state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Ready_to_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="WF_ReadytoFollowup" />
          </CustomForms>
        </State>
        <State LocationX="1659.719" LocationY="202.2097" X2ID="383a1beb-9909-49fb-a2b0-ca7c456a2942" Type="SAHL.X2Designer.Items.SystemState" StateName="Forward to last State" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Forward to last State state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Forward_to_last_State(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Forward to last State state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Forward_to_last_State(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Forward to last State state is autoforwarded.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetForwardStateName_Forward_to_last_State(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return Application_Capture_Data.Last_State;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1102.685" LocationY="377.8762" X2ID="36ef6bbb-9a92-4de3-b18e-c987119798f1" Type="SAHL.X2Designer.Items.SystemState" StateName="Awaiting Timeout" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Awaiting Timeout state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Awaiting_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Awaiting Timeout state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Awaiting_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="985.7573" LocationY="1436.789" X2ID="ff5b2507-a11b-46e2-9c71-5a41227b63ec" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Application Submitted" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Submitted state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Application_Submitted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var workflowAssignent = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD);&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD);&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD);&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;applicationCapture.SendNewClientConsultantDetailsSMS((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;workflowAssignent.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Capture_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Submitted state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Application_Submitted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Submitted state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Application_Submitted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="184.5704" LocationY="448.3761" X2ID="c496e860-6ac5-465d-bf80-18bdc3a28dd9" Type="SAHL.X2Designer.Items.SystemState" StateName="Check Source and LeadType" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Check Source and LeadType state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Check_Source_and_LeadType(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; instance.Name = Application_Capture_Data.ApplicationKey.ToString();&#xD;&#xA; Application_Capture_Data.IsEA = false; &#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Check Source and LeadType state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Check_Source_and_LeadType(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1130.229" LocationY="772.9616" X2ID="23ba90f7-acab-4128-b6fe-060964aa68f4" Type="SAHL.X2Designer.Items.UserState" StateName="Contact Client">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Contact Client state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Contact_Client(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;string caseName = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Subject = caseName;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Contact Client state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Contact_Client(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;Contact Client&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="App_LeadUpdate" />
            <CustomFormCollection FormName="WF_MemoSummary" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
          </CustomForms>
        </State>
        <State LocationX="1955.163" LocationY="1090.962" X2ID="b5e2e8ca-9451-49fd-9a89-9062ab1618d2" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Not Accepted">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Not Accepted state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Not Accepted state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = param.StateName;&#xD;&#xA; Application_Capture_Data.Last_NTU_State = param.StateName;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Manage Lead" />
            <AppliesToCollection AppliesToCollectionItem="Estate Agent Application" />
          </AppliesTo>
        </State>
        <State LocationX="1699.431" LocationY="1090.295" X2ID="8f8a48bc-0c5e-499e-9571-15268b4d231d" Type="SAHL.X2Designer.Items.UserState" StateName="App Not Accepted Hold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the App Not Accepted Hold state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_App_Not_Accepted_Hold(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.NTU, -1);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the App Not Accepted Hold state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_App_Not_Accepted_Hold(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //Application_Capture_Data.PreviousState = &quot;App Not Acc&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
            <CustomFormCollection FormName="Orig_LeadNTUDisplay" />
          </CustomForms>
        </State>
        <State LocationX="1238.953" LocationY="1366.628" X2ID="42c3d27d-d571-4bf4-a7d7-6bad6279b5da" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Application Not Accepted" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Not Accepted state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Application_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD);&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD);&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD);&#xD;&#xA;&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.NTU, -1);&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Capture_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Not Accepted state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Application_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Not Accepted state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Application_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1478.092" LocationY="1034.295" X2ID="510c7287-c96a-4e69-9867-f0051e513557" Type="SAHL.X2Designer.Items.SystemState" StateName="Application Reactivated" UseAutoForward="True">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Reactivated state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Application_Reactivated(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Open, -1);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Reactivated state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Application_Reactivated(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="AutoForwardTo" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Application Reactivated state is autoforwarded.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetForwardStateName_Application_Reactivated(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return Application_Capture_Data.Last_State;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1722.245" LocationY="689.6298" X2ID="cba02d3d-47b3-49c0-b025-9b06b41b9ca8" Type="SAHL.X2Designer.Items.CommonState" StateName="Common ReAssign">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common ReAssign state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_ReAssign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common ReAssign state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_ReAssign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Followup Hold" />
            <AppliesToCollection AppliesToCollectionItem="Ready to Followup" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Application Reactivated" />
            <AppliesToCollection AppliesToCollectionItem="Manage Lead" />
            <AppliesToCollection AppliesToCollectionItem="Estate Agent Lead Assign" />
          </AppliesTo>
        </State>
        <State LocationX="859.6252" LocationY="1741.296" X2ID="e71938a8-08cd-41a0-943d-ca9dd9e27dc5" Type="SAHL.X2Designer.Items.UserState" StateName="Manager Review">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manager Review state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Manager_Review(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manager Review state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Manager_Review(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;Manager Review&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_ApplicationWarnings" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1876.99" LocationY="687.6281" X2ID="5b76d356-f207-49d0-aa5f-b7a98ce8cc21" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Application Timeout">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Application Timeout state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Application_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Application Timeout state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Application_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="721.7188" LocationY="771.7418" X2ID="46e5624b-8cc5-4164-bf87-d08a12e02f77" Type="SAHL.X2Designer.Items.UserState" StateName="Manage Lead">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manage Lead state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Manage_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;string caseName = string.Empty;&#xD;&#xA;&#x9;caseName = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Subject = caseName;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Manage Lead state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Manage_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;Manage Lead&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_MemoSummary" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1340.675" LocationY="378.5232" X2ID="fb578ee3-a44e-47dd-a801-157e13620c18" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Reminder" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Reminder state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Reminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Reminder state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Reminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Reminder state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Reminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="1631.189" LocationY="1307.732" X2ID="f944d9d1-dcc3-454e-a776-a5a28a350e21" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Archive">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Archive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="1961.156" LocationY="958.8762" X2ID="62af2cbe-e39e-45b0-81d0-dfe67efe8c32" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="1726.557" LocationY="958.8737" X2ID="53c424fd-4821-4dee-abab-d908f8ec02f1" Type="SAHL.X2Designer.Items.UserState" StateName="Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Declined, -1);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //Application_Capture_Data.PreviousState = &quot;Decline&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_AdminDeclineDisplay" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1446.975" LocationY="958.8762" X2ID="5226e849-5e8a-4388-a358-8dc281467f7d" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Archive Decline" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Archive_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD);&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD);&#xD;&#xA;&#x9;DYs.Add(SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD);&#xD;&#xA;&#x9;common.UpdateOfferStatus((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferStatuses.Declined, -1);&#xD;&#xA;&#x9;workflowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Capture_Data.ApplicationKey, DYs, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Archive_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Archive Decline state is about to be archived.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnReturn_Archive_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="414.2159" LocationY="1086.878" X2ID="b9c81d40-f469-44e4-b1dd-9e8ca3c0033c" Type="SAHL.X2Designer.Items.UserState" StateName="Consultant Assignment">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Consultant Assignment state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Consultant_Assignment(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;if (Application_Capture_Data.LeadType == 0)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;// We never used to have manage lead come down here. Now we do and if you created as a BA you got 3 BA offerroles&#xD;&#xA;&#x9;&#x9;// At this stage we already have an OR so dont do the rubbish below.s&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;if (!Application_Capture_Data.IsEA)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;string assignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;&#x9;workflowAssignment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Consultant Assignment&quot;);&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Consultant Assignment state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Consultant_Assignment(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;Consultant Assignment&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="428.6405" LocationY="909.8792" X2ID="e548664d-fb30-45f1-9a98-d2a81d6b1032" Type="SAHL.X2Designer.Items.SystemState" StateName="UserAssignCheck" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the UserAssignCheck state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_UserAssignCheck(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;string caseName = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Subject = caseName;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the UserAssignCheck state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_UserAssignCheck(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="1893.286" LocationY="580.8763" X2ID="9c0de775-64bc-4305-b2b3-2e09d720286d" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Assign Admin">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Assign Admin state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Assign_Admin(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Assign Admin state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Assign_Admin(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
            <AppliesToCollection AppliesToCollectionItem="Manage Lead" />
            <AppliesToCollection AppliesToCollectionItem="Estate Agent Lead Assign" />
          </AppliesTo>
        </State>
        <State LocationX="314.7135" LocationY="738.8756" X2ID="f119d420-94d6-4122-a60b-f7a5eb6a36e2" Type="SAHL.X2Designer.Items.UserState" StateName="Estate Agent Assign">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Estate Agent Assign state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Estate_Agent_Assign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;string caseName = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Subject = caseName;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Estate Agent Assign state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Estate_Agent_Assign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;Estate Agent Assign&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="962.4324" LocationY="771.8756" X2ID="c80da225-ab08-4c22-87d2-1118d9bb1b41" Type="SAHL.X2Designer.Items.UserState" StateName="Estate Agent Lead Assign">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Estate Agent Lead Assign state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Estate_Agent_Lead_Assign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;string caseName = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Subject = caseName;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Estate Agent Lead Assign state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Estate_Agent_Lead_Assign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;Estate Agent Lead Assign&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1698.844" LocationY="579.8763" X2ID="70530976-b81a-44fc-89a7-924273f6dfa9" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Assign Estate Agent">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Assign Estate Agent state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_Assign_Estate_Agent(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common Assign Estate Agent state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_Assign_Estate_Agent(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="306.9949" LocationY="978.8748" X2ID="ae9f720d-8652-4f4f-9120-afa0c26b963a" Type="SAHL.X2Designer.Items.SystemState" StateName="Check Consultant" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Check Consultant state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Check_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Check Consultant state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Check_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="743.5989" LocationY="428.8763" X2ID="75d36cb5-bc01-4161-88eb-69bbd81eb4ca" Type="SAHL.X2Designer.Items.UserState" StateName="Internet Application">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Internet Application state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;string caseName = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Subject = caseName;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Internet Application state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="754.5339" LocationY="358.8762" X2ID="9c91cc78-176e-4653-87dc-45a0f94d7150" Type="SAHL.X2Designer.Items.UserState" StateName="Internet Lead">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Internet Lead state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;string caseName = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;instance.Subject = caseName;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Internet Lead state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1615.712" LocationY="1366.877" X2ID="274f5ef3-4991-4be6-a6d6-b790a7210efa" Type="SAHL.X2Designer.Items.CommonState" StateName="Common 45 day Archive">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common 45 day Archive state is entered.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnEnter_Common_45_day_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called when the Common 45 day Archive state is exited.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public bool OnExit_Common_45_day_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Estate Agent Assign" />
            <AppliesToCollection AppliesToCollectionItem="Contact Client" />
            <AppliesToCollection AppliesToCollectionItem="Estate Agent Lead Assign" />
            <AppliesToCollection AppliesToCollectionItem="Manage Lead" />
            <AppliesToCollection AppliesToCollectionItem="Internet Application" />
            <AppliesToCollection AppliesToCollectionItem="Internet Lead" />
            <AppliesToCollection AppliesToCollectionItem="Followup Hold" />
            <AppliesToCollection AppliesToCollectionItem="Ready to Followup" />
            <AppliesToCollection AppliesToCollectionItem="Decline" />
            <AppliesToCollection AppliesToCollectionItem="App Not Accepted Hold" />
            <AppliesToCollection AppliesToCollectionItem="Consultant Assignment" />
          </AppliesTo>
        </State>
        <State LocationX="1867.307" LocationY="819.8762" X2ID="e3565020-03f9-4a72-9e04-d332bd3a55fe" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Reassign Commission">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Reassign_Commission(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Reassign_Commission(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="1376.339" LocationY="644.8762" X2ID="83471311-0e7b-434b-b981-9cda3c87298f" Type="SAHL.X2Designer.Items.UserState" StateName="InvalidAppHold">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_InvalidAppHold(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_InvalidAppHold(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.Last_State = &quot;InvalidAppHold&quot;;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="ITStaff" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="631.7578" LocationY="1169.784" X2ID="7e510e41-898c-4d43-8cf1-1330146d86bc" Type="SAHL.X2Designer.Items.SystemState" StateName="Check is EA Application" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Check_is_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Check_is_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="713.2319" LocationY="1347.784" X2ID="456ad266-1de4-4565-9947-822a154e0eac" Type="SAHL.X2Designer.Items.UserState" StateName="Estate Agent Application">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Estate_Agent_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Estate_Agent_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="WF_CorrespondenceHistory" />
            <CustomFormCollection FormName="WF_StageTransitionHist" />
          </CustomForms>
        </State>
        <State LocationX="1878.755" LocationY="440.8762" X2ID="966affeb-98aa-4d82-9ca4-a4040420b9f6" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Estate Agent or Agency">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="App Not Accepted Hold" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
            <AppliesToCollection AppliesToCollectionItem="Decline" />
          </AppliesTo>
        </State>
        <State LocationX="1611.326" LocationY="1476.102" X2ID="1f422d17-ee6f-443c-a451-623fb74689f9" Type="SAHL.X2Designer.Items.CommonState" StateName="Common 90 day Archive">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_90_day_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_90_day_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
          </AppliesTo>
        </State>
        <State LocationX="859.1667" LocationY="143.1027" X2ID="29dd5113-6a37-41a2-aee0-1875f6d4ea79" Type="SAHL.X2Designer.Items.UserState" StateName="Assign TeleConsultant">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Assign_TeleConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Assign_TeleConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;instance.Name = Application_Capture_Data.ApplicationKey.ToString();&#xD;&#xA;&#x9;Application_Capture_Data.IsEA = false;&#xD;&#xA;&#xD;&#xA;&#x9;// Need to insert a row into the WorkflowAssignment table so this case will have someone to go to.&#xD;&#xA;&#x9;string assignedTo = workflowAssignment.InsertInternetLeadWorkflowAssignment((IDomainMessageCollection)messages, instance.ID, Application_Capture_Data.ApplicationKey, &quot;Assign TeleConsultant&quot;);&#xD;&#xA;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="ContactCenter" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_DisplayNetLeadXML" />
          </CustomForms>
        </State>
        <State LocationX="893.4636" LocationY="277.1027" X2ID="c5e23774-5aae-4d3b-8c9d-e138e8f2ec27" Type="SAHL.X2Designer.Items.UserState" StateName="InternetCreate">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_InternetCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_InternetCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_DisplayNetLeadXML" />
          </CustomForms>
        </State>
        <State LocationX="175.9088" LocationY="142.0915" X2ID="6b7c087a-8066-434a-a695-2ae285d3d6ec" Type="SAHL.X2Designer.Items.ArchiveState" StateName="Cache Archive" ReturnActivity="" ReturnWorkflow="">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Cache_Archive(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Cache_Archive(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnReturn" Code="public bool OnReturn_Cache_Archive(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
        </State>
        <State LocationX="46.84119" LocationY="843.5001" X2ID="50c0cbb3-b12c-484c-a1e2-cafdbfca5bca" Type="SAHL.X2Designer.Items.UserState" StateName="Capitec Applications">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Capitec_Applications(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;// do the round robin assignment here (1158 - Telecentre Consultant org structure key)&#xD;&#xA;&#x9;string assignedTo = workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, Application_Capture_Data.ApplicationKey, 1158, instance.ID, &quot;Capitec Applications&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.CapitecConsultant);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;// assign the commisionable consultant&#xD;&#xA;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;workflowAssignment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, assignedTo, Application_Capture_Data.ApplicationKey, &quot;Capitec Applications&quot;);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Capitec_Applications(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;Application_Capture_Data.Last_State = &quot;Capitec Applications&quot;;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant D" />
            <WorkListCollection WorkListCollectionItem="Branch Admin D" />
            <WorkListCollection WorkListCollectionItem="Branch Manager D" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
          </CustomForms>
        </State>
        <State LocationX="20" LocationY="576.5" X2ID="c21c05ab-35ac-4ee1-8b4a-62d7792cbdac" Type="SAHL.X2Designer.Items.SystemState" StateName="CapitecApplicationStatusCheck" UseAutoForward="False">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_CapitecApplicationStatusCheck(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_CapitecApplicationStatusCheck(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList />
          <TrackList />
        </State>
        <State LocationX="120.6901" LocationY="934.5001" X2ID="6a784776-2afb-400d-87e5-1650dcad0a49" Type="SAHL.X2Designer.Items.UserState" StateName="Capitec Branch Decline">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Capitec_Branch_Decline(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Capitec_Branch_Decline(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <WorkList>
            <WorkListCollection WorkListCollectionItem="Branch Consultant" />
            <WorkListCollection WorkListCollectionItem="Branch Admin" />
            <WorkListCollection WorkListCollectionItem="Branch Manager" />
          </WorkList>
          <TrackList />
          <CustomForms>
            <CustomFormCollection FormName="Orig_ApplicationSummaryRedirect" />
            <CustomFormCollection FormName="Orig_CapitecDeclineDisplay" />
          </CustomForms>
        </State>
        <State LocationX="1451.953" LocationY="782.5001" X2ID="9590f827-f58e-427b-9bc9-27de29bfca24" Type="SAHL.X2Designer.Items.CommonState" StateName="Capitec Decline Common">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Capitec_Decline_Common(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Capitec_Decline_Common(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Capitec Branch Decline" />
          </AppliesTo>
        </State>
        <State LocationX="1622.039" LocationY="812.5001" X2ID="611c4c4e-b39b-409e-b062-ca5925473817" Type="SAHL.X2Designer.Items.CommonState" StateName="Common Send Feedback">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_Send_Feedback(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_Send_Feedback(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
          </AppliesTo>
        </State>
        <State LocationX="1463.745" LocationY="587.5001" X2ID="35548196-e6f4-47ee-ac16-56caa12e938c" Type="SAHL.X2Designer.Items.CommonState" StateName="Common 30 Year Term Detail">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
        <State LocationX="1803.909" LocationY="1188.5" X2ID="2473a5b4-dc56-49bc-9544-494389e2e4a8" Type="SAHL.X2Designer.Items.CommonState" StateName="Common SWD Pricing Comparison">
          <CodeSections>
            <CodeSection Name="OnEnter" Code="public bool OnEnter_Common_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnExit" Code="public bool OnExit_Common_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <AppliesTo>
            <AppliesToCollection AppliesToCollectionItem="Application Capture" />
            <AppliesToCollection AppliesToCollectionItem="Manager Review" />
          </AppliesTo>
        </State>
      </States>
      <Activities>
        <Activity LocationX="301.005" LocationY="252.8759" Type="SAHL.X2Designer.Items.UserActivity" Id="1" Name="Create Instance" X2ID="86712696-639d-40c3-9826-1d3feeb8a169" Message="Create Instance" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="ClapperBoard" ToNode="Check Source and LeadType">
          <Access>
            <AccessCollection AccessCollectionItem="Everyone" />
            <AccessCollection AccessCollectionItem="WorkList" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.LeadType = 1;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Instance.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Instance&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2154" DefinitionGroupDescription="Application Lead" DefinitionDescription="Create Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1520.828" LocationY="376.8764" Type="SAHL.X2Designer.Items.UserActivity" Id="2" Name="Create Followup" X2ID="a77c06ee-cda8-4504-8f2a-1cb73df06e7b" Message="Create Followup" StageTransitionMessage="Create Followup [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_CreateFollowUp" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Followup" ToNode="Followup Hold">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Followup&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1756" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Create Followup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1670.161" LocationY="259.5435" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Wait for Followup" X2ID="6f4b2d77-955f-4918-9ff1-b01ad4c1bb40" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Followup Hold" ToNode="Ready to Followup">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Wait_for_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Wait_for_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Wait for Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Wait_for_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Wait for Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Wait_for_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;var followUpTime = common.GetFollowupTime((IDomainMessageCollection)messages, Application_Capture_Data.GenericKey);&#xD;&#xA;&#x9;return followUpTime;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1764" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Wait for Followup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1510.765" LocationY="211.6994" Type="SAHL.X2Designer.Items.UserActivity" Id="4" Name="Continue Application" X2ID="dbfbd5c9-31f1-446d-aa36-0105ff6d6db9" Message="Continue Application" StageTransitionMessage="Continue Application [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Followup Hold" ToNode="Forward to last State">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Continue_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Continue_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Continue Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Continue_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Continue Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Continue_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1750" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Continue Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1783.239" LocationY="211.5636" Type="SAHL.X2Designer.Items.UserActivity" Id="5" Name="Continue with Application" X2ID="2bcdd13d-70d1-4674-935f-851d8fd3f4ae" Message="Continue with Application" StageTransitionMessage="Continue with Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Ready to Followup" ToNode="Forward to last State">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Continue_with_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Continue_with_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Continue with Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Continue_with_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Continue with Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Continue_with_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1751" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Continue with Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1099.776" LocationY="279.2093" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="15 Day Auto Reminder" X2ID="584f06b5-dbe3-4e87-bf4a-13e015304989" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Awaiting Timeout" ToNode="Awaiting Timeout">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_15_Day_Auto_Reminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_15_Day_Auto_Reminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;applicationCapture.SendReminderEMail((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, (long)instance.ParentInstanceID);&#xD;&#xA;&#x9;return true;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  15 Day Auto Reminder.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_15_Day_Auto_Reminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for 15 Day Auto Reminder.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_15_Day_Auto_Reminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddDays(15));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="956" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="30 Day Auto Reminder" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1111.034" LocationY="504.876" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Create Clone" X2ID="34ed556c-7df6-4f1b-ba71-b471af346c2b" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="True" FromNode="Check Source and LeadType" ToNode="Awaiting Timeout">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Clone(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; if (Application_Capture_Data.Last_State == &quot;InvalidAppHold&quot;)&#xD;&#xA; {&#xD;&#xA;  return false;&#xD;&#xA; }&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Clone(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Clone.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Clone(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Create Clone.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Create_Clone(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now);&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1134" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Create Clone" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="474.9374" LocationY="644.296" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="8" Name="Not Direct Consultant" X2ID="630330e8-eec7-4006-8c47-71adab56e085" Message="" StageTransitionMessage="" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="UserAssignCheck">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Not_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (Application_Capture_Data.LeadType == 1)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;string assignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;bool b = applicationCapture.IsEstateAgentInRole((IDomainMessageCollection)messages, instance.CreatorADUserName, SAHL.Common.OrganisationStructure.Admin, SAHL.Common.OrganisationStructure.Manager);&#xD;&#xA;&#x9;&#x9;//Console.WriteLine(&quot;OnStart - Not Direct C:{0}&quot;, b);  &#xD;&#xA;&#x9;&#x9;if (b)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;// dont assign the case owner name .. the admin created it so they must select the owning consultant&#xD;&#xA;&#x9;&#x9;&#x9;workflowAssignment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Check Source And LeadType&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = String.Empty;&#xD;&#xA;&#x9;&#x9;&#x9;return true;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;else&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;// we already know that we are not part of SAHL direct as that check runs at higher priority&#xD;&#xA;&#x9;&#x9;&#x9;// assign case to the creator.&#xD;&#xA;&#x9;&#x9;&#x9;workflowAssignment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;UserAssignCheck&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;//Console.WriteLine(&quot;OnStart - Not Direct C - 2:{0}&quot;, AssignedTo);&#xD;&#xA;&#x9;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = String.Empty;&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;else&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;workflowAssignment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, assignedTo, Application_Capture_Data.ApplicationKey, &quot;UserAssignCheck&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;return true;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Not_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Not Direct Consultant.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Not_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Not_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1164" DefinitionGroupDescription="Application Lead" DefinitionDescription="Not Direct Consultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1121.987" LocationY="679.296" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="9" Name="Direct Consultant" X2ID="bffd59bf-c78f-4159-a15d-3fb1bec2c367" Message="" StageTransitionMessage="" Description="" Priority="6" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="Contact Client">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (Application_Capture_Data.LeadType == 2)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;string assignedTo = workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, Application_Capture_Data.ApplicationKey, 95, instance.ID, &quot;Contact Client&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.DirectConsultant);&#xD;&#xA;&#x9;&#x9;//IX2ReturnData ret = ApplicationCapture.RoundRobinAssignForGivenOrgStructure(param.Tran, out AssignedTo, &quot;Branch Consultant D&quot;, Application_Capture_Data.ApplicationKey, 95);&#xD;&#xA;&#x9;&#x9;if (assignedTo == string.Empty)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;assignedTo = workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, Application_Capture_Data.ApplicationKey, 94, instance.ID, &quot;Contact Client&quot;, SAHL.Common.Globals.Process.Origination, (int)SAHL.Common.Globals.RoundRobinPointers.DirectConsultant);&#xD;&#xA;&#x9;&#x9;&#x9;//ret = ApplicationCapture.RoundRobinAssignForGivenOrgStructure(param.Tran, out AssignedTo, &quot;Branch Admin D&quot;, Application_Capture_Data.ApplicationKey, 94);&#xD;&#xA;&#x9;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;int ManagerOSKey = workflowAssignment.GetBranchManagerOrgStructureKey((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;assignedTo = workflowAssignment.AssignBranchManagerForOrgStrucKey((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD, ManagerOSKey, Application_Capture_Data.ApplicationKey, &quot;Direct Consultant&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;//ret = WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;Branch Manager D&quot;, Application_Capture_Data.ApplicationKey, 96, instance.ID, &quot;Contact Client&quot;, OriginationClient.ProcessName.Origination);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;//ret =ApplicationCapture.RoundRobinAssignForGivenOrgStructure(param.Tran, out AssignedTo, &quot;Branch Manager D&quot;, Application_Capture_Data.ApplicationKey, 96);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;throw new Exception(&quot;Unable to assign Direct users&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;else&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;// Write the Commissionable Consultant Role&#xD;&#xA;&#x9;&#x9;&#x9;applicationCapture.CreateCommissionableConsultantRole((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, assignedTo);&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Direct Consultant.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Direct_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1167" DefinitionGroupDescription="Direct Lead" DefinitionDescription="Direct Consultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="852.1226" LocationY="1004.629" Type="SAHL.X2Designer.Items.UserActivity" Id="10" Name="Create Direct Application" X2ID="08922101-a599-40fc-af63-7e171f878b99" Message="Create Direct Application" StageTransitionMessage="Create Direct Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_LoanCalculator" LinkedActivity="" UseLinkedActivity="False" FromNode="Contact Client" ToNode="Check is EA Application">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Direct_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Direct_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Direct Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Direct_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Direct Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Direct_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2162" DefinitionGroupDescription="Direct Lead" DefinitionDescription="Create Direct Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="777.1475" LocationY="1507.295" Type="SAHL.X2Designer.Items.UserActivity" Id="11" Name="Submit Application" X2ID="9f856c31-dc5d-4435-8e36-372ca636e6a3" Message="Submit Application" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Application Capture" ToNode="Application Submitted">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (!applicationCapture.CheckBranchSubmitApplicationRules((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#xD;&#xA;&#x9;if (!applicationCapture.PromoteLeadToMainApplicant((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;common.PricingForRisk((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;applicationCapture.SubmitApplicationToApplicationManagement((IDomainMessageCollection)messages, instance.ID, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Submit Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2153" DefinitionGroupDescription="Application Capture" DefinitionDescription="Submit Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1820.152" LocationY="1095.961" Type="SAHL.X2Designer.Items.UserActivity" Id="12" Name="Application Not Accepted" X2ID="7738caaf-fdd4-4b88-8b28-f849e050477c" Message="Application Not Accepted" StageTransitionMessage="Application Not Accepted [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_LeadNTU" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Not Accepted" ToNode="App Not Accepted Hold">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Application_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Application_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{ &#xD;&#xA; Application_Capture_Data.Last_State = param.StateName;&#xD;&#xA; Application_Capture_Data.Last_NTU_State = param.StateName;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Application Not Accepted.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Application_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Application Not Accepted&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Application_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="975" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Application Not Accepted" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1440.985" LocationY="1181.295" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Archive Application" X2ID="be2d0319-595a-4c11-9a34-c2809ebc9590" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" FromNode="App Not Accepted Hold" ToNode="Application Not Accepted">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Archive_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Archive_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Archive Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Archive_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Archive Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Archive_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1755" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Archive Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1577.897" LocationY="1067.628" Type="SAHL.X2Designer.Items.UserActivity" Id="14" Name="Reactivate  App Not Accepted" X2ID="7ff014b5-4e76-446d-9ba4-3b1a8f6068ec" Message="Reactivate  App Not Accepted" StageTransitionMessage="Reactivate  App Not Accepted [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="App Not Accepted Hold" ToNode="Application Reactivated">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reactivate__App_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reactivate__App_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reactivate  App Not Accepted.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reactivate__App_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reactivate  App Not Accepted&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reactivate__App_Not_Accepted(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1760" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Reactivate  App Not Accepted" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1626.657" LocationY="683.3165" Type="SAHL.X2Designer.Items.UserActivity" Id="15" Name="ReAssign" X2ID="92073b63-41d0-492c-8c39-8e942a83b2fa" Message="" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssign" LinkedActivity="" UseLinkedActivity="False" FromNode="Common ReAssign" ToNode="Common ReAssign">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ReAssign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ReAssign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  ReAssign.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_ReAssign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ReAssign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1752" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="ReAssign" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="671.2922" LocationY="1650.296" Type="SAHL.X2Designer.Items.UserActivity" Id="16" Name="Escalate to Manager" X2ID="eed7245a-b2e8-48a6-9a14-b823eb7dfa4b" Message="Escalate to Manager" StageTransitionMessage="Escalate to Manager [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Application Capture" ToNode="Manager Review">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Escalate_to_Manager(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Escalate_to_Manager(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var worfklowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;List&lt;string&gt; dys = new List&lt;string&gt;();&#xD;&#xA;&#x9;dys.Add(&quot;Branch Consultant D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Admin D&quot;);&#xD;&#xA;&#x9;dys.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;&#xD;&#xA;&#x9;worfklowAssignment.DeActiveUsersForInstanceAndProcess((IDomainMessageCollection)messages, instance.ID, Application_Capture_Data.ApplicationKey, dys, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;// Create a Manager Role&#xD;&#xA;&#xD;&#xA;&#x9;int managerOrganisationStructureKey = worfklowAssignment.GetBranchManagerOrgStructureKey((IDomainMessageCollection)messages, instance.ID);&#xD;&#xA;&#x9;worfklowAssignment.AssignBranchManagerForOrgStrucKey((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD, managerOrganisationStructureKey, Application_Capture_Data.ApplicationKey, &quot;Manager Review&quot;, SAHL.Common.Globals.Process.Origination);&#xD;&#xA;&#x9;//WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;Branch Manager D&quot;, Application_Capture_Data.ApplicationKey, ManagerOSKey, instance.ID, &quot;Manager Review&quot;, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Escalate_to_Manager(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;return (&quot;Escalate to Manager&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Escalate_to_Manager(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1327" DefinitionGroupDescription="Manager Review Lead" DefinitionDescription="Escalate to Manager" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="556.3782" LocationY="1749.649" Type="SAHL.X2Designer.Items.UserActivity" Id="17" Name="Manager Reassign" X2ID="dba76ea6-4672-4cde-add5-f2f627d0ae9e" Message="Manager Reassign" StageTransitionMessage="Manager Reassign" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReAssignState" LinkedActivity="" UseLinkedActivity="False" FromNode="Manager Review" ToNode="Application Capture">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Manager_Reassign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Manager_Reassign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; // THis is all done by the reassign screen&#xD;&#xA;// // Deactivate the Manager&#xD;&#xA;// WorkflowAssignment.DeActiveUsersForInstance(param.Tran, instance.ID, Application_Capture_Data.ApplicationKey);&#xD;&#xA;// // Create a Manager Role&#xD;&#xA;// int BranchOSKey = WorkflowAssignment.GetBranchConsultantOrgStructureKeyBasedOnManager(param.Tran, instance.ID);&#xD;&#xA;// WorkflowAssignment.ReactiveUserOrRoundRobin(param.Tran, &quot;Branch Consultant D&quot;, Application_Capture_Data.ApplicationKey, BranchOSKey, instance.ID, &quot;Application Capture&quot;);&#xD;&#xA;// int AdminOSKey = WorkflowAssignment.GetBranchAdminOrgStructureKeyBasedOnManager(param.Tran, instance.ID);&#xD;&#xA;// WorkflowAssignment.ReactivateLastUserToWorkOnCaseIfValid(param.Tran, &quot;Branch Admin D&quot;, Application_Capture_Data.ApplicationKey, AdminOSKey, instance.ID, &quot;Application Capture&quot;);&#xD;&#xA;&#xD;&#xA;// List&lt;string&gt; DYs = new List&lt;string&gt;();&#xD;&#xA;// DYs.Add(&quot;Branch Manager D&quot;);&#xD;&#xA;// WorkflowAssignment.DeActiveUsersForInstance(param.Tran, instance.ID, Application_Capture_Data.ApplicationKey, DYs, SAHL.Common.Constants.WorkFlowProcessName.Origination);&#xD;&#xA;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Manager Reassign.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Manager_Reassign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Manager_Reassign(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1206" DefinitionGroupDescription="Manager Review Lead" DefinitionDescription="Manager Reassign" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1079.825" LocationY="1659.296" Type="SAHL.X2Designer.Items.UserActivity" Id="18" Name="Manager Archive" X2ID="14332480-d947-474b-8803-b676cd4c44c4" Message="Manager Archive" StageTransitionMessage="Manager Archive [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Manager Review" ToNode="Application Not Accepted">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Manager_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Manager_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Manager Archive.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Manager_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Manager Archive&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Manager_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1204" DefinitionGroupDescription="Manager Review Lead" DefinitionDescription="Manager Archive" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="385.8176" LocationY="274.4098" Type="SAHL.X2Designer.Items.UserActivity" Id="20" Name="Create Lead" X2ID="3ecaeec6-2fb5-448d-918f-04ab48d943d2" Message="Create Lead" StageTransitionMessage="Create Lead [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="ClapperBoard" ToNode="Check Source and LeadType">
          <Access>
            <AccessCollection AccessCollectionItem="Everyone" />
            <AccessCollection AccessCollectionItem="WorkList" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.LeadType = 0;&#xD;&#xA; //BaseHelper.SendClientSurveyEmail(1, Application_Capture_Data.ApplicationKey, &quot;ClientSurveys@sahomeloans.com&quot;);&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Lead.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Lead&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1062" DefinitionGroupDescription="Lead" DefinitionDescription="Create Lead" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="697.0962" LocationY="678.4102" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="21" Name="Lead - OfferType NONE" X2ID="704a5fee-25e2-46f0-8eeb-083a6c07a3de" Message="" StageTransitionMessage="" Description="" Priority="7" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="Manage Lead">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Lead___OfferType_NONE(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var workflowAssigment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;if (Application_Capture_Data.LeadType == 0)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;string assignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;bool hasAssigned = workflowAssigment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Manage Lead&quot;);&#xD;&#xA;&#x9;&#x9;//IX2ReturnData ret = ApplicationCapture.AssignCreateorAsDynamicRole(param.Tran, out AssignedTo, Application_Capture_Data.ApplicationKey, instance.ID, funcgroupname);&#xD;&#xA;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = String.Empty;&#xD;&#xA;&#x9;&#x9;&#x9;hasAssigned = workflowAssigment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Manage Lead&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;//ret = ApplicationCapture.AssignCreateorAsDynamicRole(param.Tran, out AssignedTo, Application_Capture_Data.ApplicationKey, instance.ID, funcgroupname);&#xD;&#xA;&#x9;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;//int PreviousRoleKey = -1;&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;//BaseHelper.GetPreviousOfferRoleKey(Application_Capture_Data.ApplicationKey, &quot;Branch Admin D&quot;, out PreviousRoleKey);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;hasAssigned = workflowAssigment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Manage Lead&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;else&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;workflowAssigment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, assignedTo, Application_Capture_Data.ApplicationKey, &quot;Manage Lead&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;else&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;&#x9;&#x9;workflowAssigment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, assignedTo, Application_Capture_Data.ApplicationKey, &quot;Manage Lead&quot;);&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Lead___OfferType_NONE(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Lead - OfferType NONE.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Lead___OfferType_NONE(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Lead___OfferType_NONE(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2165" DefinitionGroupDescription="Lead" DefinitionDescription="Lead - OfferType NONE" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="709.8311" LocationY="871.4088" Type="SAHL.X2Designer.Items.UserActivity" Id="22" Name="Create Application" X2ID="8f137d70-41b5-476d-9c53-376769125c61" Message="Create Application" StageTransitionMessage="Create Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_LoanCalculator" LinkedActivity="" UseLinkedActivity="False" FromNode="Manage Lead" ToNode="UserAssignCheck">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="989" DefinitionGroupDescription="Application Capture" DefinitionDescription="Create Lead Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1228.404" LocationY="384.1898" Type="SAHL.X2Designer.Items.ExternalActivity" Id="23" Name="ArchiveReminder" X2ID="633ae251-bd26-4552-9bdf-be1900180c34" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Parent Instance" InvokedBy="ArchiveReminderSource" FromNode="Awaiting Timeout" ToNode="Archive Reminder">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ArchiveReminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ArchiveReminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  ArchiveReminder.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_ArchiveReminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ArchiveReminder(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="958" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Archive Reminder" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="466.5383" LocationY="262.1034" Type="SAHL.X2Designer.Items.ExternalActivity" Id="24" Name="Create Campaign Instance" X2ID="518b3b6d-8f22-4788-8d48-448b0bcfa0b9" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="Create Instance" FromNode="ClapperBoard" ToNode="Check Source and LeadType">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Campaign_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Campaign_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.LeadType = 2;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Campaign Instance.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Campaign_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Campaign_Instance(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1033" DefinitionGroupDescription="Direct Lead" DefinitionDescription="Create Campaign Instance" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="899.8633" LocationY="1600.877" Type="SAHL.X2Designer.Items.UserActivity" Id="26" Name="Manager Submit Application" X2ID="5b0e7bc7-04d6-4c8f-8e5e-9c6702fc4795" Message="Manager Submit Application" StageTransitionMessage="Manager Submit Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Manager Review" ToNode="Application Submitted">
          <Access>
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Manager_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Manager_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (!applicationCapture.CheckManagerSubmitApplicationRules((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;if (!applicationCapture.PromoteLeadToMainApplicant((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning))&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#xD;&#xA;&#x9;common.PricingForRisk((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#x9;&#x9;&#xD;&#xA;&#x9;applicationCapture.SubmitApplicationToApplicationManagement((IDomainMessageCollection)messages, instance.ID, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Manager Submit Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Manager_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Manager Submit Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Manager_Submit_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1105" DefinitionGroupDescription="Manager Review Lead" DefinitionDescription="Manager Submit Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1511.46" LocationY="1312.877" Type="SAHL.X2Designer.Items.UserActivity" Id="27" Name="Archive Lead" X2ID="90b9b5fe-13de-4d9a-974d-f61ea5d5800d" Message="Archive Lead" StageTransitionMessage="Archive Lead [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Archive" ToNode="Application Not Accepted">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Archive_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Archive_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Archive Lead.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Archive_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Archive Lead&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Archive_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="990" DefinitionGroupDescription="Manager Review Lead" DefinitionDescription="Archive Lead" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1849.057" LocationY="963.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="28" Name="Decline" X2ID="bcb4ca7a-3133-4a8d-ac90-2ff0580064b7" Message="Decline" StageTransitionMessage="Decline [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_Decline_AppCapp" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Decline" ToNode="Decline">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; &#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;return applicationCapture.DemoteMainApplicantToLead((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="964" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Decline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1580.995" LocationY="925.8762" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Decline Timeout" X2ID="522bca15-a435-43a3-a09d-255837345b08" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" FromNode="Decline" ToNode="Archive Decline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for Decline Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_Decline_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; //return (DateTime.Now.AddMinutes(15));&#xD;&#xA; return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1753" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Decline Timeout" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1605.063" LocationY="1015.876" Type="SAHL.X2Designer.Items.UserActivity" Id="30" Name="Reactivate Decline" X2ID="2c994b3e-4418-40de-8aa7-2897535afdbe" Message="Reactivate Decline" StageTransitionMessage="Reactivate Decline [CodeChanged]" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Decline" ToNode="Application Reactivated">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reactivate_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reactivate_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Reactivate Decline.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Reactivate_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Reactivate Decline&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reactivate_Decline(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1761" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Reactivate Decline" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1766.568" LocationY="645.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="31" Name="Refresh Application Timeout" X2ID="99f170e7-cefa-4ce0-9b57-db3742fe9c68" Message="" StageTransitionMessage="Refresh Application Timeout [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="EXTRefreshTimer" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Application Timeout" ToNode="Common Application Timeout">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Refresh_Application_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Refresh_Application_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Refresh Application Timeout.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Refresh_Application_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Refresh Application Timeout&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Refresh_Application_Timeout(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1762" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Refresh Application Timeout" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1431.536" LocationY="266.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="32" Name="Update Followup" X2ID="3cbca167-2164-4589-a27a-0e7d6ea22a0e" Message="Update Followup" StageTransitionMessage="Update Followup" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_UpdateFollowup" LinkedActivity="" UseLinkedActivity="False" FromNode="Followup Hold" ToNode="Followup Hold">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Update_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Update_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Update Followup.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Update_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Update_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1763" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Update Followup" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="544.0574" LocationY="1023.878" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="33" Name="ConsultantAssigned" X2ID="d9965f74-ffae-42a9-b9e7-bdc2255eb799" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="UserAssignCheck" ToNode="Check is EA Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ConsultantAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ConsultantAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  ConsultantAssigned.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_ConsultantAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ConsultantAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2157" DefinitionGroupDescription="Application Lead" DefinitionDescription="ConsultantAssigned" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="412.7577" LocationY="1013.878" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="34" Name="ConsultantNotAssigned" X2ID="1596a811-f0c7-4904-b0e1-4b73be9f278e" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="UserAssignCheck" ToNode="Consultant Assignment">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ConsultantNotAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (Application_Capture_Data.CaseOwnerName == &quot;&quot;)&#xD;&#xA; {&#xD;&#xA;  return true;&#xD;&#xA; }&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ConsultantNotAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  ConsultantNotAssigned.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_ConsultantNotAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ConsultantNotAssigned(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2158" DefinitionGroupDescription="Application Lead" DefinitionDescription="ConsultantNotAssigned" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="328.9895" LocationY="1076.877" Type="SAHL.X2Designer.Items.UserActivity" Id="35" Name="AssignConsultant" X2ID="1aad8656-5fd3-4737-aa57-923badf5820d" Message="AssignConsultant" StageTransitionMessage="AssignConsultant [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_AssignOwningConsulant" LinkedActivity="" UseLinkedActivity="False" FromNode="Consultant Assignment" ToNode="Check Consultant">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_AssignConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_AssignConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;if (!Application_Capture_Data.IsEA)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;// go load the latest offerrole that has been saved for he branch consultant or EA consultant and save the map var&#xD;&#xA;&#x9;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;&#x9;s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, instance.ID);&#xD;&#xA;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = s;&#xD;&#xA;&#x9;&#x9;workflowAssignment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, s, Application_Capture_Data.ApplicationKey, &quot;Check Consultant&quot;);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  AssignConsultant.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_AssignConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;AssignConsultant&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_AssignConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2156" DefinitionGroupDescription="Application Lead" DefinitionDescription="AssignConsultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1799.839" LocationY="546.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="36" Name="Assign Admin" X2ID="5158112e-21a5-4339-8a07-f0432151ed2b" Message="Assign Admin" StageTransitionMessage="Assign Admin [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_AssignAdmin" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Assign Admin" ToNode="Common Assign Admin">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Assign_Admin(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Assign_Admin(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Assign Admin.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Assign_Admin(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Assign Admin&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Assign_Admin(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2056" DefinitionGroupDescription="Common Assign" DefinitionDescription="Assign Admin" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="340.6301" LocationY="822.8756" Type="SAHL.X2Designer.Items.UserActivity" Id="37" Name="Assign EstateAgent" X2ID="d49c389b-0cae-41c4-950c-269d236d59a8" Message="Assign EstateAgent" StageTransitionMessage="Assign EstateAgent [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_AssignEstateAgent" LinkedActivity="" UseLinkedActivity="False" FromNode="Estate Agent Assign" ToNode="UserAssignCheck">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Assign_EstateAgent(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Assign_EstateAgent(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Assign EstateAgent.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Assign_EstateAgent(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Assign EstateAgent&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Assign_EstateAgent(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2155" DefinitionGroupDescription="Application Lead" DefinitionDescription="Assign EstateAgent" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="313.7604" LocationY="657.1627" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="38" Name="Is Estate Agent Consultant" X2ID="188f2536-07a9-4c24-80bb-a3113ef943da" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="Estate Agent Assign">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Is_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;if (Application_Capture_Data.LeadType == 1)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;string assignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;bool b = applicationCapture.IsEstateAgentInRole((IDomainMessageCollection)messages, instance.CreatorADUserName, SAHL.Common.OrganisationStructure.Consultant);&#xD;&#xA;&#x9;&#x9;if (b)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;workflowAssignment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Check Source And LeadType&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;// the person is an estate agent admin and not the consultant&#xD;&#xA;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;&#x9;&#x9;Application_Capture_Data.IsEA = true;&#xD;&#xA;&#x9;&#x9;&#x9;workflowAssignment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, assignedTo, Application_Capture_Data.ApplicationKey, &quot;Estate Agent Consultant Assign&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;return b;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Is_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Is Estate Agent Consultant.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Is_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Is_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2160" DefinitionGroupDescription="Application Lead" DefinitionDescription="Is Estate Agent Consultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="972.823" LocationY="680.8762" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="39" Name="Is Estate Agent Lead" X2ID="6d583d69-b30d-4b21-87a9-6015f6c5db46" Message="" StageTransitionMessage="" Description="" Priority="5" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="Estate Agent Lead Assign">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Is_Estate_Agent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;if (Application_Capture_Data.LeadType == 0)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;bool hasAssigned = false;&#xD;&#xA;&#x9;&#x9;string assignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;bool b = applicationCapture.IsEstateAgent((IDomainMessageCollection)messages, instance.CreatorADUserName);&#xD;&#xA;&#x9;&#x9;if (b)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;// Try assign to the constulant (they *should* abe the craetor. If they not try the admin, finally the manager. &#xD;&#xA;&#x9;&#x9;&#x9;// If none of those guys we ahve a problem and cant assign the case.&#xD;&#xA;&#x9;&#x9;&#x9;assignedTo = string.Empty;&#xD;&#xA;&#x9;&#x9;&#x9;hasAssigned = workflowAssignment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Estate Agent Lead Assign&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;hasAssigned = workflowAssignment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Estate Agent Lead Assign&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;hasAssigned = workflowAssignment.AssignCreateorAsDynamicRole((IDomainMessageCollection)messages, instance.ID, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD, out assignedTo, Application_Capture_Data.ApplicationKey, &quot;Estate Agent Lead Assign&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;if (assignedTo == String.Empty)&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;throw new Exception(&quot;Estate Agent User but not a manager/admin/consultant, cannot assign&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;&#x9;&#x9;Application_Capture_Data.IsEA = true;&#xD;&#xA;&#x9;&#x9;&#x9;workflowAssignment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, assignedTo, Application_Capture_Data.ApplicationKey, &quot;Estate Agent Lead Assign&quot;);&#xD;&#xA;&#x9;&#x9;&#x9;return b;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Is_Estate_Agent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Is Estate Agent Lead.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Is_Estate_Agent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Is_Estate_Agent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2164" DefinitionGroupDescription="Lead" DefinitionDescription="Is Estate Agent Lead" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="814.3489" LocationY="776.8756" Type="SAHL.X2Designer.Items.UserActivity" Id="40" Name="Assign EstateAgent Lead" X2ID="8914aa03-dba8-4b3e-9f37-7f70899773f4" Message="Assign EstateAgent Lead" StageTransitionMessage="Assign EstateAgent Lead [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_AssignEstateAgent" LinkedActivity="" UseLinkedActivity="False" FromNode="Estate Agent Lead Assign" ToNode="Manage Lead">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Assign_EstateAgent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Assign_EstateAgent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Assign EstateAgent Lead.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Assign_EstateAgent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Assign EstateAgent Lead&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Assign_EstateAgent_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2163" DefinitionGroupDescription="Lead" DefinitionDescription="Assign EstateAgent Lead" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1594.54" LocationY="555.8763" Type="SAHL.X2Designer.Items.UserActivity" Id="41" Name="Estate Agent Assignment" X2ID="c9a6dc97-f04d-4fc5-9bb2-1405ab8bc24a" Message="Estate Agent Assignment" StageTransitionMessage="Estate Agent Assignment [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_AssignEstateAgent" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Assign Estate Agent" ToNode="Common Assign Estate Agent">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Estate_Agent_Assignment(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Estate_Agent_Assignment(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Estate Agent Assignment.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Estate_Agent_Assignment(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Estate Agent Assignment&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Estate_Agent_Assignment(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1758" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Estate Agent Assignment" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="251.1378" LocationY="880.8756" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="42" Name="Estate Agent Consultant" X2ID="bdc6be25-1ba9-476c-8c28-628633330c08" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Consultant" ToNode="Estate Agent Assign">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;var b = applicationCapture.IsEstateAgent((IDomainMessageCollection)messages, instance.CreatorADUserName);&#xD;&#xA;&#x9;return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Estate Agent Consultant.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2159" DefinitionGroupDescription="Application Lead" DefinitionDescription="Estate Agent Consultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="230.4219" LocationY="1130.875" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="43" Name="Not Estate Agent Consultant" X2ID="f2177779-9bf5-45a9-b569-37265cf885cb" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Consultant" ToNode="Check is EA Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Not_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Not_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Not Estate Agent Consultant.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Not_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Not_Estate_Agent_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2161" DefinitionGroupDescription="Application Lead" DefinitionDescription="Non Estate Agent Consultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1574.854" LocationY="963.8756" Type="SAHL.X2Designer.Items.UserActivity" Id="44" Name="Decline Finalised" X2ID="dc666f35-6441-4b49-b684-74084b86d4d3" Message="Decline Finalised" StageTransitionMessage="Decline Finalised [CodeChanged]" Description="" Priority="3" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Decline" ToNode="Archive Decline">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Decline_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationManagement = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;bool b = false;&#xD;&#xA;&#x9;b = applicationManagement.CheckADUserInSameBranchRules((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning, param.ADUserName);&#xD;&#xA;&#x9;if (!b)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Decline_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Decline Finalised.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Decline_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Decline Finalised&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Decline_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1757" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="Decline Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1479.844" LocationY="1229.875" Type="SAHL.X2Designer.Items.UserActivity" Id="45" Name="App Not Accepted Finalised" X2ID="0ddfb445-9ef2-4d03-8732-36b4d2bd85c1" Message="App Not Accepted Finalised" StageTransitionMessage="App Not Accepted Finalised [CodeChanged]" Description="" Priority="5" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="App Not Accepted Hold" ToNode="Application Not Accepted">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_App_Not_Accepted_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationManagement = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;bool b = false;&#xD;&#xA;&#x9;b = applicationManagement.CheckADUserInSameBranchRules((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning, param.ADUserName);&#xD;&#xA;&#x9;return b;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_App_Not_Accepted_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  App Not Accepted Finalised.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_App_Not_Accepted_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;App Not Accepted Finalised&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_App_Not_Accepted_Finalised(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="1754" DefinitionGroupDescription="Lead and Application Capture" DefinitionDescription="App Not Accepted Finalised" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1255.255" LocationY="678.9876" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="46" Name="Invalid Application" X2ID="ba3e4d81-942f-4464-b4a1-734986454b79" Message="" StageTransitionMessage="" Description="" Priority="10" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="InvalidAppHold">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Invalid_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Invalid_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Invalid_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1235.435" LocationY="477.8764" Type="SAHL.X2Designer.Items.ExternalActivity" Id="47" Name="EXTRefresh Timer" X2ID="bdb4b927-f317-417d-8016-db586f01857f" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Parent Instance" InvokedBy="EXTRefreshTimer" FromNode="Awaiting Timeout" ToNode="Awaiting Timeout">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXTRefresh_Timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXTRefresh_Timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXTRefresh_Timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="468.2969" LocationY="1502.874" Type="SAHL.X2Designer.Items.UserActivity" Id="48" Name="Update Loan Details" X2ID="589a39b4-cd3c-4a5f-ba9e-bee133559b84" Message="Update Loan Details" StageTransitionMessage="Update Loan Details" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="ApplicationLoanDetailsUpdate" LinkedActivity="" UseLinkedActivity="False" FromNode="Application Capture" ToNode="Application Capture">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Update_Loan_Details(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Update_Loan_Details(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Update_Loan_Details(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1665.172" LocationY="304.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="49" Name="Reinstate Followup" X2ID="d3427e2e-454d-486d-b270-b29f7fa8373b" Message="Reinstate Followup" StageTransitionMessage="Reinstate Followup" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_UpdateFollowup" LinkedActivity="" UseLinkedActivity="False" FromNode="Ready to Followup" ToNode="Followup Hold">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Reinstate_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Reinstate_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Reinstate_Followup(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="608.9063" LocationY="262.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="50" Name="Create Application Wizard" X2ID="9fe34766-098d-445d-832d-cf6d37379d43" Message="Create Application Wizard" StageTransitionMessage="Create Application Wizard [CodeChanged]" Description="" Priority="4" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="ClapperBoard" ToNode="Check Source and LeadType">
          <Access>
            <AccessCollection AccessCollectionItem="Everyone" />
            <AccessCollection AccessCollectionItem="WorkList" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Create_Application_Wizard(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Create_Application_Wizard(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Create Application Wizard.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Create_Application_Wizard(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Create Application Wizard&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Create_Application_Wizard(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="2154" DefinitionGroupDescription="Application Lead" DefinitionDescription="Create Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="796.8049" LocationY="312.8762" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="51" Name="Internet Lead" X2ID="799dbace-eb2a-4389-b07e-85e9289d91a7" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="InternetCreate" ToNode="Internet Lead">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (Application_Capture_Data.LeadType == 3)&#xD;&#xA; {&#xD;&#xA;  return true;&#xD;&#xA; }&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return applicationCapture.CreateInternetLead((IDomainMessageCollection)messages,Application_Capture_Data.ApplicationKey,Application_Capture_Data.NetLeadXML,param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Internet Lead.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="86" DefinitionGroupDescription="Lead" DefinitionDescription="Internet Lead" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="893.4844" LocationY="402.8762" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="52" Name="Internet Application" X2ID="09d045ff-b02d-4ca7-9eed-edd20a26617a" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="InternetCreate" ToNode="Internet Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (Application_Capture_Data.LeadType == 4)&#xD;&#xA; {&#xD;&#xA;  return true;&#xD;&#xA; }&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;var applicationCapture = DomainServiceLoader.Instance.Get&lt;IApplicationCapture&gt;();&#xD;&#xA;&#x9;return applicationCapture.CreateInternetApplication((IDomainMessageCollection)messages,Application_Capture_Data.ApplicationKey,Application_Capture_Data.NetLeadXML,param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Internet Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="89" DefinitionGroupDescription="Application Lead" DefinitionDescription="Internet Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="617.3699" LocationY="362.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="55" Name="Process Internet Lead" X2ID="25fd660b-128e-4024-8798-8f618e7e350c" Message="Process Internet Lead" StageTransitionMessage="Process Internet Lead [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Internet Lead" ToNode="Check Source and LeadType">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Process_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Process_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Process Internet Lead.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Process_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Process Internet Lead&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Process_Internet_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="87" DefinitionGroupDescription="Lead" DefinitionDescription="Process Internet Lead" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="580.0496" LocationY="433.8763" Type="SAHL.X2Designer.Items.UserActivity" Id="56" Name="Process Internet Application" X2ID="bdfc09dc-7f81-41f9-959c-5af1abe1f303" Message="Process Internet Application" StageTransitionMessage="Process Internet Application [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="Internet Application" ToNode="Check Source and LeadType">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Process_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Process_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="/// &lt;summary&gt;&#xD;&#xA;///  Process Internet Application.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public string GetStageTransition_Process_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return (&quot;Process Internet Application&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Process_Internet_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="90" DefinitionGroupDescription="Application Lead" DefinitionDescription="Process Internet Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="401.394" LocationY="629.8762" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="57" Name="Is Net App Lead" X2ID="dff1b2db-f33a-45c0-a40b-9bc6b6904153" Message="" StageTransitionMessage="" Description="" Priority="8" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="UserAssignCheck">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Is_Net_App_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (Application_Capture_Data.LeadType == 4)&#xD;&#xA; {&#xD;&#xA;  return true;&#xD;&#xA; }&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Is_Net_App_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Is_Net_App_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="825.9463" LocationY="679.0991" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="58" Name="Is Net Lead" X2ID="067c1553-8613-44da-9350-3f4fca92eed9" Message="" StageTransitionMessage="" Description="" Priority="9" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="Manage Lead">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Is_Net_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  if (Application_Capture_Data.LeadType == 3)&#xD;&#xA; {&#xD;&#xA;  return true;&#xD;&#xA; }&#xD;&#xA; return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Is_Net_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Is_Net_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1507.195" LocationY="1371.877" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="45 day timer" X2ID="7d4a6abd-21c8-4177-8eec-03cb617d1c89" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="ArchiveReminderSource" SplitWorkFlow="False" FromNode="Common 45 day Archive" ToNode="Application Not Accepted">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_45_day_timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_45_day_timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="OnTimedActivity" Code="/// &lt;summary&gt;&#xD;&#xA;/// Called to determine the time value for 45 day timer.&#xD;&#xA;/// &lt;/summary&gt;&#xD;&#xA;public DateTime GetActivityTime_45_day_timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return (DateTime.Now.AddDays(45));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="584.5442" LocationY="817.8762" Type="SAHL.X2Designer.Items.ExternalActivity" Id="61" Name="EXT Create Application" X2ID="9044933f-eff6-424a-8f1b-f5467314285d" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="This Instance" InvokedBy="EXTCreateApplication" FromNode="Manage Lead" ToNode="UserAssignCheck">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Create_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Create_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Create_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1751.323" LocationY="765.5631" Type="SAHL.X2Designer.Items.UserActivity" Id="62" Name="ReAssign Commission Consultant" X2ID="ade71f08-8e05-451e-8e91-c9c96c267ff2" Message="" StageTransitionMessage="Params.Data.ToString() [CodeChanged]" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_ReassignOriginatingBranchConsultant" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Reassign Commission" ToNode="Common Reassign Commission">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;   if (null != param.Data)&#xD;&#xA;    return  param.Data.ToString();&#xD;&#xA; return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ReAssign_Commission_Consultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="3841" DefinitionGroupDescription="Application Capture" DefinitionDescription="Reassign Commissionable Consultant" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="689.1484" LocationY="205.5632" Type="SAHL.X2Designer.Items.ExternalActivity" Id="63" Name="EXT Create Net Lead" X2ID="a5d31d08-95e3-4968-a779-07c24ecb77ab" Message="" StageTransitionMessage="" Description="" Priority="6" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="EXTCreateNetLead" FromNode="ClapperBoard" ToNode="Assign TeleConsultant">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Create_Net_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Create_Net_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.LeadType = 3;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Create_Net_Lead(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="673.3279" LocationY="144.6939" Type="SAHL.X2Designer.Items.ExternalActivity" Id="64" Name="EXT Create Net Application" X2ID="45820191-999d-48ee-a24d-c80d41a4b0b6" Message="" StageTransitionMessage="" Description="" Priority="6" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="EXTCreateNetApplication" FromNode="ClapperBoard" ToNode="Assign TeleConsultant">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Create_Net_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;&#xD;&#xA; &#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Create_Net_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.LeadType = 4;&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Create_Net_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="852.3074" LocationY="568.876" Type="SAHL.X2Designer.Items.UserActivity" Id="65" Name="Retry" X2ID="66c2f499-bcf2-4952-acaf-d2f139ed21e2" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="InvalidAppHold" ToNode="Check Source and LeadType">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="ITStaff" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Retry(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Retry(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Retry(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="1336.307" LocationY="1002.877" Type="SAHL.X2Designer.Items.UserActivity" Id="66" Name="Archive" X2ID="fa111702-98fa-47fa-9191-85d477c15c6b" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WorkflowYesNo" LinkedActivity="" UseLinkedActivity="False" FromNode="InvalidAppHold" ToNode="Application Not Accepted">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="ITStaff" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Archive(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="556.5989" LocationY="1260.875" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="67" Name="not EA Application" X2ID="5dde4196-ab6a-4f11-8904-03156bf9889c" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check is EA Application" ToNode="Application Capture">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_not_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_not_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_not_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_not_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4365" DefinitionGroupDescription="Application Capture" DefinitionDescription="not EA Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="731.1301" LocationY="1258.875" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="68" Name="is EA Application" X2ID="43cb821b-dcb4-4305-899b-9877fbf06f8f" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check is EA Application" ToNode="Estate Agent Application">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_is_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;if (Application_Capture_Data.isEstateAgentApplication)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_is_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_is_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_is_EA_Application(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4366" DefinitionGroupDescription="Application Capture" DefinitionDescription="is EA Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="698.0364" LocationY="1415.875" Type="SAHL.X2Designer.Items.UserActivity" Id="69" Name="Select Estate Agent or Agency" X2ID="7a3c0f2b-51a2-40e8-bff9-bd03cfd378a2" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_SelectEstateAgentorAgency" LinkedActivity="" UseLinkedActivity="False" FromNode="Estate Agent Application" ToNode="Application Capture">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Select_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Select_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Select_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Select_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4367" DefinitionGroupDescription="Application Capture" DefinitionDescription="Select Estate Agent or Agency" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1694.693" LocationY="442.8762" Type="SAHL.X2Designer.Items.UserActivity" Id="70" Name="Update Estate Agent or Agency" X2ID="9105ad6a-7330-4dfd-b476-72543a7ca252" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="App_SelectEstateAgentorAgency" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Estate Agent or Agency" ToNode="Common Estate Agent or Agency">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Update_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Update_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA; Application_Capture_Data.isEstateAgentApplication = true;&#xD;&#xA; return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Update_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;  return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Update_Estate_Agent_or_Agency(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4368" DefinitionGroupDescription="Application Capture" DefinitionDescription="Update Estate Agent or Agency" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1504.81" LocationY="1436.102" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="90 day timer" X2ID="b97de900-5776-4672-9fb4-cfb374f39dd1" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Common 90 day Archive" ToNode="Application Not Accepted">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_90_day_timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_90_day_timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="OnTimedActivity" Code="public DateTime GetActivityTime_90_day_timer(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return (DateTime.Now.AddDays(90));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="880.7839" LocationY="205.1027" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="70" Name="MoveToCreate" X2ID="96dcb4dd-1607-4687-8e97-2593849426e0" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Assign TeleConsultant" ToNode="InternetCreate">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_MoveToCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_MoveToCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_MoveToCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="998.3413" LocationY="148.1027" Type="SAHL.X2Designer.Items.UserActivity" Id="71" Name="RetryAssignTeleConsultant" X2ID="62f2bb07-59ba-412b-b0a0-887cf610b4ad" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="Assign TeleConsultant" ToNode="Assign TeleConsultant">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="ContactCenter" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_RetryAssignTeleConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_RetryAssignTeleConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_RetryAssignTeleConsultant(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="997.2214" LocationY="271.1027" Type="SAHL.X2Designer.Items.UserActivity" Id="73" Name="RetryInternetCreate" X2ID="51fbcc6a-7f8c-451d-aae6-09ef225233d1" Message="" StageTransitionMessage="" Description="" Priority="3" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="InternetCreate" ToNode="InternetCreate">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_RetryInternetCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_RetryInternetCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string Message)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_RetryInternetCreate(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="363.4479" LocationY="148.0912" Type="SAHL.X2Designer.Items.UserActivity" Id="70" Name="Clear Cache" X2ID="738f6155-6605-44a9-a34f-a36d67855ddf" Message="" StageTransitionMessage="" Description="" Priority="7" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="ClapperBoard" ToNode="Cache Archive">
          <Access />
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Clear_Cache(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Clear_Cache(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon client = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; &#x9;client.ClearCache((IDomainMessageCollection)messages, param.Data);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Clear_Cache(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="353.8645" LocationY="85.09114" Type="SAHL.X2Designer.Items.UserActivity" Id="71" Name="ClearRuleCache" X2ID="93159e4c-5b07-4f7d-95ba-276ab9f81452" Message="" StageTransitionMessage="" Description="" Priority="8" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="" LinkedActivity="" UseLinkedActivity="False" FromNode="ClapperBoard" ToNode="Cache Archive">
          <Access />
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_ClearRuleCache(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_ClearRuleCache(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;&#x9;ICommon client = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA; &#x9;client.ClearRuleCache((IDomainMessageCollection)messages);&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_ClearRuleCache(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
        <Activity LocationX="50.63025" LocationY="1576.5" Type="SAHL.X2Designer.Items.UserActivity" Id="72" Name="Contact with Client" X2ID="21931f33-ad83-4b14-92d1-0b389d389ac3" Message="Contact with Client" StageTransitionMessage="" Description="Contact with Client" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_Capitec_Contact_Client" LinkedActivity="" UseLinkedActivity="False" FromNode="Capitec Applications" ToNode="Application Capture">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Contact_with_Client(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Contact_with_Client(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Contact_with_Client(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Contact_with_Client(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4631" DefinitionGroupDescription="Application Capture" DefinitionDescription="Capitec Client Contacted" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="25.15106" LocationY="257.5" Type="SAHL.X2Designer.Items.ExternalActivity" Id="73" Name="EXT Create Capitec Instance" X2ID="9600bde2-e83e-4092-8337-fc9c6946cf64" Message="" StageTransitionMessage="" Description="" Priority="9" RaiseExternalActivity="" SplitWorkFlow="False" ExternalActivityRaiseFolder="Any Instance" InvokedBy="EXTCreateCapitecInstance" FromNode="ClapperBoard" ToNode="CapitecApplicationStatusCheck">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_EXT_Create_Capitec_Instance(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_EXT_Create_Capitec_Instance(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;instance.Name = Application_Capture_Data.ApplicationKey.ToString();&#xD;&#xA;&#x9;instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;Application_Capture_Data.LeadType = 0;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_EXT_Create_Capitec_Instance(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return (&quot;Create Capitec Instance&quot;);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_EXT_Create_Capitec_Instance(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4630" DefinitionGroupDescription="Application Capture" DefinitionDescription="Create Capitec Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="37.69012" LocationY="719.5001" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="74" Name="CapitecOpenApplication" X2ID="88294210-459e-43d3-a860-9d10888ffa22" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="CapitecApplicationStatusCheck" ToNode="Capitec Applications">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_CapitecOpenApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;int appStatus = common.GetApplicationStatus((IDomainMessageCollection)messages,Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#x9;if (appStatus == 1)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return false;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_CapitecOpenApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_CapitecOpenApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_CapitecOpenApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4632" DefinitionGroupDescription="Application Capture" DefinitionDescription="Capitec Open Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="112.7709" LocationY="766.5001" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="75" Name="CapitecDeclinedApplication" X2ID="119c23a5-60fd-44b0-8e1c-af46b865b13f" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="CapitecApplicationStatusCheck" ToNode="Capitec Branch Decline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_CapitecDeclinedApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_CapitecDeclinedApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_CapitecDeclinedApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_CapitecDeclinedApplication(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4633" DefinitionGroupDescription="Application Capture" DefinitionDescription="Capitec Declined Application" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1443.792" LocationY="867.5001" Type="SAHL.X2Designer.Items.TimedActivity" Id="" Name="Capitec Decline Timeout" X2ID="1a2e7d75-65de-431b-a19e-a9c271b07142" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Capitec Decline Common" ToNode="Archive Decline">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Capitec_Decline_Timeout(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Capitec_Decline_Timeout(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Capitec_Decline_Timeout(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnTimedActivity" Code="public DateTime GetActivityTime_Capitec_Decline_Timeout(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return (DateTime.Now.AddDays(30));&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4634" DefinitionGroupDescription="Application Capture" DefinitionDescription="Capitec Declined Timer" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1733.591" LocationY="883.5001" Type="SAHL.X2Designer.Items.UserActivity" Id="77" Name="Send Feedback" X2ID="3378c6fc-c5ad-4115-a947-82ff8731d27c" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_SendFeedback" LinkedActivity="" UseLinkedActivity="False" FromNode="Common Send Feedback" ToNode="Common Send Feedback">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Send_Feedback(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;bool isComcorpApplication = common.CheckIsComcorpApplicationRule((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;&#x9;if(!isComcorpApplication)&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Send_Feedback(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Send_Feedback(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Send_Feedback(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4635" DefinitionGroupDescription="Application Capture" DefinitionDescription="Comcorp Send Bank Feedback" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="190.9205" LocationY="1065.643" Type="SAHL.X2Designer.Items.ConditionalActivity" Id="78" Name="Is Comcorp" X2ID="1ee9a035-3197-49f9-8516-77777f81f524" Message="" StageTransitionMessage="" Description="" Priority="2" RaiseExternalActivity="" SplitWorkFlow="False" FromNode="Check Source and LeadType" ToNode="Application Capture">
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_Is_Comcorp(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;bool isComporp = common.IsComcorpApplication((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;if(isComporp)&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;int orgStructureKey = common.GetComcorpVendorOrgStructureByApplication((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;if(orgStructureKey == -1)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;orgStructureKey = 8102; // 8102 = CAM Consultant Org structure&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;int roundRobinPointerKey = workflowAssignment.GetRoundRobinPointer((IDomainMessageCollection)messages, SAHL.Common.Globals.OfferRoleTypes.BranchConsultantD, orgStructureKey);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;if (roundRobinPointerKey == -1)&#xD;&#xA;&#x9;&#x9;{&#xD;&#xA;&#x9;&#x9;&#x9;roundRobinPointerKey = (int)SAHL.Common.Globals.RoundRobinPointers.CAMConsultant;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;string assignedTo = workflowAssignment.ReactiveUserOrRoundRobinForOSKeyByProcess((IDomainMessageCollection)messages,&#xD;&#xA;&#x9; &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, &#xD;&#xA;&#x9; &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;Application_Capture_Data.ApplicationKey, &#xD;&#xA;&#x9; &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;orgStructureKey,&#xD;&#xA;&#x9; &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;instance.ID, &#xD;&#xA;&#x9; &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&quot;Application Capture&quot;, &#xD;&#xA;&#x9; &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SAHL.Common.Globals.Process.Origination, &#xD;&#xA;&#x9; &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;roundRobinPointerKey);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;Application_Capture_Data.CaseOwnerName = assignedTo;&#xD;&#xA;&#x9;&#x9;workflowAssignment.InsertCommissionableConsultant((IDomainMessageCollection)messages, instance.ID, assignedTo, Application_Capture_Data.ApplicationKey, &quot;Application Capture&quot;);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;instance.Subject = common.GetCaseName((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey);&#xD;&#xA;&#xD;&#xA;&#x9;&#x9;return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else {&#xD;&#xA;&#x9;&#x9;return false;&#xD;&#xA;&#x9;}&#xD;&#xA;}" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_Is_Comcorp(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_Is_Comcorp(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_Is_Comcorp(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4637" DefinitionGroupDescription="Application Lead" DefinitionDescription="Is Comcorp" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1325.297" LocationY="540.5" Type="SAHL.X2Designer.Items.UserActivity" Id="79" Name="30 Year Term Detail" X2ID="2b81bacc-6055-4dd6-a241-587aa6663b74" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_30YearTermDetail" LinkedActivity="" UseLinkedActivity="False" FromNode="Common 30 Year Term Detail" ToNode="Common 30 Year Term Detail">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant D" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Manager D" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IApplicationManagement appManagementService = DomainServiceLoader.Instance.Get&lt;IApplicationManagement&gt;();&#xD;&#xA;&#x9;return appManagementService.Check30YearTermApplicationRule((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="public string GetStageTransition_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_30_Year_Term_Detail(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions>
            <BusinessStageTransition StageDefinitionKey="4657" DefinitionGroupDescription="Application Capture" DefinitionDescription="30 Year Term Detail" />
          </BusinessStageTransitions>
        </Activity>
        <Activity LocationX="1828.461" LocationY="1278.5" Type="SAHL.X2Designer.Items.UserActivity" Id="80" Name="SWD Pricing Comparison" X2ID="5305efe0-6b79-4cee-b987-31622a40adc8" Message="" StageTransitionMessage="" Description="" Priority="1" RaiseExternalActivity="" SplitWorkFlow="False" CustomForm="WF_SWD_PricingComparison" LinkedActivity="" UseLinkedActivity="False" FromNode="Common SWD Pricing Comparison" ToNode="Common SWD Pricing Comparison">
          <Access>
            <AccessCollection AccessCollectionItem="WorkList" />
            <AccessCollection AccessCollectionItem="Branch Consultant" />
            <AccessCollection AccessCollectionItem="Branch Admin" />
            <AccessCollection AccessCollectionItem="Branch Manager" />
          </Access>
          <CodeSections>
            <CodeSection Name="OnStart" Code="public bool OnStartActivity_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;ICommon common = DomainServiceLoader.Instance.Get&lt;ICommon&gt;();&#xD;&#xA;&#x9;if (common.CheckApplicationHasAttribute((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, (int)SAHL.Common.Globals.OfferAttributeTypes.StopOrderDiscount))&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;&#x9;ICredit creditHost = DomainServiceLoader.Instance.Get&lt;ICredit&gt;();&#xD;&#xA;&#x9;&#x9;return creditHost.CheckApplicationIsNewBusinessRule((IDomainMessageCollection)messages, Application_Capture_Data.ApplicationKey, param.IgnoreWarning);&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;else&#x9;&#x9;&#xD;&#xA;&#x9;{&#xD;&#xA;&#x9;  messages.AddMessage( new SystemMessage(&quot;Stop Order Discount not applicable on this application&quot;,SystemMessageSeverityEnum.Error));&#xD;&#xA;&#x9;  return false;&#xD;&#xA;&#x9;}&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnComplete" Code="public bool OnCompleteActivity_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages, ref string alertMessage)&#xD;&#xA;{&#xD;&#xA;&#x9;return true;&#xD;&#xA;}&#xD;&#xA;" />
            <CodeSection Name="OnStageActivity" Code="// You must select and business stage transition to provide code behind." />
            <CodeSection Name="GetActivityMessage" Code="public string GetActivityMessage_SWD_Pricing_Comparison(InstanceDataModel instance, IX2Application_Capture_Data Application_Capture_Data, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;return string.Empty;&#xD;&#xA;}&#xD;&#xA;" />
          </CodeSections>
          <BusinessStageTransitions />
        </Activity>
      </Activities>
      <Comments>
        <Comment LocationX="548.4973" LocationY="697.3762" Name="1 - Create Clone&#xD;&#xA;2 - Is Comcorp&#xD;&#xA;3 - Is Estate Agent Consultant&#xD;&#xA;4 - Not Direct Consultant&#xD;&#xA;5 - Is Estate Agent Lead&#xD;&#xA;6 - Direct Consultant&#xD;&#xA;7 - Lead - OfferType NONE&#xD;&#xA;8 - Is Net App Lead&#xD;&#xA;9 - Is Net Lead&#xD;&#xA;10 - Invalid Application" CommentText="" />
      </Comments>
    </WorkFlow>
  </WorkFlows>
  <Roles>
    <Role Role="Branch Consultant D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Branch_Consultant_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Consultant D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="New Business Processor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_New_Business_Processor_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;New Business Processor D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Registrations LOA Admin D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Registrations_LOA_Admin_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Registrations LOA Admin D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Registrations Administrator D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Registrations_Administrator_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;    IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Registrations Administrator D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Credit Underwriter D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Credit_Underwriter_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Credit Underwriter D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Branch Consultant" Description="Windows User Group" IsDynamic="False" RoleType="Global" />
    <Role Role="Branch Admin" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="New Business Processor" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Registrations LOA Admin" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Registrations Administrator" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Registrations Manager" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Registrations Supervisor" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="New Business Manager" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Credit Exceptions D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Credit">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="    public string OnGetRole_Credit_Credit_Exceptions_D(InstanceDataModel instance,IX2Credit_Data Credit_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        string s = string.Empty;&#xD;&#xA;        s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Credit Exceptions D&quot;, instance.ID);&#xD;&#xA;        return s;&#xD;&#xA;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Credit Manager D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Credit">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="    public string OnGetRole_Credit_Credit_Manager_D(InstanceDataModel instance,IX2Credit_Data Credit_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        string s = string.Empty;&#xD;&#xA;        s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Credit Manager D&quot;, instance.ID);&#xD;&#xA;        return s;&#xD;&#xA;&#xD;&#xA;    }&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Credit Supervisor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Credit">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="    public string OnGetRole_Credit_Credit_Supervisor_D(InstanceDataModel instance,IX2Credit_Data Credit_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        string s = string.Empty;&#xD;&#xA;        s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Credit Supervisor D&quot;, instance.ID);&#xD;&#xA;        return s;&#xD;&#xA;&#xD;&#xA;    }&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Credit Underwriter D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Credit">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="    public string OnGetRole_Credit_Credit_Underwriter_D(InstanceDataModel instance,IX2Credit_Data Credit_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;    {&#xD;&#xA;        IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;        string s = string.Empty;&#xD;&#xA;        s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Credit Underwriter D&quot;, instance.ID);&#xD;&#xA;        return s;&#xD;&#xA;&#xD;&#xA;    }&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Credit Underwriter" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Credit Manager" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Credit Supervisor" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Credit Exceptions" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="FL Application Processor" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="FL Manager" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="FL Supervisor" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="FL Processor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_FL_Processor_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="FL Processor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Readvance Payments">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Readvance_Payments_FL_Processor_D(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;FL Processor D&quot;, instance.ID);&#xD;&#xA;&#x9;return s; &#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="FL Collections Admin D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_FL_Collections_Admin_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;FL Collections D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Resubmission Admin D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Resubmission_Admin_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Resubmission Admin D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Registrations Supervisor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Registrations_Supervisor_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Registrations Supervisor D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Registrations Manager D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Registrations_Manager_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Registrations Manager D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Loss Control QC Collections Admin" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="QC Collections Admin" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="FL Supervisor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Readvance Payments">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Readvance_Payments_FL_Supervisor_D(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;FL Supervisor D&quot;, instance.ID);&#xD;&#xA;&#x9;return s;&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Branch Consultant D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Capture">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Capture_Branch_Consultant_D(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;&#x9;s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchConsultantD, instance.ID);&#xD;&#xA;&#x9;&#x9;return s;&#xD;&#xA;&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Branch Admin D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Capture">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Capture_Branch_Admin_D(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;&#x9;s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchAdminD, instance.ID);&#xD;&#xA;&#x9;&#x9;return s;&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Branch Manager D" Description="Branch Manager D" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Capture">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Capture_Branch_Manager_D(InstanceDataModel instance,IX2Application_Capture_Data Application_Capture_Data  , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;var workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;&#x9;s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, SAHL.Common.ApplicationCapture.WorkflowRoles.BranchManagerD, instance.ID);&#xD;&#xA;&#x9;&#x9;return s;&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Branch Manager" Description="Branch Manager" IsDynamic="False" RoleType="Global" />
    <Role Role="Branch Admin D" Description="Branch Admin D" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Branch_Admin_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Admin D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="FL Collections Admin" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Valuations Manager" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Valuations Admin" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Valuations Manager D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Valuations">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Valuations_Valuations_Manager_D(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Valuations Manager D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Valuations Administrator D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Valuations">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Valuations_Valuations_Administrator_D(InstanceDataModel instance,IX2Valuations_Data Valuations_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA; &#x9;return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Valuations Administrator D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Translate Conditions" Description="Translate Conditions" IsDynamic="False" RoleType="WorkFlow" WorkFlow="Application Management" />
    <Role Role="Translate Conditions D" Description="Translate Conditions D" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Translate_Conditions_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Translate Conditions D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="New Business Supervisor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_New_Business_Supervisor_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;New Business Supervisor D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="New Business Supervisor" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="FL Manager D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_FL_Manager_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;FL Manager D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="FL Manager D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Readvance Payments">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Readvance_Payments_FL_Manager_D(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;    IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    string s = string.Empty;&#xD;&#xA;    s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;FL Manager D&quot;, instance.ID);&#xD;&#xA;    return s;&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="HelpDesk" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Credit Manager D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Credit_Manager_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Credit Manager D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Credit Supervisor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Credit_Supervisor_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Credit Supervisor D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="FL Supervisor D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_FL_Supervisor_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;FL Supervisor D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="QA Administrator D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_QA_Administrator_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;QA Administrator D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="ITStaff" Description="" IsDynamic="False" RoleType="Global" />
    <Role Role="Resubmission Admin" Description="" IsDynamic="False" RoleType="WorkFlow" WorkFlow="Application Management" />
    <Role Role="NBOverride" Description="New Business Override Check" IsDynamic="False" RoleType="Global" />
    <Role Role="RV Admin D" Description="" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Readvance Payments">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Readvance_Payments_RV_Admin_D(InstanceDataModel instance, IX2Readvance_Payments_Data Readvance_Payments_Data, string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA;&#x9;IWorkflowAssignment workflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;&#x9;string s = string.Empty;&#xD;&#xA;&#x9;s = workflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;RV Admin D&quot;, instance.ID);&#xD;&#xA;&#x9;return s;&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="Branch Manager D" Description="Branch Manager D" IsDynamic="True" RoleType="WorkFlow" WorkFlow="Application Management">
      <CodeSections>
        <CodeSection Name="OnGetRole" Code="public string OnGetRole_Application_Management_Branch_Manager_D(InstanceDataModel instance,IX2Application_Management_Data Application_Management_Data , string RoleName, SAHL.Core.X2.IX2Params param, ISystemMessageCollection messages)&#xD;&#xA;{&#xD;&#xA; &#x9;IWorkflowAssignment WorkflowAssignment = DomainServiceLoader.Instance.Get&lt;IWorkflowAssignment&gt;();&#xD;&#xA;    return WorkflowAssignment.ResolveDynamicRoleToUserName((IDomainMessageCollection)messages, &quot;Branch Manager D&quot;, instance.ID);&#xD;&#xA;}&#xD;&#xA;" />
      </CodeSections>
    </Role>
    <Role Role="ContactCenter" Description="ContactCenter" IsDynamic="False" RoleType="Global" />
  </Roles>
  <UsingStatements>
    <UsingStatement Statement="System" />
    <UsingStatement Statement="System.Data" />
    <UsingStatement Statement="System.Xml" />
    <UsingStatement Statement="System.Linq" />
    <UsingStatement Statement="SAHL.Core" />
    <UsingStatement Statement="SAHL.Core.Data" />
    <UsingStatement Statement="SAHL.Core.Data.Context.Configuration" />
    <UsingStatement Statement="SAHL.Core.Data.Models.X2" />
    <UsingStatement Statement="SAHL.Core.Logging" />
    <UsingStatement Statement="SAHL.Core.SystemMessages" />
    <UsingStatement Statement="SAHL.Core.X2" />
    <UsingStatement Statement="SAHL.Core.X2.Providers" />
    <UsingStatement Statement="Newtonsoft.Json" />
    <UsingStatement Statement="DomainService2.IOC" />
    <UsingStatement Statement="X2DomainService.Interface.Common" />
    <UsingStatement Statement="X2DomainService.Interface.Origination" />
    <UsingStatement Statement="X2DomainService.Interface.WorkflowAssignment" />
    <UsingStatement Statement="SAHL.Common.Collections.Interfaces" />
    <UsingStatement Statement="SAHL.Core.Attributes" />
    <UsingStatement Statement="SAHL.Common.Exceptions" />
    <UsingStatement Statement="SAHL.X2.Framework" />
  </UsingStatements>
  <NugetPackages>
    <NugetPackage PackageName="SAHL.Config.Legacy.X2.Maps" Version="0.0.0.0" DependsOn="Nothing" DependsOnVersion="Nothing" />
    <NugetPackage PackageName="SAHL.DomainService.Binaries" Version="0.0.0.0" DependsOn="Nothing" DependsOnVersion="Nothing" />
  </NugetPackages>
  <References>
    <Reference FullName="ActiproSoftware.Shared.Net20, Version=1.0.104.0, Culture=neutral, PublicKeyToken=36ff2196ab5654b9" Path="SAHL.External.Binaries.0.0.0.0\lib\ActiproSoftware.Shared.Net20.dll" Name="ActiproSoftware.Shared.Net20.dll" Version="1.0.104.0" />
    <Reference FullName="ActiproSoftware.SyntaxEditor.Addons.DotNet.Net20, Version=4.0.289.0, Culture=neutral, PublicKeyToken=21a821480e210563" Path="SAHL.External.Binaries.0.0.0.0\lib\ActiproSoftware.SyntaxEditor.Addons.DotNet.Net20.dll" Name="ActiproSoftware.SyntaxEditor.Addons.DotNet.Net20.dll" Version="4.0.289.0" />
    <Reference FullName="ActiproSoftware.SyntaxEditor.Addons.Web.Net20, Version=4.0.289.0, Culture=neutral, PublicKeyToken=21a821480e210563" Path="SAHL.External.Binaries.0.0.0.0\lib\ActiproSoftware.SyntaxEditor.Addons.Web.Net20.dll" Name="ActiproSoftware.SyntaxEditor.Addons.Web.Net20.dll" Version="4.0.289.0" />
    <Reference FullName="ActiproSoftware.SyntaxEditor.Net20, Version=4.0.289.0, Culture=neutral, PublicKeyToken=21a821480e210563" Path="SAHL.External.Binaries.0.0.0.0\lib\ActiproSoftware.SyntaxEditor.Net20.dll" Name="ActiproSoftware.SyntaxEditor.Net20.dll" Version="4.0.289.0" />
    <Reference FullName="ActiproSoftware.WinUICore.Net20, Version=1.0.104.0, Culture=neutral, PublicKeyToken=1eba893a2bc55de5" Path="SAHL.External.Binaries.0.0.0.0\lib\ActiproSoftware.WinUICore.Net20.dll" Name="ActiproSoftware.WinUICore.Net20.dll" Version="1.0.104.0" />
    <Reference FullName="AdcheckObjectLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\AdcheckObjectLibrary.dll" Name="AdcheckObjectLibrary.dll" Version="1.0.0.0" />
    <Reference FullName="AjaxControlToolkit, Version=3.5.40412.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e" Path="SAHL.External.Binaries.0.0.0.0\lib\AjaxControlToolkit.dll" Name="AjaxControlToolkit.dll" Version="3.5.40412.0" />
    <Reference FullName="Antlr3.Runtime, Version=3.1.3.42154, Culture=neutral, PublicKeyToken=3a9cab8f8d22bfb7" Path="SAHL.External.Binaries.0.0.0.0\lib\Antlr3.Runtime.dll" Name="Antlr3.Runtime.dll" Version="3.1.3.42154" />
    <Reference FullName="BdsSoft.DirectoryServices.Linq, Version=1.0.0.0, Culture=neutral, PublicKeyToken=c382851731f5762e" Path="SAHL.External.Binaries.0.0.0.0\lib\BdsSoft.DirectoryServices.Linq.dll" Name="BdsSoft.DirectoryServices.Linq.dll" Version="1.0.0.0" />
    <Reference FullName="Castle.ActiveRecord, Version=3.0.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc" Path="SAHL.External.Binaries.0.0.0.0\lib\Castle.ActiveRecord.dll" Name="Castle.ActiveRecord.dll" Version="3.0.0.0" />
    <Reference FullName="Castle.ActiveRecord.Linq, Version=1.9.101.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc" Path="SAHL.External.Binaries.0.0.0.0\lib\Castle.ActiveRecord.Linq.dll" Name="Castle.ActiveRecord.Linq.dll" Version="1.9.101.0" />
    <Reference FullName="Castle.ActiveRecord.Web, Version=0.0.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc" Path="SAHL.External.Binaries.0.0.0.0\lib\Castle.ActiveRecord.Web.dll" Name="Castle.ActiveRecord.Web.dll" Version="0.0.0.0" />
    <Reference FullName="Castle.Components.Validator, Version=2.5.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc" Path="SAHL.External.Binaries.0.0.0.0\lib\Castle.Components.Validator.dll" Name="Castle.Components.Validator.dll" Version="2.5.0.0" />
    <Reference FullName="Castle.Core, Version=2.5.1.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc" Path="SAHL.External.Binaries.0.0.0.0\lib\Castle.Core.dll" Name="Castle.Core.dll" Version="2.5.1.0" />
    <Reference FullName="CommandLine, Version=1.8.0.7, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\CommandLine.dll" Name="CommandLine.dll" Version="1.8.0.7" />
    <Reference FullName="Dapper, Version=1.12.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\Dapper.dll" Name="Dapper.dll" Version="1.12.0.0" />
    <Reference FullName="DevExpress.Charts.v10.2.Core, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Charts.v10.2.Core.dll" Name="DevExpress.Charts.v10.2.Core.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Data.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Data.v10.2.dll" Name="DevExpress.Data.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.PivotGrid.v10.2.Core, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.PivotGrid.v10.2.Core.dll" Name="DevExpress.PivotGrid.v10.2.Core.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.SpellChecker.v10.2.Core, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.SpellChecker.v10.2.Core.dll" Name="DevExpress.SpellChecker.v10.2.Core.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Utils.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Utils.v10.2.dll" Name="DevExpress.Utils.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.ASPxEditors.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.ASPxEditors.v10.2.dll" Name="DevExpress.Web.ASPxEditors.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.ASPxGridView.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.ASPxGridView.v10.2.dll" Name="DevExpress.Web.ASPxGridView.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.ASPxHtmlEditor.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.ASPxHtmlEditor.v10.2.dll" Name="DevExpress.Web.ASPxHtmlEditor.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.ASPxPivotGrid.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.ASPxPivotGrid.v10.2.dll" Name="DevExpress.Web.ASPxPivotGrid.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.ASPxSpellChecker.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.ASPxSpellChecker.v10.2.dll" Name="DevExpress.Web.ASPxSpellChecker.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.ASPxThemes.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.ASPxThemes.v10.2.dll" Name="DevExpress.Web.ASPxThemes.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.ASPxTreeList.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.ASPxTreeList.v10.2.dll" Name="DevExpress.Web.ASPxTreeList.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.Mvc.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.Mvc.v10.2.dll" Name="DevExpress.Web.Mvc.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.Web.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.Web.v10.2.dll" Name="DevExpress.Web.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.XtraCharts.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.XtraCharts.v10.2.dll" Name="DevExpress.XtraCharts.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.XtraCharts.v10.2.UI, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.XtraCharts.v10.2.UI.dll" Name="DevExpress.XtraCharts.v10.2.UI.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.XtraCharts.v10.2.Web, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.XtraCharts.v10.2.Web.dll" Name="DevExpress.XtraCharts.v10.2.Web.dll" Version="10.2.8.0" />
    <Reference FullName="DevExpress.XtraEditors.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Path="SAHL.External.Binaries.0.0.0.0\lib\DevExpress.XtraEditors.v10.2.dll" Name="DevExpress.XtraEditors.v10.2.dll" Version="10.2.8.0" />
    <Reference FullName="DomainService2, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\DomainService2.dll" Name="DomainService2.dll" Version="0.0.0.0" />
    <Reference FullName="DomainService2.IOC, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\DomainService2.IOC.dll" Name="DomainService2.IOC.dll" Version="0.0.0.0" />
    <Reference FullName="DomainService2.V3.Client, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\DomainService2.V3.Client.dll" Name="DomainService2.V3.Client.dll" Version="0.0.0.0" />
    <Reference FullName="EasyNetQ, Version=0.50.1.392, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\EasyNetQ.dll" Name="EasyNetQ.dll" Version="0.50.1.392" />
    <Reference FullName="EWorkConnector, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\EWorkConnector.dll" Name="EWorkConnector.dll" Version="0.0.0.0" />
    <Reference FullName="ICSharpCode.SharpZipLib, Version=0.85.2.329, Culture=neutral, PublicKeyToken=1b03e6acf1164f73" Path="SAHL.External.Binaries.0.0.0.0\lib\ICSharpCode.SharpZipLib.dll" Name="ICSharpCode.SharpZipLib.dll" Version="0.85.2.329" />
    <Reference FullName="Iesi.Collections, Version=1.0.1.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4" Path="SAHL.External.Binaries.0.0.0.0\lib\Iesi.Collections.dll" Name="Iesi.Collections.dll" Version="1.0.1.0" />
    <Reference FullName="Interop.ActiveDs, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Interop.ActiveDs.dll" Name="Interop.ActiveDs.dll" Version="1.0.0.0" />
    <Reference FullName="itextsharp, Version=5.3.3.0, Culture=neutral, PublicKeyToken=8354ae6d2174ddca" Path="SAHL.External.Binaries.0.0.0.0\lib\itextsharp.dll" Name="itextsharp.dll" Version="5.3.3.0" />
    <Reference FullName="Lucene.Net, Version=2.9.2.2, Culture=neutral, PublicKeyToken=f5940d1699e37ff1" Path="SAHL.External.Binaries.0.0.0.0\lib\Lucene.Net.dll" Name="Lucene.Net.dll" Version="2.9.2.2" />
    <Reference FullName="Machine.Fakes, Version=0.3.5.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Machine.Fakes.dll" Name="Machine.Fakes.dll" Version="0.3.5.0" />
    <Reference FullName="Machine.Fakes.Adapters.Rhinomocks, Version=0.3.5.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Machine.Fakes.Adapters.RhinoMocks.dll" Name="Machine.Fakes.Adapters.Rhinomocks.dll" Version="0.3.5.0" />
    <Reference FullName="Machine.Specifications, Version=0.5.6.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Machine.Specifications.dll" Name="Machine.Specifications.dll" Version="0.5.6.0" />
    <Reference FullName="Machine.Specifications.Clr4, Version=0.5.6.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Machine.Specifications.Clr4.dll" Name="Machine.Specifications.Clr4.dll" Version="0.5.6.0" />
    <Reference FullName="Machine.Specifications.TDNetRunner, Version=0.5.6.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Machine.Specifications.TDNetRunner.dll" Name="Machine.Specifications.TDNetRunner.dll" Version="0.5.6.0" />
    <Reference FullName="Microsoft.ApplicationBlocks.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ApplicationBlocks.Data.dll" Name="Microsoft.ApplicationBlocks.Data.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.ApplicationBlocks.UIProcess, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ApplicationBlocks.UIProcess.dll" Name="Microsoft.ApplicationBlocks.UIProcess.dll" Version="1.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Caching, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Caching.dll" Name="Microsoft.Practices.EnterpriseLibrary.Caching.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Caching.Configuration.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Caching.Configuration.Design.dll" Name="Microsoft.Practices.EnterpriseLibrary.Caching.Configuration.Design.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Caching.Database, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Caching.Database.dll" Name="Microsoft.Practices.EnterpriseLibrary.Caching.Database.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Caching.Database.Configuration.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Caching.Database.Configuration.Design.dll" Name="Microsoft.Practices.EnterpriseLibrary.Caching.Database.Configuration.Design.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Common, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Common.dll" Name="Microsoft.Practices.EnterpriseLibrary.Common.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Configuration.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Configuration.Design.dll" Name="Microsoft.Practices.EnterpriseLibrary.Configuration.Design.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Data.dll" Name="Microsoft.Practices.EnterpriseLibrary.Data.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Data.Configuration.Design.dll" Name="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.Design.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.dll" Name="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.dll" Name="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.EnterpriseLibrary.Logging.dll" Name="Microsoft.Practices.EnterpriseLibrary.Logging.dll" Version="2.0.0.0" />
    <Reference FullName="Microsoft.Practices.ObjectBuilder, Version=1.0.51205.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.Practices.ObjectBuilder.dll" Name="Microsoft.Practices.ObjectBuilder.dll" Version="1.0.51205.0" />
    <Reference FullName="Microsoft.ReportViewer.Common, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ReportViewer.Common.dll" Name="Microsoft.ReportViewer.Common.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.ReportViewer.DataVisualization, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ReportViewer.DataVisualization.DLL" Name="Microsoft.ReportViewer.DataVisualization.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.ReportViewer.Design, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ReportViewer.Design.DLL" Name="Microsoft.ReportViewer.Design.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.ReportViewer.ProcessingObjectModel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ReportViewer.ProcessingObjectModel.dll" Name="Microsoft.ReportViewer.ProcessingObjectModel.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.ReportViewer.WebDesign, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ReportViewer.WebDesign.DLL" Name="Microsoft.ReportViewer.WebDesign.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ReportViewer.WebForms.dll" Name="Microsoft.ReportViewer.WebForms.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.ReportViewer.WinForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.ReportViewer.WinForms.dll" Name="Microsoft.ReportViewer.WinForms.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.SqlServer.ConnectionInfo, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.ConnectionInfo.dll" Name="Microsoft.SqlServer.ConnectionInfo.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.SqlServer.DtsMsg, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.DtsMsg.dll" Name="Microsoft.SqlServer.DtsMsg.dll" Version="9.0.242.0" />
    <Reference FullName="Microsoft.SqlServer.DTSPipelineWrap, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.DTSPipelineWrap.dll" Name="Microsoft.SqlServer.DTSPipelineWrap.dll" Version="9.0.242.0" />
    <Reference FullName="Microsoft.SqlServer.DTSRuntimeWrap, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SQLServer.DTSRuntimeWrap.dll" Name="Microsoft.SqlServer.DTSRuntimeWrap.dll" Version="9.0.242.0" />
    <Reference FullName="Microsoft.SqlServer.ManagedDTS, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SQLServer.ManagedDTS.dll" Name="Microsoft.SqlServer.ManagedDTS.dll" Version="9.0.242.0" />
    <Reference FullName="Microsoft.SqlServer.Management.Sdk.Sfc, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.Management.Sdk.Sfc.dll" Name="Microsoft.SqlServer.Management.Sdk.Sfc.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.SqlServer.msxml6_interop, Version=6.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SQLServer.msxml6_interop.dll" Name="Microsoft.SqlServer.msxml6_interop.dll" Version="6.0.0.0" />
    <Reference FullName="Microsoft.SqlServer.PipelineHost, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.PipelineHost.dll" Name="Microsoft.SqlServer.PipelineHost.dll" Version="9.0.242.0" />
    <Reference FullName="Microsoft.SqlServer.Smo, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.Smo.dll" Name="Microsoft.SqlServer.Smo.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.SqlServer.SqlClrProvider, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.SqlClrProvider.dll" Name="Microsoft.SqlServer.SqlClrProvider.dll" Version="11.0.0.0" />
    <Reference FullName="Microsoft.SqlServer.SqlEnum, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" Path="SAHL.External.Binaries.0.0.0.0\lib\Microsoft.SqlServer.SqlEnum.dll" Name="Microsoft.SqlServer.SqlEnum.dll" Version="11.0.0.0" />
    <Reference FullName="NCover.Framework, Version=1.5.8.0, Culture=neutral, PublicKeyToken=f4018786f4b01bc6" Path="SAHL.External.Binaries.0.0.0.0\lib\NCover.Framework.dll" Name="NCover.Framework.dll" Version="1.5.8.0" />
    <Reference FullName="NDbUnit.Core, Version=1.1.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\NDbUnit.Core.dll" Name="NDbUnit.Core.dll" Version="1.1.0.0" />
    <Reference FullName="NDbUnit.Test, Version=1.1.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.External.Binaries.0.0.0.0\lib\NDbUnit.Test.dll" Name="NDbUnit.Test.dll" Version="1.1.0.0" />
    <Reference FullName="Newtonsoft.Json, Version=6.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\Newtonsoft.Json.dll" Name="Newtonsoft.Json.dll" Version="6.0.0.0" />
    <Reference FullName="NHibernate, Version=3.1.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4" Path="SAHL.External.Binaries.0.0.0.0\lib\NHibernate.dll" Name="NHibernate.dll" Version="3.1.0.4000" />
    <Reference FullName="NHibernate.ByteCode.Castle, Version=3.1.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4" Path="SAHL.External.Binaries.0.0.0.0\lib\NHibernate.ByteCode.Castle.dll" Name="NHibernate.ByteCode.Castle.dll" Version="3.1.0.4000" />
    <Reference FullName="NHibernate.Search, Version=0.0.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc" Path="SAHL.External.Binaries.0.0.0.0\lib\NHibernate.Search.dll" Name="NHibernate.Search.dll" Version="0.0.0.0" />
    <Reference FullName="Ninject, Version=3.0.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7" Path="SAHL.External.Binaries.0.0.0.0\lib\Ninject.dll" Name="Ninject.dll" Version="3.0.0.0" />
    <Reference FullName="Northwoods.Go, Version=4.1.0.4, Culture=neutral, PublicKeyToken=a4e3b7b70161cfe8" Path="SAHL.External.Binaries.0.0.0.0\lib\Northwoods.Go.dll" Name="Northwoods.Go.dll" Version="4.1.0.4" />
    <Reference FullName="Northwoods.Go.Draw, Version=4.1.0.4, Culture=neutral, PublicKeyToken=a4e3b7b70161cfe8" Path="SAHL.External.Binaries.0.0.0.0\lib\Northwoods.Go.Draw.dll" Name="Northwoods.Go.Draw.dll" Version="4.1.0.4" />
    <Reference FullName="Northwoods.Go.Instruments, Version=4.1.0.4, Culture=neutral, PublicKeyToken=a4e3b7b70161cfe8" Path="SAHL.External.Binaries.0.0.0.0\lib\Northwoods.Go.Instruments.dll" Name="Northwoods.Go.Instruments.dll" Version="4.1.0.4" />
    <Reference FullName="Northwoods.Go.Layout, Version=4.1.0.4, Culture=neutral, PublicKeyToken=a4e3b7b70161cfe8" Path="SAHL.External.Binaries.0.0.0.0\lib\Northwoods.Go.Layout.dll" Name="Northwoods.Go.Layout.dll" Version="4.1.0.4" />
    <Reference FullName="Northwoods.Go.Svg, Version=4.1.0.4, Culture=neutral, PublicKeyToken=a4e3b7b70161cfe8" Path="SAHL.External.Binaries.0.0.0.0\lib\Northwoods.Go.Svg.dll" Name="Northwoods.Go.Svg.dll" Version="4.1.0.4" />
    <Reference FullName="Northwoods.Go.Xml, Version=4.1.0.4, Culture=neutral, PublicKeyToken=a4e3b7b70161cfe8" Path="SAHL.External.Binaries.0.0.0.0\lib\Northwoods.Go.Xml.dll" Name="Northwoods.Go.Xml.dll" Version="4.1.0.4" />
    <Reference FullName="nunit.framework, Version=2.6.0.12051, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77" Path="SAHL.External.Binaries.0.0.0.0\lib\nunit.framework.dll" Name="nunit.framework.dll" Version="2.6.0.12051" />
    <Reference FullName="Omu.ValueInjecter, Version=2.3.3.0, Culture=neutral, PublicKeyToken=c7694541b0ac80e4" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\Omu.ValueInjecter.dll" Name="Omu.ValueInjecter.dll" Version="2.3.3.0" />
    <Reference FullName="PDFDocumentWriter, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\PDFDocumentWriter.dll" Name="PDFDocumentWriter.dll" Version="0.0.0.0" />
    <Reference FullName="PostSharp, Version=2.1.0.0, Culture=neutral, PublicKeyToken=b13fd38b8f9c99d7" Path="SAHL.External.Binaries.0.0.0.0\lib\PostSharp.dll" Name="PostSharp.dll" Version="2.1.0.0" />
    <Reference FullName="RabbitMQ.Client, Version=3.5.3.0, Culture=neutral, PublicKeyToken=89e7d7c5feba84ce" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\RabbitMQ.Client.dll" Name="RabbitMQ.Client.dll" Version="3.5.3.0" />
    <Reference FullName="Remotion.Data.Linq, Version=1.13.41.2, Culture=neutral, PublicKeyToken=cab60358ab4081ea" Path="SAHL.External.Binaries.0.0.0.0\lib\Remotion.Data.Linq.dll" Name="Remotion.Data.Linq.dll" Version="1.13.41.2" />
    <Reference FullName="Rhino.Mocks, Version=3.6.0.0, Culture=neutral, PublicKeyToken=0b3305902db7183f" Path="SAHL.External.Binaries.0.0.0.0\lib\Rhino.Mocks.dll" Name="Rhino.Mocks.dll" Version="3.6.0.0" />
    <Reference FullName="SAHL.Common, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.dll" Name="SAHL.Common.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.BusinessModel, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.BusinessModel.dll" Name="SAHL.Common.BusinessModel.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.BusinessModel.DAO, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.BusinessModel.DAO.dll" Name="SAHL.Common.BusinessModel.DAO.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.BusinessModel.Interfaces, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.BusinessModel.Interfaces.dll" Name="SAHL.Common.BusinessModel.Interfaces.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.Logging, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.Logging.dll" Name="SAHL.Common.Logging.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.Service, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.Service.dll" Name="SAHL.Common.Service.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.Service.Interfaces, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.Service.Interfaces.dll" Name="SAHL.Common.Service.Interfaces.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.UI, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.UI.dll" Name="SAHL.Common.UI.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.Web, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.Web.dll" Name="SAHL.Common.Web.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.Web.UI, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.Web.UI.dll" Name="SAHL.Common.Web.UI.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.WebServices, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.WebServices.dll" Name="SAHL.Common.WebServices.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.X2.BusinessModel, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.X2.BusinessModel.dll" Name="SAHL.Common.X2.BusinessModel.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.X2.BusinessModel.DAO, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.X2.BusinessModel.DAO.dll" Name="SAHL.Common.X2.BusinessModel.DAO.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Common.X2.BusinessModel.Interfaces, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Common.X2.BusinessModel.Interfaces.dll" Name="SAHL.Common.X2.BusinessModel.Interfaces.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Communication, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Communication.dll" Name="SAHL.Communication.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Config.Core, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Config.Core.dll" Name="SAHL.Config.Core.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Config.Legacy, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Config.Legacy.dll" Name="SAHL.Config.Legacy.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.dll" Name="SAHL.Core.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.BusinessModel, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.BusinessModel.dll" Name="SAHL.Core.BusinessModel.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Data, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Data.dll" Name="SAHL.Core.Data.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Data.Dapper, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Data.Dapper.dll" Name="SAHL.Core.Data.Dapper.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Data.Models.2AM, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Data.Models.2AM.dll" Name="SAHL.Core.Data.Models.2AM.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Data.Models.Capitec, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Data.Models.Capitec.dll" Name="SAHL.Core.Data.Models.Capitec.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Data.Models.Cuttlefish, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Data.Models.Cuttlefish.dll" Name="SAHL.Core.Data.Models.Cuttlefish.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Data.Models.DecisionTree, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Data.Models.DecisionTree.dll" Name="SAHL.Core.Data.Models.DecisionTree.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Data.Models.X2, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Data.Models.X2.dll" Name="SAHL.Core.Data.Models.X2.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Events, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Events.dll" Name="SAHL.Core.Events.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Logging.Loggers.Database, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Logging.Loggers.Database.dll" Name="SAHL.Core.Logging.Loggers.Database.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Messaging, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Messaging.dll" Name="SAHL.Core.Messaging.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Messaging.EasyNetQ, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Messaging.EasyNetQ.dll" Name="SAHL.Core.Messaging.EasyNetQ.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Messaging.Shared, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Messaging.Shared.dll" Name="SAHL.Core.Messaging.Shared.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.Metrics, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.Metrics.dll" Name="SAHL.Core.Metrics.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.X2, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.X2.dll" Name="SAHL.Core.X2.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Core.X2.Shared, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\SAHL.Core.X2.Shared.dll" Name="SAHL.Core.X2.Shared.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Services.Capitec.Models.Shared, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Services.Capitec.Models.Shared.dll" Name="SAHL.Services.Capitec.Models.Shared.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Shared, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Shared.dll" Name="SAHL.Shared.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.Test, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.Test.dll" Name="SAHL.Test.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.X2.Common, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.X2.Common.dll" Name="SAHL.X2.Common.dll" Version="0.0.0.0" />
    <Reference FullName="SAHL.X2.Framework, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.Internal.Binaries.0.0.0.0\lib\SAHL.X2.Framework.dll" Name="SAHL.X2.Framework.dll" Version="0.0.0.0" />
    <Reference FullName="StructureMap, Version=2.6.4.0, Culture=neutral, PublicKeyToken=e60ad81abae3c223" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\StructureMap.dll" Name="StructureMap.dll" Version="2.6.4.0" />
    <Reference FullName="System.Threading.Tasks.Dataflow, Version=4.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" Path="SAHL.Config.Legacy.X2.Maps.0.0.0.0\lib\net45\System.Threading.Tasks.Dataflow.dll" Name="System.Threading.Tasks.Dataflow.dll" Version="4.5.11.0" />
    <Reference FullName="X2DomainService.Interface.Cap2, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.Cap2.dll" Name="X2DomainService.Interface.Cap2.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.Common, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.Common.dll" Name="X2DomainService.Interface.Common.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.DebtCounselling, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.DebtCounselling.dll" Name="X2DomainService.Interface.DebtCounselling.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.HelpDesk, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.HelpDesk.dll" Name="X2DomainService.Interface.HelpDesk.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.Life, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.Life.dll" Name="X2DomainService.Interface.Life.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.LoanAdjustments, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.LoanAdjustments.dll" Name="X2DomainService.Interface.LoanAdjustments.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.Origination, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.Origination.dll" Name="X2DomainService.Interface.Origination.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.PersonalLoan, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.PersonalLoan.dll" Name="X2DomainService.Interface.PersonalLoan.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.ScenarioMaps, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.ScenarioMaps.dll" Name="X2DomainService.Interface.ScenarioMaps.dll" Version="0.0.0.0" />
    <Reference FullName="X2DomainService.Interface.WorkflowAssignment, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" Path="SAHL.DomainService.Binaries.0.0.0.0\lib\X2DomainService.Interface.WorkflowAssignment.dll" Name="X2DomainService.Interface.WorkflowAssignment.dll" Version="0.0.0.0" />
  </References>
</ProcessName>