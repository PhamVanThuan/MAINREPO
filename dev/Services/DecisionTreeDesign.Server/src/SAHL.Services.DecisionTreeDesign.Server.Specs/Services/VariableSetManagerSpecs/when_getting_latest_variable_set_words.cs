using Machine.Fakes;
using Machine.Specifications;
using SAHL.Core.Data;
using SAHL.Core.Data.Models.DecisionTree;
using SAHL.Services.DecisionTreeDesign.Managers.Variable;
using System.Collections.Generic;
using System.Linq;

namespace SAHL.Services.DecisionTreeDesign.Server.Specs.Services.MessageSetManagerSpecs
{
    [Subject("SAHL.Services.DecisionTree.Services.VariableDataManager.GetLatestVariableSetWords")]
    public class when_getting_latest_variable_set_words : WithFakes
    {
        private static IVariableDataManager dataService;
        private static IVariableManager dataManager;
        private static IUnitOfWorkFactory unitOfWorkFactory;
        private static IEnumerable<string> result;

        private Establish context = () =>
        {
            dataService = An<IVariableDataManager>();
            unitOfWorkFactory = An<IUnitOfWorkFactory>();
            VariableSetDataModel model = new VariableSetDataModel(1, "{\"variables\":{\"groups\":[{\"id\":1,\"name\":\"Capitec\",\"variables\":[{\"id\":165,\"name\":\"Affordability Maximum PTI\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Affordability Maximum PTI used only during pure affordability calculator.\"},{\"id\":166,\"name\":\"Affordability Maximum LTV\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Affordability Maximum LTV used only during pure affordability calculator.\"}],\"groups\":[{\"id\":2,\"name\":\"Credit\",\"variables\":[{\"id\":1,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":2,\"name\":\"Minimum Applicant Age\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Applicant Age\"},{\"id\":3,\"name\":\"Maximum Applicant Age\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Applicant Age\"},{\"id\":144,\"name\":\"Percent Variance on Payment To Income Ratio\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"This the percent to give as a variance on the PTI for a category. If the PTI is beyond the calculated PTI plus this percentage then the application will fall out of the credit matrix.\"},{\"id\":146,\"name\":\"Percent Variance on Category Empirica\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"This is the percent to give a variance on the Empirica for a category. If the Empirica is below the percent variance then the application will fall outside of the credit matrix.\"},{\"id\":164,\"name\":\"Investment Property Maximum LTV\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Investment Property Maximum LTV\"}],\"groups\":[{\"id\":7,\"name\":\"Salaried\",\"variables\":[{\"id\":23,\"name\":\"Minimum Loan Amount\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Salaried Minimum Loan Amount\"},{\"id\":24,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Salaried Minimum Household Income\"},{\"id\":51,\"name\":\"Maximum Loan Amount Loan Size Range 1\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 1\"},{\"id\":52,\"name\":\"Maximum Loan Amount Loan Size Range 2\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 2\"},{\"id\":53,\"name\":\"Maximum Loan Amount Loan Size Range 3\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 3\"},{\"id\":124,\"name\":\"Maximum Loan Amount\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount\"}],\"groups\":[{\"id\":19,\"name\":\"Category 0\",\"variables\":[{\"id\":62,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":66,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":126,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 0 Link Rate\"},{\"id\":150,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 0 Minimum Household Income\"}],\"groups\":[{\"id\":42,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":63,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":43,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":64,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":44,\"name\":\"Loan Size Range 3\",\"variables\":[{\"id\":65,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":20,\"name\":\"Category 1\",\"variables\":[{\"id\":69,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":70,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":127,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 1 Link Rate\"},{\"id\":151,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 1 Minimum Household Income\"}],\"groups\":[{\"id\":45,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":67,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":46,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":68,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":21,\"name\":\"Category 3\",\"variables\":[{\"id\":71,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":72,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":128,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 3 Link Rate\"},{\"id\":152,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 3 Minimum Household Income\"}],\"groups\":[{\"id\":47,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":73,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":48,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":74,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":22,\"name\":\"Category 4\",\"variables\":[{\"id\":77,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":78,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":129,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 4 Link Rate\"},{\"id\":153,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 4 Minimum Household Income\"}],\"groups\":[{\"id\":49,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":75,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":50,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":76,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":23,\"name\":\"Category 5\",\"variables\":[{\"id\":80,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":81,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Application Empirica\"},{\"id\":130,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 5 Link Rate\"},{\"id\":154,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried Category 5 Minimum Household Income\"}],\"groups\":[{\"id\":51,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":79,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]}]},{\"id\":8,\"name\":\"Salaried with Deduction\",\"variables\":[{\"id\":25,\"name\":\"Minimum Loan Amount\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Salaried with Deduction Minimum Loan Amount\"},{\"id\":26,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Salaried with Deduction Minimum Household Income\"},{\"id\":48,\"name\":\"Maximum Loan Amount Loan Size Range 1\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 1\"},{\"id\":49,\"name\":\"Maximum Loan Amount Loan Size Range 2\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 2\"},{\"id\":50,\"name\":\"Maximum Loan Amount Loan Size Range 3\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 3\"},{\"id\":90,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":125,\"name\":\"Maximum Loan Amount\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount\"}],\"groups\":[{\"id\":24,\"name\":\"Category 0\",\"variables\":[{\"id\":82,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":131,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 0 Link Rate\"},{\"id\":155,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 0 Minimum Household Income\"}],\"groups\":[{\"id\":52,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":84,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":53,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":85,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":54,\"name\":\"Loan Size Range 3\",\"variables\":[{\"id\":86,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":25,\"name\":\"Category 1\",\"variables\":[{\"id\":89,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":132,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 1 Link Rate\"},{\"id\":156,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 1 Minimum Household Income\"}],\"groups\":[{\"id\":55,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":87,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":56,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":88,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":26,\"name\":\"Category 3\",\"variables\":[{\"id\":93,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":133,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 3 Link Rate\"},{\"id\":157,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 3 Minimum Household Income\"}],\"groups\":[{\"id\":57,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":91,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":58,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":92,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":27,\"name\":\"Category 4\",\"variables\":[{\"id\":96,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":134,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 4 Link Rate\"},{\"id\":158,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 4 Minimum Household Income\"}],\"groups\":[{\"id\":59,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":94,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":60,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":95,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":28,\"name\":\"Category 5\",\"variables\":[{\"id\":98,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":135,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 5 Link Rate\"},{\"id\":159,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 5 Minimum Household Income\"}],\"groups\":[{\"id\":61,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":97,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":29,\"name\":\"Category 10\",\"variables\":[{\"id\":136,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 10 Link Rate\"},{\"id\":149,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"double\",\"definition\":\"Maximum Loan To Value Category 10\"},{\"id\":160,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Salaried with Deduction Category 10 Minimum Household Income\"}],\"groups\":[{\"id\":62,\"name\":\"New Purchase\",\"variables\":[{\"id\":100,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"double\",\"definition\":\"Maximum Loan To Value\"}],\"groups\":[{\"id\":63,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":99,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]}]}]},{\"id\":9,\"name\":\"Self Employed\",\"variables\":[{\"id\":17,\"name\":\"Minimum Loan Amount\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Self Employed Minimum Loan Amount\"},{\"id\":18,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Self Employed Minimum Household Income\"},{\"id\":45,\"name\":\"Maximum Loan Amount Loan Size Range 1\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 1\"},{\"id\":46,\"name\":\"Maximum Loan Amount Loan Size Range 2\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 2\"},{\"id\":47,\"name\":\"Maximum Loan Amount Loan Size Range 3\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount Loan Size Range 3\"},{\"id\":123,\"name\":\"Maximum Loan Amount\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Maximum Loan Amount\"}],\"groups\":[{\"id\":64,\"name\":\"Category 0\",\"variables\":[{\"id\":113,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":114,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":137,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Self-Employed Category 0 Link Rate\"},{\"id\":145,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"},{\"id\":161,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Self Employed Category 0 Minimum Household Income\"}]},{\"id\":65,\"name\":\"Category 1\",\"variables\":[{\"id\":117,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":118,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":138,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Self-Employed Category 1 Link Rate\"},{\"id\":162,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Self Employed Category 1 Minimum Household Income\"}],\"groups\":[{\"id\":67,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":115,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":68,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":116,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]},{\"id\":66,\"name\":\"Category 3\",\"variables\":[{\"id\":119,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":120,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":139,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Self-Employed Category 3 Link Rate\"},{\"id\":163,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Self Employed Category 3 Minimum Household Income\"}],\"groups\":[{\"id\":69,\"name\":\"Loan Size Range 1\",\"variables\":[{\"id\":121,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]},{\"id\":70,\"name\":\"Loan Size Range 2\",\"variables\":[{\"id\":122,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"}]}]}]},{\"id\":10,\"name\":\"Alpha\",\"variables\":[{\"id\":19,\"name\":\"Minimum Loan Amount\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Alpha Minimum Loan Amount\"},{\"id\":20,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Alpha Minimum Household Income\"},{\"id\":21,\"name\":\"Maximum Household Income\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Alpha Minimum Household Income\"},{\"id\":22,\"name\":\"Minimum Property Value\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Alpha Minimum Property Value\"}],\"groups\":[{\"id\":30,\"name\":\"Category 6\",\"variables\":[{\"id\":101,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":102,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"},{\"id\":103,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empiricia\"},{\"id\":140,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Alpha Category 6 Link Rate\"}]},{\"id\":31,\"name\":\"Category 7\",\"variables\":[{\"id\":104,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":105,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"},{\"id\":106,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":141,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Alpha Category 7 Link Rate\"}]},{\"id\":32,\"name\":\"Category 8\",\"variables\":[{\"id\":107,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":108,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"},{\"id\":109,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirca\"},{\"id\":142,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Alpha Category 8 Link Rate\"}]},{\"id\":33,\"name\":\"Category 9\",\"variables\":[{\"id\":110,\"name\":\"Maximum Loan To Value\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Loan To Value\"},{\"id\":111,\"name\":\"Maximum Payment To Income\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Maximum Payment To Income\"},{\"id\":112,\"name\":\"Minimum Application Empirica\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Application Empirica\"},{\"id\":143,\"name\":\"Category Link Rate\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"Alpha Category 9 Link Rate\"},{\"id\":148,\"name\":\"Minimum Household Income\",\"usage\":\"global\",\"type\":\"int\",\"definition\":\"Minimum Household Income for Alpha Category 9\"}]}]}]}]},{\"id\":3,\"name\":\"SA Home Loans\",\"groups\":[{\"id\":4,\"name\":\"New Business\",\"groups\":[{\"id\":5,\"name\":\"Credit\"}]},{\"id\":71,\"name\":\"Rates\",\"variables\":[{\"id\":147,\"name\":\"JIBAR 3 Month Rounded\",\"usage\":\"global\",\"type\":\"float\",\"definition\":\"The Johannesburg Interbank Agreed Rate (JIBAR) is the money market rate, used in South Africa. It is calculated as the average interest rate at which banks buy and sell money.\n\nThis 3-Month JIBAR is used in calculation of mortgage lending rates within SA Home Loans, and is rounded to the nearest basis point.\"}]}]}],\"values\":[{\"variableId\":165,\"value\":\"0.30\"},{\"variableId\":166,\"value\":\"1.0\"},{\"variableId\":1,\"value\":\"575\"},{\"variableId\":2,\"value\":\"18\"},{\"variableId\":3,\"value\":\"65\"},{\"variableId\":144,\"value\":\"0.1\"},{\"variableId\":146,\"value\":\"0.015\"},{\"variableId\":164,\"value\":\"0.8\"},{\"variableId\":23,\"value\":\"150000\"},{\"variableId\":24,\"value\":\"13000\"},{\"variableId\":51,\"value\":\"1800000\"},{\"variableId\":52,\"value\":\"2750000\"},{\"variableId\":53,\"value\":\"5000000\"},{\"variableId\":124,\"value\":\"5000000\"},{\"variableId\":62,\"value\":\"0.70\"},{\"variableId\":66,\"value\":\"575\"},{\"variableId\":126,\"value\":\"0.028\"},{\"variableId\":150,\"value\":\"13000.00\"},{\"variableId\":63,\"value\":\"0.30\"},{\"variableId\":64,\"value\":\"0.30\"},{\"variableId\":65,\"value\":\"0.25\"},{\"variableId\":69,\"value\":\"0.80\"},{\"variableId\":70,\"value\":\"575\"},{\"variableId\":127,\"value\":\"0.032\"},{\"variableId\":151,\"value\":\"13000.00\"},{\"variableId\":67,\"value\":\"0.30\"},{\"variableId\":68,\"value\":\"0.25\"},{\"variableId\":71,\"value\":\"0.85\"},{\"variableId\":72,\"value\":\"600\"},{\"variableId\":128,\"value\":\"0.037\"},{\"variableId\":152,\"value\":\"18600.00\"},{\"variableId\":73,\"value\":\"0.30\"},{\"variableId\":74,\"value\":\"0.25\"},{\"variableId\":77,\"value\":\"0.90\"},{\"variableId\":78,\"value\":\"610\"},{\"variableId\":129,\"value\":\"0.039\"},{\"variableId\":153,\"value\":\"18600.00\"},{\"variableId\":75,\"value\":\"0.30\"},{\"variableId\":76,\"value\":\"0.25\"},{\"variableId\":80,\"value\":\"0.95\"},{\"variableId\":81,\"value\":\"630\"},{\"variableId\":130,\"value\":\"0.039\"},{\"variableId\":154,\"value\":\"18600\"},{\"variableId\":79,\"value\":\"0.25\"},{\"variableId\":25,\"value\":\"150000\"},{\"variableId\":26,\"value\":\"13000\"},{\"variableId\":48,\"value\":\"1800000\"},{\"variableId\":49,\"value\":\"2750000\"},{\"variableId\":50,\"value\":\"5000000\"},{\"variableId\":90,\"value\":\"575\"},{\"variableId\":125,\"value\":\"5000000\"},{\"variableId\":82,\"value\":\"0.70\"},{\"variableId\":131,\"value\":\"0.028\"},{\"variableId\":155,\"value\":\"13000.00\"},{\"variableId\":84,\"value\":\"0.30\"},{\"variableId\":85,\"value\":\"0.30\"},{\"variableId\":86,\"value\":\"0.25\"},{\"variableId\":89,\"value\":\"0.80\"},{\"variableId\":132,\"value\":\"0.032\"},{\"variableId\":156,\"value\":\"13000.00\"},{\"variableId\":87,\"value\":\"0.30\"},{\"variableId\":88,\"value\":\"0.25\"},{\"variableId\":93,\"value\":\"0.85\"},{\"variableId\":133,\"value\":\"0.037\"},{\"variableId\":157,\"value\":\"18600.00\"},{\"variableId\":91,\"value\":\"0.30\"},{\"variableId\":92,\"value\":\"0.25\"},{\"variableId\":96,\"value\":\"0.90\"},{\"variableId\":134,\"value\":\"0.039\"},{\"variableId\":158,\"value\":\"18600.00\"},{\"variableId\":94,\"value\":\"0.30\"},{\"variableId\":95,\"value\":\"0.25\"},{\"variableId\":98,\"value\":\"0.95\"},{\"variableId\":135,\"value\":\"0.039\"},{\"variableId\":159,\"value\":\"18600.00\"},{\"variableId\":97,\"value\":\"0.25\"},{\"variableId\":136,\"value\":\"0.042\"},{\"variableId\":149,\"value\":\"1.00\"},{\"variableId\":160,\"value\":\"18600.00\"},{\"variableId\":100,\"value\":\"1.00\"},{\"variableId\":99,\"value\":\"0.25\"},{\"variableId\":17,\"value\":\"150000\"},{\"variableId\":18,\"value\":\"13000\"},{\"variableId\":45,\"value\":\"1800000\"},{\"variableId\":46,\"value\":\"2750000\"},{\"variableId\":47,\"value\":\"3500000\"},{\"variableId\":123,\"value\":\"3500000\"},{\"variableId\":113,\"value\":\"0.70\"},{\"variableId\":114,\"value\":\"595\"},{\"variableId\":137,\"value\":\"0.032\"},{\"variableId\":145,\"value\":\"0.25\"},{\"variableId\":161,\"value\":\"13000.00\"},{\"variableId\":117,\"value\":\"0.80\"},{\"variableId\":118,\"value\":\"600\"},{\"variableId\":138,\"value\":\"0.036\"},{\"variableId\":162,\"value\":\"13000.00\"},{\"variableId\":115,\"value\":\"0.25\"},{\"variableId\":116,\"value\":\"0.20\"},{\"variableId\":119,\"value\":\"0.85\"},{\"variableId\":120,\"value\":\"610\"},{\"variableId\":139,\"value\":\"0.037\"},{\"variableId\":163,\"value\":\"18600.00\"},{\"variableId\":121,\"value\":\"0.25\"},{\"variableId\":122,\"value\":\"0.20\"},{\"variableId\":19,\"value\":\"100000\"},{\"variableId\":20,\"value\":\"8000\"},{\"variableId\":21,\"value\":\"18599\"},{\"variableId\":22,\"value\":\"200000\"},{\"variableId\":101,\"value\":\"0.85\"},{\"variableId\":102,\"value\":\"0.30\"},{\"variableId\":103,\"value\":\"600\"},{\"variableId\":140,\"value\":\"0.039\"},{\"variableId\":104,\"value\":\"0.92\"},{\"variableId\":105,\"value\":\"0.30\"},{\"variableId\":106,\"value\":\"600\"},{\"variableId\":141,\"value\":\"0.044\"},{\"variableId\":107,\"value\":\"0.96\"},{\"variableId\":108,\"value\":\"0.30\"},{\"variableId\":109,\"value\":\"610\"},{\"variableId\":142,\"value\":\"0.048\"},{\"variableId\":110,\"value\":\"1.00\"},{\"variableId\":111,\"value\":\"0.30\"},{\"variableId\":112,\"value\":\"610\"},{\"variableId\":143,\"value\":\"0.051\"},{\"variableId\":148,\"value\":\"10000\"},{\"variableId\":147,\"value\":\"0.0580\"}]}}");
            dataService.WhenToldTo(x => x.GetLatestVariableSet()).Return(model);
            dataManager = new VariableManager(dataService, unitOfWorkFactory);
        };

        private Because of = () =>
        {
            result = dataManager.GetLatestVariableSetWords();
        };

        //terrible test i know, will make them more meaningful
        private It should_return_results = () =>
        {
            result.Count().ShouldNotEqual(0);
        };
    }
}