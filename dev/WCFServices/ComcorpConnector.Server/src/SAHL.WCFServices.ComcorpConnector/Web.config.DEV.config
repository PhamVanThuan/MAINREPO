<?xml version="1.0"?>
<configuration>
	<connectionStrings>
		<add name="DBCONNECTION_ServiceArchitect" connectionString="Data Source=DEVA03;Initial Catalog=2AM;Persist Security Info=True;User Id=ServiceArchitect;Password=Service1Architect;Connect Timeout=300;" providerName="System.Data.SqlClient" />
	</connectionStrings>
	<appSettings>
		<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
		<add key="DocumentManagerService_hostName" value="localhost" />
		<add key="DocumentManagerService_serviceName" value="DocumentManagerService" />
		<add key="DomainQueryService_hostName" value="localhost" />
		<add key="DomainQueryService_serviceName" value="DomainQueryService" />
		<add key="DocumentsPrivateKeyPath" value="C:\temp\PrivateKey.xml" />
	</appSettings>
	<system.web>
		<compilation debug="true" targetFramework="4.5" />
		<httpRuntime targetFramework="4.5" />
	</system.web>
	<system.serviceModel>
		<extensions>
			<behaviorExtensions>
				<add name="macAuthenticationBehaviorExtension" type="SAHL.WCFServices.ComcorpConnector.Server.MacAuthenticationBehaviorExtensionElement, SAHL.WCFServices.ComcorpConnector.Server, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" />
        <add name="comcorpRequestMessageBehaviorExtension" type="SAHL.WCFServices.ComcorpConnector.Server.Behaviors.ComcorpRequestMessageBehaviorExtensionElement, SAHL.WCFServices.ComcorpConnector.Server, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" />
			</behaviorExtensions>
		</extensions>
		<diagnostics>
			<messageLogging
			  logEntireMessage="true"
			  logMalformedMessages="true"
			  logMessagesAtServiceLevel="true"
			  logMessagesAtTransportLevel="false"
			  maxMessagesToLog="2147483647"
			  maxSizeOfMessageToLog="2147483647" />
		</diagnostics>
		<bindings>
			<!--
			<wsHttpBinding>
				<binding name="DocumentServiceBinding" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647">
					<readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" />
				</binding>
			</wsHttpBinding>
		-->
		      <basicHttpBinding>
		        <binding name="DocumentServiceBinding">
		          <security mode="None">
		            <transport clientCredentialType="None" />
		          </security>
		        </binding>
		      </basicHttpBinding>			
		</bindings>
		<behaviors>
			<endpointBehaviors>
				<behavior name="macAuthenticationBehavior">
					<macAuthenticationBehaviorExtension />
				</behavior>
        <behavior name="comcorpRequestMessageBehavior">
          <comcorpRequestMessageBehaviorExtension />
        </behavior>
      </endpointBehaviors>
			<serviceBehaviors>
				<behavior>
					<!-- To avoid disclosing metadata information, set the values below to false before deployment -->
					<serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
					<!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
					<serviceDebug includeExceptionDetailInFaults="true" />
					<!--
          <serviceCredentials>
            <serviceCertificate findValue="8dd1a63b8997dcf2a1733f93cc9c8c6d353a7fad" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" />
          </serviceCredentials>
          -->
				</behavior>
			</serviceBehaviors>
		</behaviors>
		<!--
    <bindings>
      <wsHttpBinding>
        <binding name="SecureBinding">
          <security mode="Message">
            <message clientCredentialType="Certificate" negotiateServiceCredential="false" establishSecurityContext="false" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    -->
		<services>
			<service name="SAHL.WCFServices.ComcorpConnector.Server.SAHLIntegrationService">
				<endpoint address="integration" binding="basicHttpBinding" contract="SAHL.WCFServices.ComcorpConnector.Interfaces.ISAHLIntegrationService" name="SAHLIntegrationService" behaviorConfiguration="comcorpRequestMessageBehavior" />
				<endpoint address="document" binding="basicHttpBinding" bindingConfiguration="DocumentServiceBinding" contract="SAHL.WCFServices.ComcorpConnector.Interfaces.ISAHLDocumentService" name="SAHLDocumentService" behaviorConfiguration="macAuthenticationBehavior" />
			</service>
		</services>

		<protocolMapping>
			<add binding="wsHttpBinding" scheme="https" />
		</protocolMapping>
		<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
	</system.serviceModel>
	<system.diagnostics>
		<sources>
			<source name="System.ServiceModel"
   switchValue="Verbose,ActivityTracing" propagateActivity="true">
				<listeners>
					<add name="ServiceModelTraceListener">
						<filter type="" />
					</add>
				</listeners>
			</source>
			<source name="System.ServiceModel.MessageLogging">
				<listeners>
					<add name="ServiceModelMessageLoggingListener">
						<filter type="" />
					</add>
				</listeners>
			</source>
		</sources>
		<sharedListeners>
			<add initializeData="E:\SoapLog\Tracelog.svclog"
			type="System.Diagnostics.XmlWriterTraceListener, System,&#xD;&#xA;      Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
			name="ServiceModelTraceListener" traceOutputOptions="Timestamp">
				<filter type="" />
			</add>
			<add initializeData="E:\SoapLog\Messages.svclog"
			type="System.Diagnostics.XmlWriterTraceListener, System,&#xD;&#xA;      Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
			name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
				<filter type="" />
			</add>
		</sharedListeners>
		<trace autoflush="true" />
	</system.diagnostics>
	<system.webServer>
		<modules runAllManagedModulesForAllRequests="true" />
		<!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
		<directoryBrowse enabled="true" />
	</system.webServer>
</configuration>
